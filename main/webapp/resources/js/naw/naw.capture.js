naw._addFunction(!0,{capture:function(b){var c=document,f;if(b.save){var h=b.name||naw.screenID,k=naw._getServletUri?naw._getServletUri("imageDecoder"):naw._getFixedUri(naw.config.servletURI.imageDecoder);f="server"==b.save?function(a){a=a.toDataURL("image/png");a=a.substr(a.indexOf(",")+1).toString();jQuery.ajax({type:"post",url:k,data:{imageData:a,imageName:h,data:naw.convertString(b.data),processor:b.processor,save:b.save,path:b.path||"",ext:"png"},success:function(a,d,c){b.callback?b.callback(a):
"0000"==a.code?naw.showSlideMessage("화면 이미지 저장이 완료 되었습니다. ("+h+".png)"):naw.showSlideMessage("화면 이미지 저장 중 오류가 발생하였습니다. ("+h+".png)")}})}:function(a){var l=new Image,d=a.toDataURL("image/png");l.src=d;var d=d.substr(d.indexOf(",")+1).toString(),g=c.createElement("iframe");g.setAttribute("name","captureFrame");g.setAttribute("style","display:none");c.body.appendChild(g);a=c.createElement("input");a.setAttribute("name","imageData");a.setAttribute("value",d);a.setAttribute("type","hidden");d=c.createElement("input");
d.setAttribute("name","imageName");d.setAttribute("value",h);var f=c.createElement("input");f.setAttribute("name","ext");f.setAttribute("value","png");var e=c.createElement("form");e.setAttribute("style","display:none");e.method="post";e.action=k;e.target="captureFrame";e.appendChild(a);e.appendChild(d);e.appendChild(f);c.body.appendChild(e);jQuery(g).load(function(){var a=naw.convertObject(this.contentWindow.document.body.firstChild.innerHTML);"0000"!=a.code&&naw.showSlideMessage("화면 이미지("+a.fname+
"."+a.ext+") 처리 중 오류가 발생하였습니다.<br>(에러 메시지 :: "+a.error+")");c.body.removeChild(e);c.body.removeChild(g)});e.submit();b.callback&&b.callback(l)}}else f=function(a){var c=new Image;c.src=a.toDataURL("image/png");b.target&&naw(b.target).jq.get(0).appendChild(c);b.callback&&b.callback(c)};var m=this.jq.get(0);window.html2canvas?html2canvas(m,{onrendered:f}):naw._require("naw.thirdparty.html2canvas",function(){html2canvas(m,{onrendered:f})})}});
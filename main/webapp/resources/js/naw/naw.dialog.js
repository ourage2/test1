(function(f,a){f.namespace("dialog");var v,w,z={},r={},x={},t=0,u=0,q={},A=f.plugin.Base.extend({init:function(a){var c=this;a=f.storage.get("window.theme")?f.storage.get("window.theme"):"default";f.loadCss("/css/"+a+"/dialog.css");f.loadWidget({draggable:null,resizable:null});this.setName("dialog");this._super();f.subscribe("theme.change",function(b){c.changeTheme(b.themeName,b.themeBasePath)})}});f._addFunction(!0,{_dialog:function(d){0==naw(".dialog").length&&new A;var c=this.attr("id");if("display"==
d)return naw("#"+c).isHide()?!1:!0;if("hide"==d)this._hide();else{if("gridFilterResize"==d)return a("#"+c).css({height:parseInt(a("#"+c).css("height").split("px")[0])+24}),a("#dialogContent"+c).css({height:parseInt(a("#dialogContent"+c).css("height").split("px")[0])+24}),!1;if(naw.isNull(d)||"string"==typeof d)return!1;this._dialogCall(d)}}});f._addFunction(!0,{_hide:function(d){d=this.attr("id");if(naw("#"+d).isHide())return!1;if(q[d].slidable)if("down"==q[d].slideDirection)a("#"+d).slideUp();else if("up"==
q[d].slideDirection){parseInt(a("#"+d).css("top"));var c=a("#"+d),b="hide",g=!1,e="height",f="top",m={},h;c.show();h=c;h[e]();m[e]=0;h.animate(m,{queue:!1,duration:"400",easing:"",complete:function(){"hide"===b&&c.hide()}})}else if("right"==q[d].slideDirection){var l=parseInt(a("#"+d).css("left")),y=parseInt(a("#"+d).css("width")),c=a("#"+d),b="hide",g=!1,e="width",f="left",m={};c.show();h=c;h[e]();g&&(h.css(e,0),h.css(f,0));m[e]=l;m[f]=y;h.animate(m,{queue:!1,duration:"400",easing:"",complete:function(){"hide"===
b&&(c.hide(),c.css({left:l}))}})}else"left"==q[d].slideDirection&&(l=parseInt(a("#"+d).css("left")),y=parseInt(a("#"+d).css("width")),c=a("#"+d),b="hide",g=!1,e="width",f="left",m={},c.show(),h=c,h[e](),g&&(h.css(e,0),h.css(f,0)),m[e]=l,m[f]=l,h.animate(m,{queue:!1,duration:"400",easing:"",complete:function(){"hide"===b&&(c.hide(),c.css({left:l}))}}));else a("#"+d).hide();"undefined"!=typeof q[d]&&q[d].modal&&a("#dialog_accessDeny").hide()},_dialogCall:function(d){void 0==d&&(d={});var c=this.attr("id");
if("gridFilterResize"==d)return a("#"+c).css({height:parseInt(a("#"+c).css("height").split("px")[0])+24}),a("#dialogContent"+c).css({height:parseInt(a("#dialogContent"+c).css("height").split("px")[0])+24}),!1;var b=Object({buttons:{},closeOnEscape:!0,draggable:!0,maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,resizable:!1,title:"",titlebar:!0,width:300,height:150,message:"",icon:"information",slidable:!1,slideDirection:"down",align:"center",top:0,left:0,bottom:!1,right:!1,overflow:"auto",
resizeStart:"",resizeStop:"",dragStart:"",dragStop:"",autoClose:!0,onDialogOpen:"",ondialogClose:""}),b=naw.merge(b,d);if(!naw("#"+c).isHide())return!1;d=!1;"{}"!=naw.convertString(b.buttons)&&(d=!0);if(a("#"+c).hasClass("dialog")){for(var g=6002,e=0;e<a(".dialog").length;e++)0==e?g=parseInt(jQuery(jQuery(".dialog")[e]).css("zIndex")):parseInt(jQuery(jQuery(".dialog")[e]).css("zIndex"))>g&&(g=parseInt(jQuery(jQuery(".dialog")[e]).css("zIndex")));this.css("zIndex",g+1)}else{var e=a("#"+c+"> *"),p=
this;(p.uiDialog=a("#"+c)).hide().removeClass("extra-dimensions").addClass("dialog").css({zIndex:6001}).attr("tabIndex",-1).keydown(function(a){b.closeOnEscape&&a.keyCode&&27==a.keyCode&&l()}).attr({role:"dialog","aria-labelledby":"dialog"}).appendTo(document.body);uiDialogContent=a("<div id=dialogContent"+c+"></div>").show().removeAttr("title").addClass("dialog-content").append(e);uiDialogTitlebar=(p.uiDialogTitlebar=a("<div id=dialogTitlebar"+c+"></div>")).addClass("dialog-titlebar");uiDialogTitlebarH3=
a("<h3></h3>").appendTo(uiDialogTitlebar);uiDialogTitlebarImageSpan=a("<span id=dialogTitlebarImg"+c+"></span>").appendTo(uiDialogTitlebarH3);uiDialogTitlebarTextSpan=a("<span id=dialogTitle"+c+"></span>").addClass("dialog-title").appendTo(uiDialogTitlebarH3);uiDialogTitlebarClose=a("<span id=dialogTitlebarCloseImg"+c+"></span>").addClass("dialog-icon-close").hover(function(){uiDialogTitlebarClose.addClass("state-hover")},function(){uiDialogTitlebarClose.removeClass("state-hover")}).focus(function(){uiDialogTitlebarClose.addClass("state-focus")}).blur(function(){uiDialogTitlebarClose.removeClass("state-focus")}).click(function(b){}).appendTo(uiDialogTitlebar);
if(d){var g=a("<div id=dialogButtonpane"+c+"></div>").addClass("dialog-buttonpane"),m=a("<span id=dialogButtonSet"+c+"></span>").addClass("dialog-buttonset").appendTo(g);naw.foreach(b.buttons,function(d,k){k=a.isFunction(k)?{click:k}:k;var y=a('<button class="doaction" type="button"></button>').text(d).unbind("click").click(function(){k.click.apply(a("#"+c),arguments)}).click(function(a){b.autoClose?naw.foreach(b.autoClose,function(b,a){d==b?a&&l():l()}):l()}).appendTo(m);a.fn.button&&y.button()})}a("#"+
c).html(uiDialogTitlebar).append(uiDialogContent).append(g)}f.behavior.IApplyBlockUI&&f.behavior.IApplyBlockUI(a("#"+c),!0,{callWidget:"dialog",type:"content"});a("#"+c).css({height:b.height,width:b.width});b.icon&&a("#dialogTitlebarImg"+c).addClass("dialog-icon-"+b.icon);b.draggable&&f("#"+c).draggable({handle:"#dialogTitle"+c,containment:window,start:function(){b.dragStart&&b.dragStart.call(p)},stop:function(){b.dragStop&&b.dragStop.call(p)}});b.resizable&&f("#"+c).resizable({minWidth:300,minHeight:150,
maxWidth:a(document).width()-50,maxHeight:a(document).height()-50,onResize:function(){var d=parseInt(a("#"+c).css("height").split("px")[0])-r[c];a("#dialogContent"+c).css("height",parseInt(z[c])+d);b.resizeStart&&b.resizeStart.call(p)},onStop:function(){r[c]=parseInt(a("#"+c).css("height").split("px")[0]);z[c]=parseInt(a("#dialogContent"+c).css("height").split("px")[0]);b.resizeStop&&b.resizeStop.call(p)}});a("#dialogContent"+c).css("overflow",b.overflow);g=10;b.minWidth>b.width&&(b.width=b.minWidth);
d&&(g=naw.config.dialog.bottomHeight?g+parseInt(naw.config.dialog.bottomHeight):g+35);b.titlebar?g=naw.config.dialog.titlebarHeight?g+parseInt(naw.config.dialog.titlebarHeight):g+28:a("#dialogTitlebar"+c).hide();a("#dialogContent"+c).height(b.height-g);""!=b.title?a("#dialogTitle"+c).html(b.title):a("#dialogTitle"+c).html("dialog");if(b.modal){if(0==a("#dialog_accessDeny").length){var h=a("<div id='dialog_accessDeny' class='dialog-access-deny'></div");h.appendTo(document.body)}else a("#dialog_accessDeny").show();
f.behavior.IApplyBlockUI&&f.behavior.IApplyBlockUI(h,!0,{callWidget:"dialog",type:"access"})}h=parseInt(a(window).width()/2)-parseInt(a("#"+c).css("width").split("px")[0]/2);d=parseInt(a(window).height()/2)-parseInt(a("#"+c).css("height").split("px")[0]/2);0>d&&(d=0);0!=b.top&&(d=b.top);0!=b.left&&(h=b.left);!1!==b.right?a("#"+c).css("right",b.right):a("#"+c).css("left",h);!1!==b.bottom?a("#"+c).css("bottom",b.bottom):a("#"+c).css("top",d);r[c]=parseInt(b.height);z[c]=parseInt(a("#dialogContent"+
c).css("height").split("px")[0]);b.slidable?setTimeout(function(){if("down"==b.slideDirection)a("#"+c).slideDown();else if("up"==b.slideDirection){var d=parseInt(a("#"+c).css("top")),k=a("#"+c),e=!0,f="height",g="top",n={},h;k.show();h=k[f]();e&&(k.css(f,0),k.css(g,h+d+2));n[f]=h+2;"main"==b.slideStart?n[g]=d+15:"0px"==naw(b.slideStart).css("height")?n[g]=d-14:n[g]=d+10;k.animate(n,{queue:!1,duration:"500",easing:"",complete:function(){}})}else if("right"==b.slideDirection)d=parseInt(a("#"+c).css("left")),
k=a("#"+c),e=!0,f="width",g="right",n={},k.show(),h=k[f](),e&&(k.css(f,0),k.css(g,0)),n[f]=h,n[g]=d,k.animate(n,{queue:!1,duration:"500",easing:"",complete:function(){}});else if("left"==b.slideDirection){var m=parseInt(a("#"+c).css("width")),d=parseInt(a("#"+c).css("left")),k=a("#"+c),e=!0,f="width",g="left",n={};k.show();h=k[f]();e&&(k.css(f,0),k.css(g,d+m));n[f]=h;n[g]=d;k.animate(n,{queue:!1,duration:"500",easing:"",complete:function(){}})}a("#dialogTitlebarCloseImg"+c).unbind("click").click(function(b){l()});
a("#"+c).unbind("keydown").keydown(function(a){b.closeOnEscape&&a.keyCode&&27==a.keyCode&&l()})},1):setTimeout(function(){a("#dialogTitlebarCloseImg"+c).unbind("click").click(function(b){l()});a("#"+c).unbind("keydown").keydown(function(a){b.closeOnEscape&&a.keyCode&&27==a.keyCode&&l()});a("#"+c).show()},1);var l=function(){if("function"==typeof b.onDialogClose){var d=b.onDialogClose.call("",a("#"+c));if(void 0!=d&&!d)return!1}if(b.slidable)if("down"==b.slideDirection)a("#"+c).slideUp();else if("up"==
b.slideDirection){parseInt(a("#"+c).css("top"));var k=a("#"+c),f="hide",d="height",g="top",e={},h;k.show();h=k;h[d]();e[d]=0;h.animate(e,{queue:!1,duration:"400",easing:"",complete:function(){"hide"===f&&k.hide()}})}else if("right"==b.slideDirection){var l=parseInt(a("#"+c).css("left")),m=parseInt(a("#"+c).css("width")),k=a("#"+c),f="hide",d="width",g="left",e={};h=k;h[d]();e[d]=0;e[g]=l+m;h.animate(e,{queue:!1,duration:"400",easing:"",complete:function(){"hide"===f&&(k.hide(),k.css({left:l+m}))}})}else"left"==
b.slideDirection&&(l=parseInt(a("#"+c).css("left")),k=a("#"+c),f="hide",d="width",g="left",e={},h=k,h[d](),e[d]=0,e[g]=l,h.animate(e,{queue:!1,duration:"400",easing:"",complete:function(){"hide"===f&&(k.hide(),k.css({left:l}))}}));else a("#"+c).hide();b.modal&&a("#dialog_accessDeny").hide()};a("#"+c).focus();b.onDialogOpen&&setTimeout(function(){b.onDialogOpen.call()},1);q[c]=b;return!1}});f._addFunction(!1,{_messagebox:function(a){0==naw("#dialog").length&&new A;this._messageboxCall(a)}});f._addFunction(!1,
{_messageboxCall:function(d){if("hide"==d)return x={},u=t=0,a("#dialog").hide(),a("#messagebox_accessDeny").hide(),!1;0==a("#dialog").length&&(a('<div id="dialog"></div>').appendTo(document.body).hide(),f.behavior.IApplyBlockUI&&f.behavior.IApplyBlockUI(a("#dialog"),!0,{callWidget:"messagebox",type:"content"}));var c=a("#dialog");if("block"==c.css("display"))return x[t]=d,t++,!1;var b=Object({buttons:{},closeOnEscape:!0,draggable:!0,resizable:!1,maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,
modal:!1,title:"",width:300,height:150,message:"",icon:"information",align:"center",top:0,left:0,overflow:"auto",resizeStart:"",resizeStop:"",dragStart:"",dragStop:"",right:!1,bottom:!1,autoClose:!0,autoCloseMsgBox:!1,autoCloseTime:5}),g=this,b=naw.merge(b,d);"object"==typeof b.message&&(b.message="object");if(!c.hasClass("messagebox")){d=(g.uiDialog=c).hide().addClass("messagebox").css("zIndex",8001).attr("tabIndex",-1).keydown(function(a){b.closeOnEscape&&a.keyCode&&27==a.keyCode&&l()}).attr({role:"dialog",
"aria-labelledby":"dialog"});var e=a('<div id="dialogContent"></div>').show().removeAttr("title").addClass("dialog-content").appendTo(d);a('<p id="dialogContentMessage"></p>').show().addClass("message").appendTo(e);d=(g.uiDialogTitlebar=a('<div id="dialogTitlebar"></div>')).addClass("dialog-titlebar").prependTo(d);e=a("<h3></h3>").appendTo(d);a('<span id="dialogTitlebarImg"></span>').addClass("dialog-titlebar-image").appendTo(e);a('<span id="dialogTitle"></span>').addClass("dialog-title").appendTo(e);
var p=a('<span id="dialogTitlebarCloseImg"></span>').addClass("dialog-icon-close").hover(function(){p.addClass("state-hover")},function(){p.removeClass("state-hover")}).focus(function(){p.addClass("state-focus")}).blur(function(){p.removeClass("state-focus")}).click(function(a){l()}).appendTo(d)}a("#dialogContentMessage").html(b.message);b.icon&&a("#dialogTitlebarImg").addClass("dialog-icon-"+b.icon);b.draggable&&f("#dialog").draggable({handle:"#dialogTitle",containment:window,start:function(){b.dragStart&&
b.dragStart.call(g)},stop:function(){b.dragStop&&b.dragStop.call(g)}});b.resizable&&f("#dialog").resizable({minWidth:300,minHeight:150,maxWidth:a(document).width()-50,maxHeight:a(document).height()-50,onResize:function(){var d=parseInt(w+parseInt(c.css("height").split("px")[0]-v));a("#dialogContent").css("height",d);b.resizeStart&&b.resizeStart.call(g)},onStop:function(){r.dialog=parseInt(c.css("width").split("px")[0]);b.resizeStop&&b.resizeStop.call(g)}});d=!1;"{}"!=naw.convertString(b.buttons)&&
(d=!0);if(d){var e=a('<div id="dialogButtonpane"></div>').addClass("dialog-buttonpane"),m=a('<span id="dialogButtonSet"></span>').addClass("dialog-buttonset").appendTo(e);naw.foreach(b.buttons,function(d,f){f=a.isFunction(f)?{click:f}:f;var e=a('<button class="doaction" type="button"></button>').text(d).unbind("click").click(function(){f.click.apply(c,arguments)}).click(function(a){b.autoClose?naw.foreach(b.autoClose,function(a,b){d==a?b&&l():l()}):l()}).appendTo(m);a.fn.button&&e.button()});e.appendTo(c)}a(".dialog-content").css("overflow",
b.overflow);e=38;b.minWidth>b.width&&(b.width=b.minWidth);c.css({width:b.width,height:b.height});d&&(e+=30);a("#dialogContent").height(b.height-e);a("#dialogContent").css({textAlign:b.align});d=parseInt(a(window).width()/2)-parseInt(c.css("width").split("px")[0]/2);e=parseInt(a(window).height()/2)-parseInt(c.css("height").split("px")[0]/2);0>e&&(e=0);0!=b.top&&(e=b.top);0!=b.left&&(d=b.left);!1!==b.right?c.css("right",b.right):c.css("left",d);!1!==b.bottom?c.css("bottom",b.bottom):c.css("top",e);
a("#dialogTitle").html(b.title);if(b.modal){if(0==a("#messagebox_accessDeny").length){var h=a("<div id='messagebox_accessDeny' class='messagebox-access-deny'></div");h.appendTo(document.body)}else a("#messagebox_accessDeny").show();f.behavior.IApplyBlockUI&&f.behavior.IApplyBlockUI(h,!0,{callWidget:"messagebox",type:"access"})}v=parseInt(c.css("height").split("px")[0]);w=parseInt(a("#dialogContent").css("height").split("px")[0]);r.dialog=parseInt(c.css("width").split("px")[0]);c.unbind("keydown").keydown(function(a){b.closeOnEscape&&
a.keyCode&&27==a.keyCode&&l()});c.show();b.autoCloseMsgBox&&setTimeout(function(){l()},1E3*parseInt(b.autoCloseTime));var l=function(){c.unbind("keydown").keydown(function(a){b.closeOnEscape&&a.keyCode&&27==a.keyCode&&l()});if(t==u)c.hide(),a("#messagebox_accessDeny").hide(),x={},u=t=0;else if(t>u){c.hide();a("#messagebox_accessDeny").hide();b=Object({buttons:{},closeOnEscape:!0,draggable:!0,resizable:!1,modal:!1,title:"",width:300,height:150,message:"",icon:"information",align:"center",top:0,left:0,
right:!1,bottom:!1,autoClose:!0,autoCloseMsgBox:!1,autoCloseTime:5});b=naw.merge(b,x[u]);if(b.modal){if(0==a("#messagebox_accessDeny").length){var d=a("<div id='messagebox_accessDeny' class='messagebox-access-deny'></div");d.appendTo(document.body)}else a("#messagebox_accessDeny").show();f.behavior.IApplyBlockUI&&f.behavior.IApplyBlockUI(d,!0,{callWidget:"messagebox",type:"access"})}a("#dialogContentMessage").html(b.message);b.icon&&a("#dialogTitlebarImg").addClass("dialog-icon-"+b.icon);b.draggable&&
f("#dialog").draggable({handle:"#dialogTitle",containment:window,start:function(){b.dragStart&&b.dragStart.call(g)},stop:function(){b.dragStop&&b.dragStop.call(g)}});b.resizable&&f("#dialog").resizable({minWidth:300,minHeight:150,maxWidth:a(document).width()-50,maxHeight:a(document).height()-50,onResize:function(){var d=parseInt(w+parseInt(c.css("height").split("px")[0]-v));a("#dialogContent").css("height",d);b.resizeStart&&b.resizeStart.call(g)},onStop:function(){r.dialog=parseInt(c.css("width").split("px")[0]);
b.resizeStop&&b.resizeStop.call(g)}});d=!1;"{}"!=naw.convertString(b.buttons)&&(d=!0);if(d){var e=a('<div id="dialogButtonpane"></div>').addClass("dialog-buttonpane"),h=a('<span id="dialogButtonSet"></span>').addClass("dialog-buttonset").appendTo(e);naw.foreach(b.buttons,function(d,e){e=a.isFunction(e)?{click:e}:e;var f=a('<button class="doaction" type="button"></button>').text(d).unbind("click").click(function(){e.click.apply(c,arguments)}).click(function(a){b.autoClose?naw.foreach(b.autoClose,function(a,
b){d==a?b&&l():l()}):l()}).appendTo(h);a.fn.button&&f.button()});e.appendTo(c)}e=38;b.minWidth>b.width&&(b.width=b.minWidth);d&&(e+=30);a("#dialogContent").height(b.height-e);a("#dialogContent").css({textAlign:b.align});v=parseInt(c.css("height").split("px")[0]);w=parseInt(a("#dialogContent").css("height").split("px")[0]);d=parseInt(a(window).width()/2)-parseInt(c.css("width").split("px")[0]/2);e=parseInt(a(window).height()/2)-parseInt(c.css("height").split("px")[0]/2);0>e&&(e=0);0!=b.top&&(e=b.top);
0!=b.left&&(d=b.left);!1!==b.right?c.css("right",b.right):c.css("left",d);!1!==b.bottom?c.css("bottom",b.bottom):c.css("top",e);a("#dialogTitle").html(b.title);c.show();c.focus();u++;b.autoCloseMsgBox&&setTimeout(function(){l()},1E3*parseInt(b.autoCloseTime))}};c.focus();return!1}})})(naw,jQuery);
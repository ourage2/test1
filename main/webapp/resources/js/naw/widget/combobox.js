(function($){$.namespace("widget.combobox");var g_isIE=false;var g_seletArray=null;var g_isCSS=false;var g_browser=$.agent.browser;var c_prevData=new Object;var c_focus=false;if(!MSG_comboBox)var MSG_comboBox={};MSG_comboBox.create=$.getMessage("W0301");MSG_comboBox.create_1=$.getMessage("W0302");MSG_comboBox.optionType=$.getMessage("W0303");MSG_comboBox.initialize=$.getMessage("W0304");MSG_comboBox.isParam_1=$.getMessage("W0305");var DOMEVENT={};DOMEVENT.key={KEY_BACKSPACE:8,KEY_TAB:9,KEY_ENTER:13,
KEY_ESCAPE:27,KEY_SPACE:32,KEY_SHIFT:16,KEY_CTRL:17,KEY_ALT:18,KEY_PAUSE:19,KEY_CAPS_LOCK:20,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_LEFT_ARROW:37,KEY_UP_ARROW:38,KEY_RIGHT_ARROW:39,KEY_DOWN_ARROW:40,KEY_INSERT:45,KEY_DELETE:46,KEY_HELP:47,KEY_LEFT_WINDOW:91,KEY_RIGHT_WINDOW:92,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123,KEY_NUM_LOCK:144,KEY_SCROLL_LOCK:145};$.widget.combobox=$.widget.Base.extend({init:function(){this.setName("combobox");
this._super();var conf=this._getTemplate(arguments[0]);conf.renderTo=arguments[1].id;this.widgets=conf.widgets?conf.widgets:null;this.rect=conf.rect?conf.rect:Object();this.valueLimit=conf.valueLimit?conf.valueLimit:false;this.maxLength=conf.maxLength?conf.maxLength:null;this.defaultValue=conf.defaultValue;this.disabled=conf.disabled?conf.disabled:false;this.width=conf.width?conf.width:null;this.height=conf.height?conf.height:null;this.autoListHeight=conf.autoListHeight?conf.autoListHeight:null;this.renderTo=
conf.renderTo?conf.renderTo:null;this.items=conf.items?conf.items:null;this.toolTip=conf.toolTip?conf.toolTip:null;this.transform=conf.transform?conf.transform:null;this.onChange=conf.onChange?conf.onChange:null;this.inputEditable=conf.inputEditable===true?true:false;this.triggerChangeHandler=conf.triggerChangeHandler===true?true:false;this.listWidth=conf.listWidth?conf.listWidth:naw.config.combobox&&naw.config.combobox.listWidth?naw.config.combobox.listWidth:"";this._create()},_eventBind:function(){var self=
this;var events=["change"];for(var i=0,eventLen=events.length;i<eventLen;i++){var name=events[i];self[name]=function(that,nm){return function(fn){that["on"+nm.substring(0,1).toUpperCase()+nm.substr(1)]=fn}}(self,name)}},_create:function(){var that=this;var oSelect=this.renderTo;if(typeof oSelect=="string")oSelect=document.getElementById(oSelect);else{$.showSlideMessage(MSG_comboBox.create+"(Create0)",5E3);return null}if(oSelect==null){$.showSlideMessage(MSG_comboBox.create+"(Create1)",5E3);return null}if(oSelect.tagName!=
"SPAN"){$.showSlideMessage(MSG_comboBox.create+"(Create2)",5E3);return null}jQuery(oSelect).off().removeAttr("style");jQuery(oSelect).find("> span").remove();jQuery("body").find("> span#"+this.renderTo+"-combo-list").remove();if(g_browser=="msie")g_isIE=true;$.subscribe("theme.change",function(data){that.changeTheme(data.themeName,data.themeBasePath)});$.subscribe("widget.reset",function(data){if(data.target=="*")that.widgets._selOption=null;else{var c_length=naw(data.target.selector).find(".combobox-pnl").length;
for(var i=0;i<c_length;i++)if(naw(data.target.selector).find(".combobox-pnl").jq[i].id==that.renderTo)that.widgets._selOption=null}});if(this.onChange==null)this["onChange"]=function(e){if(e)that.onChange.call(that)};var _DOMParent=oSelect;this.rect.width=this.width==null?jQuery("#"+this.renderTo).width():this.width;this.rect.height="18";this.rect.listWidth=this.listWidth;this.widgets=new this.coreCombo(this);this.widgets.maxLength=this.maxLength!=null?this.maxLength:null;this.widgets.defaultValue=
this.defaultValue;this.widgets.disabled=this.disabled;this.widgets.valueLimit=this.valueLimit;this.widgets.toolTip=this.toolTip;this.widgets.transform=this.transform;this.widgets.inputEditable=this.inputEditable;this.widgets.onChange=this.onChange;this.widgets._init(_DOMParent,oSelect,this.rect);var x=new Array;var initvalue=this.defaultValue;for(var i in this.items)x[i]=[this.items[i].value,this.items[i].text];if(x.length>0){this.widgets._addOption_core(x);if(typeof initvalue!="undefined")this._setSelectedValue(initvalue)}this._eventBind();
return this.widgets},_remove:function(){g_isIE=null;this.rect=null;this.valueLimit=false;this.maxLength=null;this.defaultValue=null;this.disabled=false;this.onChange=null;this.width=null;this.renderTo=null;this.items=null;this.toolTip=null;this.transform=null;if(this.widgets)this.widgets._Remove()},_isWidgets:function(){if(!this.widgets){$.showSlideMessage(MSG_comboBox.initialize+"(isWidgets : "+this.widgets+")",5E3);return false}return true},addItem:function(options,text){if(!this._isWidgets())return null;
if(typeof options=="object"&&arguments.length==1)this.widgets._addOption_core(options);else{var _value=options;var _text=text;this.widgets._addOption_core([[_value,_text]])}},setWidth:function(arg){if(naw.isNull(arg))return false;jQuery(this.widgets.DOMelem).css("width",parseInt(arg)+"px");jQuery(this.widgets.DOMelem_input).css("width",parseInt(arg)-26+"px");jQuery(this.widgets.DOMlist).css("width",parseInt(arg)-2+"px")},count:function(){if(!this._isWidgets())return null;return this.widgets.optionsArr.length},
disable:function(mode){if(!this._isWidgets())return null;if(mode=="true")mode=true;else if(mode=="false")mode=false;this.widgets.DOMelem_input.disabled=mode;if(mode)jQuery(this.widgets.DOMParent).addClass("state-disabled");else jQuery(this.widgets.DOMParent).removeClass("state-disabled")},editable:function(mode){if(!this._isWidgets())return null;if(mode=="true")mode=true;else if(mode=="false")mode=false;this.widgets.DOMelem_input.readOnly=!mode?"readonly":""},focus:function(flag){this.widgets.DOMelem_input.focus();
if(flag){c_focus=true;if(this.widgets.DOMlist.style.display=="block")return;this.widgets._showList()}},hide:function(){if(!this._isWidgets())return null;naw("#"+this.renderTo,true).hide()},insertItem:function(idx,value,text){if(!this._isWidgets())return null;if(!this._isParamCheck({index:idx}))return null;var dOpt=new this.widgets.coreOption;this.widgets.optionsArr.splice(idx,0,dOpt);var args=[[value,text]];var attr=args[0];if(attr.length){attr.value=attr[0]||"";attr.text=attr[1]||"";attr.css=attr[2]||
""}dOpt._setValue.apply(dOpt,[attr]);this.widgets._redrawOptions();dOpt=null;return true},item:function(idx){if(!this._isWidgets())return null;if(!this._isParamCheck({index:idx}))return null;return this.widgets.optionsArr[idx]},getItemText:function(idx){return this.item(idx).getText()},getItemValue:function(idx){return this.item(idx).getValue()},changeItemText:function(text,idx){this.item(idx).setText(text)},changeItemValue:function(value,idx){this.item(idx).setValue(value)},val:function(sStr){if(typeof sStr!=
"undefined"){this._addDataSet(this.widgets.DOMParent,sStr);this._setSelectedValue(sStr);if(this.triggerChangeHandler&&c_prevData[this.renderTo]!=this._getText()){this.prevData=c_prevData[this.renderTo]?c_prevData[this.renderTo]:{value:"",text:""};this.curData={text:this._getText(),value:this._getSelectedValue()};this.onChange.call(this,this)}c_prevData[this.renderTo]={text:this._getText(),value:this._getSelectedValue()}}else{var retVal=this._getSelectedValue();if(retVal==null)return this._getText();
else return retVal}},text:function(sStr){if(typeof sStr!="undefined"){var optionArr=this.widgets.optionsArr,existText=false,value=-1;for(var i=0,optionArrLen=optionArr.length;i<optionArrLen;i++)if(optionArr[i].text==sStr){existText=true;value=optionArr[i].value;break}if(existText){this._addDataSet(this.widgets.DOMParent,value);this._setSelectedValue(value)}else this.widgets._setText(sStr)}else return this._getText()},maxlength:function(nVal){this.widgets.DOMelem_input.maxLength=nVal},removeAll:function(){if(!this._isWidgets())return null;
this.widgets.optionsArr=new Array;this.widgets._redrawOptions();this.widgets._selOption=null;this.widgets._setText("")},removeIndex:function(idx){if(!this._isWidgets())return null;if(naw.isArray(idx)){for(var i=idx.length;i>0;i--){var current_text=this._getOptionText(idx[i-1]);if(current_text==null)return null;this.widgets.optionsArr.splice(idx[i-1],1);if(current_text==this._getText()){this.widgets._selOption=null;this.widgets._setText("")}}this.widgets._redrawOptions()}else{var current_text=this._getOptionText(idx);
if(current_text==null)return null;this.widgets.optionsArr.splice(idx,1);this.widgets._redrawOptions();if(current_text==this._getText()){this.widgets._selOption=null;this.widgets._setText("")}}return true},selectedIndex:function(idx){if(!this._isWidgets())return null;if(typeof idx!="undefined"){this.widgets._selectOption_core(idx);if(this.triggerChangeHandler&&c_prevData[this.renderTo]!=this._getText()){this.prevData=c_prevData[this.renderTo]?c_prevData[this.renderTo]:{value:"",text:""};this.curData=
{text:this._getText(),value:this._getSelectedValue()};this.onChange.call(this,this)}c_prevData[this.renderTo]={text:this._getText(),value:this._getSelectedValue()}}else return this.widgets._selectedIndex()},show:function(){if(!this._isWidgets())return null;naw("#"+this.renderTo,true).show()},_getIndexByValue:function(value){if(!this._isWidgets())return null;for(var i=0;i<this.widgets.optionsArr.length;i++)if(this.widgets.optionsArr[i].value==value)return i;return null},_getText:function(){if(!this._isWidgets())return null;
return this.widgets.DOMelem_input.value},_getOptionText:function(idx){if(!this._isWidgets())return null;if(!this._isParamCheck({index:idx}))return null;return this.widgets.optionsArr[idx].text},_getSelectedValue:function(){if(!this._isWidgets())return null;return this.widgets._selOption?this.widgets._selOption.value:null},_isParamCheck:function(param){var isParam=true;var idx=param.index;if(typeof idx!="undefined"){var tempVal=String(idx);if(isNaN(idx)||idx==null||tempVal==""||tempVal.length<=0){isParam=
false;$.showSlideMessage(MSG_comboBox.isParam_1+"(isParamCheck , idx:"+idx+")",5E3)}if(idx<0||this.widgets.optionsArr.length<=idx){isParam=false;$.showSlideMessage(MSG_comboBox.isParam_1+"(isParamCheck , idx:"+idx+")",5E3)}}return isParam},_setSelectedValue:function(value){for(var i=0;i<this.widgets.optionsArr.length;i++)if(this.widgets.optionsArr[i].value==value){this.widgets._selectOption_core(i);return true}this.widgets._selectOption_core(0);return true},coreCombo:function(that){var comboObject=
this;this.selectId=null;this.selectWidth=null;this.selectHeight=null;this.DOMParent=null;this.DOMelem=null;this.DOMelem_input=null;this.DOMelem_button=null;this.DOMlist=null;this.DOMlistF=null;this._selOption=null;this.optionsArr=null;this.DOMelem_button=null;this._skiprender=null;this._init=function(_DOMParent,oSelect,rect){this.DOMParent=_DOMParent;this.selectId=jQuery("#"+oSelect.id);this.selectWidth=rect.width;this.selectHeight=rect.height;this.selectListWidth=rect.listWidth;if(!g_seletArray){g_seletArray=
new Array;var oThis=this;jQuery(document.body).bind("keydown.d",function(e){try{if((e||window.event).keyCode==9)oThis._closeAll()}catch(e$0){}return true})}this._createHTML(oSelect);g_seletArray.push(this)};this._Remove=function(){comboObject=null;this.selectId=null;this.selectWidth=null;this.selectHeight=null;this._destructor();this.DOMlist.combo=null;this.DOMelem.combo=null;this.DOMParent=null;this.DOMelem=null;this.DOMelem_input=null;this.DOMelem_button=null;this.DOMlist=null;this.DOMlistF=null;
this._selOption=null;this._escOption=null;this.optionsArr=null;this.DOMelem_button=null;this._skiprender=null};this._destructor=function(){var optionsArr_Length=this.optionsArr.length;for(var i=0;i<optionsArr_Length;i++)this.optionsArr.pop();var seletArray_Length=g_seletArray.length;for(var i=0;i<seletArray_Length;i++)g_seletArray.pop()};this._addOption_core=function(options){if(!arguments[0].length)var args=[arguments];else var args=options;this._render(false);for(var i=0;i<args.length;i++){var attr=
args[i];if(attr.length){attr.value=attr[0]||"";attr.text=attr[1]||"";attr.css=attr[2]||""}this._addOption(attr)}this._render(true)};this._addOption=function(attr){var dOpt=new this.coreOption;this.optionsArr.push(dOpt);dOpt._setValue.apply(dOpt,[attr]);dOpt=null};this._createHTML=function(oSelect){this._selOption=null;this.optionsArr=Array();this._drawTextArea(oSelect);this.DOMlist=document.createElement("span");this.DOMlist.className="naw-combo-list";this.DOMlist.id=this.DOMParent.id+"-combo-list";
if(this.selectWidth>=2)this.DOMlist.style.width=this.selectWidth-2+"px";this.DOMlist.style.position="absolute";this.DOMlist.style.top="-10000px";this.DOMlist.style.left="-10000px";document.body.appendChild(this.DOMlist);this.DOMlist.combo=this.DOMelem.combo=this;this.DOMelem_input.onkeydown=this._onKeyDown;this.DOMelem_input.onkeypress=this._onKeyPress;this.DOMelem_input.onchange=this._onChange;this.DOMelem.onclick=this._openSelect;this.DOMelem.onmouseover=this._toolTipView;this.DOMlist.onclick=this._selectOption;
this.DOMlist.onmouseover=this._mouseSelectOption;if(typeof naw.config.combobox!="undefined")if(naw.agent.mobile){if(typeof naw.config.combobox.mobileInputEditable!="undefined"&&!naw.config.combobox.mobileInputEditable)this.DOMelem_input.readOnly="readonly"}else{if(typeof naw.config.combobox.inputEditable!="undefined"&&!naw.config.combobox.inputEditable)this.DOMelem_input.readOnly="readonly";if(this.inputEditable)this.DOMelem_input.readOnly=""}this._eventDefine()};this._closeAll=function(){if(g_seletArray)for(var i=
0;i<g_seletArray.length;i++)if(g_seletArray[i].DOMlist.style.display=="block"){g_seletArray[i].DOMlist.style.display="none";jQuery(document).unbind("click.combo")}};this._showList=function(){var oThis=this;jQuery(document).bind("click.combo",function(e){if(!c_focus)oThis._closeAll();c_focus=false});if(this.DOMlist.style.top!="")this.DOMlist.style.display="block";else{var pos=this.selectId.offset();var x=pos.left;var y=pos.top;var $input=jQuery(this.DOMelem_input),inputTop=$input.offset().top,inputHeight=
$input.outerHeight(true);y=inputTop;var tmpX=x;var tmpY=y+inputHeight;this.DOMlist.style.position="absolute";this.DOMlist.style.top=tmpY+"px";this.DOMlist.style.left=tmpX+"px";this.DOMlist.style.display="block"}if(this._selOption){this._escOption=this._selOption;this._selectOption_core(this._selectedIndex(),true)}};this._drawTextArea=function(oSelect){var s_box=document.createElement("span");if(this.selectWidth>=4)s_box.style.width=this.selectWidth-0+"px";this.DOMelem=s_box;this._drawTextBox();this._drawTextButton();
this.DOMParent.appendChild(this.DOMelem)};this._drawTextBox=function(){var inputText=document.createElement("input");inputText.type="text";inputText.maxLength=this.maxLength?this.maxLength:2147483647;if(this.transform)naw(inputText).setNX("transform",this.transform);if(this.selectWidth>=30){var tmpWidth=this.selectWidth-6;tmpWidth-=20;inputText.style.width=tmpWidth+"px";inputText.className="naw-combo-input"}this.DOMelem.appendChild(inputText);this.DOMelem_input=inputText};this._drawTextButton=function(){var imgButton=
document.createElement("button");imgButton.className="naw-combo-icon";imgButton.setAttribute("type","button");this.DOMelem.appendChild(imgButton);this.DOMelem_button=imgButton};this._eventDefine=function(){var oThis=this;if(this.onChange!=null);jQuery(this.DOMlist).on("click",function(e){if(typeof that.onChange=="function")var oThis=this.combo;that.prevData=c_prevData[that.renderTo];if(c_prevData[that.renderTo])if(oThis.DOMelem_input.value==c_prevData[that.renderTo].value)return false;c_prevData[that.renderTo]=
{text:oThis._selOption.text,value:oThis._selOption.value};that.curData=c_prevData[that.renderTo];that.onChange.call(that,that)});jQuery("#wrap, main").on("scroll",function(e){comboObject._closeAll()})};this._eventListener=function(el,eventName,handler){if(el.addEventListener)el.addEventListener(eventName,handler,false);else if(el.attachEvent)el.attachEvent("on"+eventName,handler);else el["on"+eventName]=handler};this._selectedIndex=function(){for(var i=0;i<this.optionsArr.length;i++)if(this.optionsArr[i]==
this._selOption)return i;return-1};this._mouseSelectOption=function(e){(e||window.event).cancelBubble=true;var node=g_isIE?window.event.srcElement:e.target;var oThis=this.combo;for(var i=0;i<oThis.DOMlist.childNodes.length;i++)if(oThis.DOMlist.childNodes[i]==node){oThis._selectOption_core(i,true);break}};this._onChange=function(e){var oThis=this.parentNode.combo;if(oThis.DOMelem_input.value==""){oThis._selectOption_core(i);for(var i=0;i<oThis.optionsArr.length;i++)if(oThis.optionsArr[i]._data()[0]==
oThis.DOMelem_input.value||oThis.optionsArr[i]._data()[1]==oThis.DOMelem_input.value){oThis._selectOption_core(i);break}}else{var isSelect=false;for(var i=0;i<oThis.optionsArr.length;i++)if(oThis.optionsArr[i]._data()[0]==oThis.DOMelem_input.value||oThis.optionsArr[i]._data()[1]==oThis.DOMelem_input.value){oThis._selectOption_core(i);oThis.DOMelem_input.blur();isSelect=true;break}if(!isSelect){oThis._unSelectOption();oThis._setText("")}}};this._onKeyPress=function(e){var oThis=this.parentNode.combo;
var k=DOMEVENT.key;var ev=e||window.event;if(ev.keyCode==k.KEY_ENTER){oThis._closeAll();return false}if(ev.keyCode==k.KEY_ESCAPE){oThis._restoreOption();oThis._closeAll();return false}return true};this._onKeyDown=function(e){var oThis=this.parentNode.combo;var k=DOMEVENT.key;var ev=(e||window.event).keyCode;oThis._unSelectOption();window.setTimeout(function(){oThis._onKeyDownSelect(ev)},300)};this._onKeyDownSelect=function(ev){var k=DOMEVENT.key;if(ev==k.KEY_DOWN_ARROW);else if(ev==k.KEY_UP_ARROW);
else{ev.cancelBubble=true;if(this.DOMelem_input.value=="")return false;for(var i=0;i<this.optionsArr.length;i++)if(this.optionsArr[i]._data()[0]==this.DOMelem_input.value||this.optionsArr[i]._data()[1]==this.DOMelem_input.value){this._selectOption_core(i);this.DOMelem_input.blur();return false}if(this.valueLimit){this._unSelectOption();this._setText("")}}return true};this._openSelect=function(e){var oThis=this.combo;if(oThis.disabled)return;if(oThis.DOMlist.children.length==0)return;if(oThis.DOMelem_input.disabled==
"disabled"||oThis.DOMelem_input.disabled==true)return;oThis._closeAll();oThis.DOMlist.style.display="block";oThis._positList(oThis);if(oThis._selOption){oThis._escOption=oThis._selOption;oThis._selectOption_core(oThis._selectedIndex(),true)}oThis.DOMelem_input.select()};this._toolTipView=function(e){var oThis=this.combo;if(oThis.toolTip)if(oThis._selOption)naw(oThis.DOMelem_input).showTooltip(oThis._selOption.value+":"+oThis._selOption.text)};this._positList=function(oObj){if(jQuery(this.DOMlist).attr("preMaxHeight"))jQuery(this.DOMlist).css("max-height",
jQuery(this.DOMlist).attr("preMaxHeight"));var pos=oObj.selectId.offset();var x=pos.left;var y=pos.top;var h=oObj.DOMlist.offsetHeight;var w=oObj.DOMlist.offsetWidth;var dir="down";var $input=jQuery(oObj.DOMelem_input),inputTop=$input.offset().top,inputHeight=$input.outerHeight(true);y=inputTop;var _w=jQuery(window);var wh=_w.height();var ww=_w.width();if(dir=="down"&&y+h-_w.scrollTop()>wh)dir="up";var maxRight=x+w-_w.scrollLeft();if(maxRight>ww)x-=maxRight-ww;if(dir=="up")y-=h+inputHeight;var tmpX=
x;var tmpY=y+inputHeight;this.DOMlist.style.position="absolute";this.DOMlist.style.top=tmpY+"px";if(tmpY<0&&inputTop-jQuery(this.DOMlist).height()){this.DOMlist.style.top="0px";jQuery(this.DOMlist).attr("preMaxHeight",jQuery(this.DOMlist).css("max-height"));jQuery(this.DOMlist).css("max-height",inputTop)}this.DOMlist.style.left=tmpX+"px";jQuery(document).bind("click.combo",function(e){var _target=naw(e.target);if(_target.parent().name!="combobox"&&typeof _target.parent().parent().renderTo=="undefined")oObj._closeAll()})};
this._restoreOption=function(){if(!this._escOption)return;this._unSelectOption();this._selOption=this._escOption;this._setText(this._selOption.text);this._escOption=null};this._render=function(mode){this._skiprender=!mode;this._redrawOptions()};this._redrawOptions=function(){if(this._skiprender)return;for(var i=this.DOMlist.childNodes.length-1;i>=0;i--)this.DOMlist.removeChild(this.DOMlist.childNodes[i]);var tempLength=0;var currentLength=0;for(var i=0;i<this.optionsArr.length;i++){this.DOMlist.appendChild(this.optionsArr[i]._render_op(i));
currentLength=$.getByteLength(this.optionsArr[i].text)*7+30;if(tempLength<currentLength)tempLength=currentLength}if(naw.isEmptyTrim(this.selectListWidth)){if(this.selectWidth<tempLength)this.DOMlist.style.width="auto"}else if(this.selectListWidth=="input")if(this.selectWidth==0)jQuery(this.DOMlist).width(jQuery(this.DOMelem_input).width());var jqOuterHeight=jQuery(window).outerHeight(true);if(that.height||that.autoListHeight){var thatHeight=that.height?that.height:that.autoListHeight?this.DOMlist.children.length*
22:"104";if(jqOuterHeight<=thatHeight)if(naw.isPopup)thatHeight=jqOuterHeight-75;else thatHeight=jqOuterHeight-91;this.DOMlist.style.maxHeight=thatHeight+"px"}else if(this.DOMlist.children.length>10){if(naw(this.DOMlist).css("maxHeight")=="none")this.DOMlist.style.maxHeight="104px"}else;};this._selectNext=function(step){var selIndex=this._selectedIndex()+step;if(selIndex<1)return;while(this.optionsArr[selIndex]){if(!this.optionsArr[selIndex]._isHidden())return this._selectOption_core(selIndex);selIndex+=
step}};this._selectOption_core=function(idx,flag){var movOption=this.optionsArr[idx];if(!movOption)return;if(!flag){this._unSelectOption(idx);this._selOption=movOption;var data=movOption._data();this._setText(data[1])}else if(this._escOption)this._escOption._unselect_op(null);movOption._select_op(null);var corr=movOption.content.offsetTop+movOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;if(corr>0)this.DOMlist.scrollTop+=corr;corr=this.DOMlist.scrollTop-movOption.content.offsetTop;
if(corr>0)this.DOMlist.scrollTop-=corr};this._selectOption=function(e){(e||window.event).cancelBubble=true;var node=g_isIE?window.event.srcElement:e.target;var oThis=this.combo;for(var i=0;i<oThis.DOMlist.childNodes.length;i++)if(oThis.DOMlist.childNodes[i]==node)break;oThis._selectOption_core(i);oThis._closeAll();oThis.DOMelem_input.blur()};this._setText=function(text){this.DOMelem_input.value=text};this._unSelectOption=function(idx){if(this._selOption){this._selOption._deselect(idx);this._selOption._unselect_op(null);
this._selOption=null}if(this._escOption)this._escOption._unselect_op(null)};this.coreOption=function(){this.value=null;this.text="";this.selected=false;this.css="";this.setValue=function(val){this.value=val||"";this.css="";this.content=null;comboObject._redrawOptions()};this.setText=function(txt){this.text=txt||"";this.css="";this.content=null;comboObject._redrawOptions();var t_idx=comboObject._selectedIndex();if(t_idx!=-1)comboObject._selectOption_core(t_idx)};this.getValue=function(){return this.value};
this.getText=function(){return this.text};this._select_op=function(_className){if(this.content)this.content.className=_className?_className:"naw-combo-selected"};this._unselect_op=function(_className){if(this.content)this.content.className=""};this._list_unselect_op=function(){this.className=""};this._isHidden=function(){return this._render_op().style.display=="none"};this._deselect=function(idx){if(this.content)this._render_op()};this._setValue=function(attr){this.value=attr.value||"";this.text=
attr.text||"";this.css=attr.css||"";this.content=null};this._render_op=function(idx){if(!this.content){this.content=document.createElement("div");this.content.style.lineHeight="13px";this.content.onmouseout=this._list_unselect_op;if(this.text=="")this.content.innerHTML="&nbsp;";else this.content.innerHTML=this.text}return this.content};this._data=function(){return[this.value,this.text]}}}});$._addWidget("combobox",naw.widget.combobox)})(naw);
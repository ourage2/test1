(function(l,h){g_window=new function(){var r=null,b={m_scWinArray:[0,0,0,0,0,0,0,0,0,0],lastSelectedWindow:null,windowStorage:[],windowOrder:[],OPACITY_MINIMIZED:.7,RESIZE_EVENT_DELAY:15,initialized:!1,resizeTimer:null,orgMax:{},orgTopLeft:{},setting:{dock:"left",animationSpeed:0,handleScrollbar:!1,showLog:!0}};if(fwk.config.maxWindowCnt){b.m_scWinArray=[];for(var g=0;g<fwk.config.maxWindowCnt;g++)b.m_scWinArray[g]=0}this.init=function(e){r=this;var g={titleIconItems:[{id:"grade",use:!1,title:""},
{id:"scnGuide",use:!0,title:"화면설명"},{id:"memo",use:!0,title:"메모"},{id:"favorite",use:!0,title:"즐겨찾기"},{id:"print",use:!0,title:"화면인쇄"},{id:"newWin",use:!0,title:"새창열기"},{id:"maximize",use:!0,title:"이전 크기로 복원"},{id:"close",use:!0,title:"닫기"}]};e=this._getOptions(e);for(var v=0;v<g.titleIconItems.length;v++)for(var B in g.titleIconItems[v])"undefined"!=typeof e[B]&&(g.titleIconItems[v][B]=e[B]);this.options=g=jQuery.extend({},g,e);b.initialized||(this.options.draggable&&l.loadWidget("draggable",null),
this.options.resizable&&l.loadWidget("resizable",null));g=h(this.options.renderTo);this._create(g,this.options)};this._create=function(e,t){function v(d){d=0;var a;a=b.m_scWinArray;for(var h=0;h<a.length;h++)if(0==a[h]){a[h]=1;d=h+1;break}a;return d}function B(d,a,e,g){if(null==d||null==b.lastSelectedWindow||b.lastSelectedWindow.getWindowId()!=a.getWindowId()){if("mousedown"==g){var l=!1;null==d?null!=b.lastSelectedWindow&&b.lastSelectedWindow!=a&&(P(a),N(a,e),l=!0):null!=b.lastSelectedWindow&&b.lastSelectedWindow.getWindowId()!=
a.getWindowId()&&(P(a),N(a,e),l=!0);if(l){for(var l=b.windowStorage.length,M=!0,r=l-1;0<=r;r--){var x=b.windowStorage[r],B=x.isMaximized(),t=x.isAllways();x.isMinimized()?x.getContainer().show():r!=l-1?M&&!t?x.getContainer().hide():x.getContainer().show():x.getContainer().show();t||x.getContainer().css("z-index",a.options.z+r);M=B}e.onActivate&&a.isExitDivWrap()&&a.getFrame().get(0).contentWindow.naw&&(l=a.getFrame().get(0).contentWindow.naw.adapter.outbound.activate,"function"==typeof l&&5!=arguments.length&&
(a.getFrame().get(0).contentWindow.naw.behavior.IBeforeActivate&&a.getFrame().get(0).contentWindow.naw.behavior.IBeforeActivate(),l()));if(h.isFunction(e.onSelectAfter))e.onSelectAfter(a)}h.isFunction(e.dockMenuCallInit)&&e.dockMenuCallInit("change",a)}null==d?(null!=b.lastSelectedWindow&&b.lastSelectedWindow!=a?(b.lastSelectedWindow.getContainer()&&b.lastSelectedWindow.unselect(),a.select(),a.getContainer().show()):null==b.lastSelectedWindow&&(a.select(),a.getContainer().show()),b.lastSelectedWindow=
a):null!=d&&(null!=b.lastSelectedWindow&&b.lastSelectedWindow!=a?(!b.lastSelectedWindow.getContainer()||!b.lastSelectedWindow.getContainer().hasClass("state-normal")&&a.getContainer().hasClass("state-normal")||b.lastSelectedWindow.unselect(),a.select(),a.getContainer().show()):null==b.lastSelectedWindow&&(a.select(),a.getContainer().show()),b.lastSelectedWindow=a);d;a;e;g=null}}function N(d,a,h){b.windowStorage.push(d);b.windowStorage[b.windowStorage.length-1].options=a;h&&"_create"==h&&(b.windowOrder.push(d),
b.windowOrder[b.windowOrder.length-1].options=a);d;a}function P(d,a){for(var h=0,e=b.windowStorage.length;h<e;h++){var l=b.windowStorage[h];if(l==d){b.windowStorage[h]=null;b.windowStorage.splice(h--,1);if(a&&"_destroy"==a)for(h=0;b.windowOrder.length>h;h++)l==b.windowOrder[h]&&(b.windowOrder[h]=null,b.windowOrder.splice(h--,1));break}}d}function Q(){b.setting.handleScrollbar&&("7.0"==l.agent.version||"6.0"==l.agent.version?h("body").attr("scroll","no"):document.body.style.overflow="hidden")}function U(){b.setting.handleScrollbar&&
("7.0"==l.agent.version||"6.0"==l.agent.version?h("body").removeAttr("scroll"):document.body.style.overflow="auto")}function R(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}function S(){var d=0,a=0;"number"==typeof b.pageYOffset?(a=b.pageYOffset,d=b.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(a=document.body.scrollTop,d=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||
document.documentElement.scrollTop)&&(a=document.documentElement.scrollTop,d=document.documentElement.scrollLeft);return{left:d,top:a}}function ja(d,a){function e(c){a.title=c;var b=m.get(0).contentWindow.naw.screenID;if(a.htmlConf&&a.htmlConf.transform.title)switch(a.htmlConf.transform.title){case "uppercase":b=b.toUpperCase();break;case "lowsercase":b=b.toLowerCase()}b=a.useTitleTranId?a.formatTranId.pre+b+a.formatTranId.sur:"";-1==c.indexOf(b)&&(c+=b);p.find(".title-text").html(c);b=m.get(0).contentWindow.jQuery("#header>div.title>:header");
0==b.length&&(b=m.get(0).contentWindow.jQuery("header>div.title>:header"));0<b.length&&b.text(c);return c}function t(c){a.content=c;"object"==typeof c&&(c=h(c).clone(!0));m.empty();m.append(c)}function da(c,b,d){a.showFooter&&(b?h("> div:first",y).removeClass("error warning alert").addClass(b.msgCss):h("> div:first",y).removeClass("error warning alert"),a.footerContent=c,"object"==typeof c&&(c=h(c).clone(!0)),y.children(".message-pnl").children("span.message-text").empty(),y.children(".message-pnl").children("span.message-text").append(c),
b=d?d:"",y.children(".message-pnl").children("span.message-text").attr("title",b));c}function D(a){var b=k,c=m;a&&1==arguments.length&&(b=a.getContainer(),c=a.getFrame());b.width();b=b.height();b=x(b,arguments[0],arguments[1]);c.css("width","100%").height(b).prevObject.height(b)}function N(){m.show();a.showFooter&&y.show();"msie"==!l.agent.browser&&k.css("opacity",1)}function x(b,d){var c=p,f=y;d&&(c=3==arguments.length&&arguments[2]?arguments[1]:d.getHeader(),f=3==arguments.length&&arguments[2]?
arguments[2]:d.getFooter());if(!p)return!1;var h="none"==c.css("display")?0:c.outerHeight(),f=a.showFooter?f.outerHeight():0,c=c.next().outerHeight()-c.next().height();return b-f-h-c}function ea(){var b,f;if(null!=d)f=d.offset(),b=f.left+(d.width()-k.width())/2,f=f.top+(d.height()-k.height())/2;else{f=S();var h=R();b=f.left+(h.width-k.width())/2;f=f.top+(h.height-k.height())/2}0<a.createRandomOffset.x&&(b+=(Math.random()-.5)*a.createRandomOffset.x);0<a.createRandomOffset.y&&(f+=(Math.random()-.5)*
a.createRandomOffset.y);k.css({left:b,top:f})}function fa(){var a;if(null!=d)a=d.offset().left+(d.width()-k.width())/2;else{a=S();var b=R();a=a.left+(b.width-k.width())/2}k.css({left:a})}function ga(){var a;if(null!=d)a=d.offset().top+(d.height()-k.height())/2;else{a=S();var b=R();a=a.top+(b.height-k.height())/2}k.css({top:a})}function X(c,f,e){"msie"==!l.agent.browser&&null==d&&Q();A=!0;K=!1;k.removeClass("state-normal").addClass("state-current");p.hide();1!=f&&(E.left=k.css("left"),E.top=k.css("top"),
F.w=k.width(),F.h=k.height());S();f=R();if(null!=d){if(d.offset(),parseInt(d.css("borderTopWidth")),parseInt(d.css("borderLeftWidth")),0==d.width()&&d.width("100%"),z={left:0,top:0,width:d.width(),height:d.height()},a.relativeBoundary){f=d.height()-2*parseInt(k.css("borderTopWidth"),10);if(d.height()==d.parent().height()||d.height()==d.parent().height()-1||d.height()==d.parent().height()-2)f-=d.prev().outerHeight(),d.height(d.height()-d.prev().height());var q=d.width()-2*parseInt(k.css("borderLeftWidth"),
10);fwk.config.useMdiFix&&(q>fwk.config.useMdiFixWidth&&(q=fwk.config.useMdiFixWidth),f>fwk.config.useMdiFixHeight&&(f=fwk.config.useMdiFixHeight));z.left=0;z.top=0;z.width=q;z.height=f}}else z={left:0,top:0,width:f.width,height:f.height};"msie"==!l.agent.browser&&(z.opacity=1);c?(k.css(z),D(p,y)):k.animate(z,b.setting.animationSpeed,"swing",function(){"msie"==l.agent.browser&&null==d&&Q();N();D(p,y);h.isFunction(a.afterMaximize)&&a.afterMaximize(w)});if(!e&&h.isFunction(a.onMaximize))a.onMaximize(w);
c;f=null}function ha(c){K=!1;if(a.draggable){var f={handle:l.agent.mobile?p.find(".title-text"):p,start:function(){for(g=0;g<b.windowStorage.length;g++)b.windowStorage[g].showOverlay()},containment:a.renderTo,stop:function(){for(g=0;g<b.windowStorage.length;g++)b.windowStorage[g].hideOverlay();B(d,w,a,"mousedown")}};"msie"==!l.agent.browser&&(f.opacity=.5);l(k).draggable(f);f=null}a.resizable&&(f={minWidth:a.minWidth,minHeight:a.minHeight,maxHeight:d.height()-2,maxWidth:d.width(),onResize:function(){for(g=
0;g<b.windowStorage.length;g++)b.windowStorage[g].showOverlay();D()},onStop:function(){for(g=0;g<b.windowStorage.length;g++)b.windowStorage[g].hideOverlay();D()}},"msie"==!l.agent.browser&&(f.opacity=.5),l(k).resizable(f),f=null);var e=f=null;if(A||c){A=!1;f=E;e=F;p.show();k.unbind("mouseover");k.unbind("mouseout");k.addClass("state-current").addClass("state-normal");a.showFooter||p.next().addClass("no-footer");if(c){h.isFunction(a.dockMenuCall)&&a.dockMenuCall("casecade");0==c.top&&(c.top=c.top.toString());
0==c.left&&(c.left=c.left.toString());var q=d.height()-2,m=d.width(),H=c.width?parseInt(c.width,10):e.w,H=H>m?m:H,Y=c.height?parseInt(c.height,10)+p.outerHeight(!0)+y.outerHeight(!0):e.h;e.w=H;e.h=Y>q?q:Y;H=c.top&&c.top.toString()?e.h+parseInt(c.top,10):e.h;q=(q-H)/2;q=0>q?0:c.top&&c.top.toString()?parseInt(c.top,10):q;H=c.left&&c.left.toString()?e.w+parseInt(c.left,10):e.w;m=(m-H)/2;m=0>m?0:c.left&&c.left.toString()?parseInt(c.left,10):m;f.top=q;f.left=m}z={left:f.left,top:f.top,width:e.w,height:e.h};
"msie"==!l.agent.browser&&(z.opacity=1);k.animate(z,b.setting.animationSpeed,"swing",function(){N();D();A?null==d&&Q():(U(),a.draggable&&l(k).draggable("disable",!1),a.resizable&&l(k).resizable("disable",!1));var c=b.windowStorage.length-2;0<=c&&b.windowStorage[c].getContainer().show();h.isFunction(a.afterCascade)&&a.afterCascade(w)});if(h.isFunction(a.onCascade))a.onCascade(w)}}var w=null,G="container_";if(!a.onDuplication)for(g=0;b.windowStorage.length>g;g++){var O=b.windowStorage[g];if(O.getUrl()==
a.url){a.z=2E3;B(d,O,a,"mousedown");if(h.isFunction(a.onMessage))a.onMessage(O);return null}}var V=v();if(0==V){if(!a.recyclable)return alert("최대 열 수 있 윈도우 창 갯수는 "+b.m_scWinArray.length+"입니다."),null;var Z=b.windowStorage;a.recycleCloseOrder&&(Z=b.windowOrder);for(g=0;Z.length>g;g++)if(O=Z[g],!O.isLocked()){if(O.close())break}else if(fwk.config.maxWindowCnt-1==g)return alert("최대 열 수 있 윈도우 창 갯수는 "+b.m_scWinArray.length+"입니다.\r\n"),null;V=v()}var G=G+V,aa=!1,K=!1,A=!1,W=!1,T={},L={},E={},F={},z={},ia=
null,ba=!1,I=!1,ca=!1,J=!1,k=null,p=null,m=null,y=null;return{initialize:function(c){w=c;a.relativeBoundary=null!=d&&"relative"==d.css("position")?!0:relativeBoundary;c=null!=d?d:h("body");var f=a.showRoundCorner?"ui-corner-all ":"";c.append("<div id='"+G+"' class='window-pnl state-current'></div>");k=c.children("div#"+G);a.subContainerClass&&k.addClass(a.subContainerClass);if(h.isFunction(a.onOpen))a.onOpen(w);if(h.isFunction(a.onBeforeOpen))a.onBeforeOpen(a);L.w=b.orgMax.maxWidth=a.width;L.h=b.orgMax.maxHeight=
a.height=d.height();b.orgTopLeft.left?(b.orgTopLeft.left+=50,b.orgTopLeft.top+=50,b.orgTopLeft.left+a.minWidth>d.width()&&(b.orgTopLeft.left=20),b.orgTopLeft.top+a.minHeight>d.height()&&(b.orgTopLeft.top=30)):b.orgTopLeft={left:20,top:30};E.left=b.orgTopLeft.left;E.top=b.orgTopLeft.top;F.w=a.width;F.h=a.minHeight;c=d.width();f=d.height();fwk.config.useMdiFix&&(c>fwk.config.useMdiFixWidth&&(c=fwk.config.useMdiFixWidth),f>fwk.config.useMdiFixHeight&&(f=fwk.config.useMdiFixHeight));k.width("100%");k.height(f);
0<=a.x||0<=a.y?(c=S(),0<=a.x?(f=0,f=null!=d?a.relativeBoundary?a.x+c.left:a.x+d.offset().left:a.x+c.left,k.css("left",f)):fa(),0<=a.y?(f=0,f=null!=d?a.relativeBoundary?a.y+c.top:a.y+d.offset().top:a.y+c.top,k.css("top",f)):ga()):ea();c=k.position();k.css({left:c.left,top:c.top});var f=h("<div></div>").addClass("window-title").hide(),g=a.titleIconItems;f.append("<h2><span class='title-icon'></span><span class='title-text'>"+a.title+"</span></h2>");for(c=0;c<g.length;c++)if(0==c&&f.append("<div class='toolbar-pnl'><ul></ul></div>"),
g[c].use){var q=h("<span class='icon-"+g[c].id+"' title='"+g[c].title+"' idxitem='"+c+"'></span>").bind("click",function(){var a=g[this.getAttribute("idxitem")].id,b=!0;switch(a){case "close":r.getSelectedWindow().close();b=!1;break;case "maximize":a=A?"casecade":"max";break;case "lock":I=!I,r.getSelectedWindow().setLocked(I)}b&&h.isFunction(r.options.dockMenuClick)&&r.options.dockMenuClick(a)});f.find(".toolbar-pnl ul").append(h("<li></li>").append(q))}k.append(f);p=h("div#"+G).children(".window-title").bind("dblclick",
function(){h.isFunction(r.options.dockMenuCall)&&r.options.dockMenuCall(A?"casecade":"max");A?ha():X()});if(null!=a.url&&""!=h.trim(a.url)){if(h.isFunction(a.onIframeStart))a.onIframeStart(w,a.url);if(a.showLoading){k.append("<div class='frame-loading'>Loading...</div>");var x=k.children(".frame-loading");x.css("marginLeft","-"+x.outerWidth()/2-20+"px");x.click(function(){x.remove()});x=null}c=a.scrollable?"auto":"no";k.append("<div class='window-content'></div>");k.children(".window-content").append("<iframe id='"+
G+"' class='window-frame' scrolling='"+c+"' src='"+a.url+"' frameborder='0'></iframe>");m=k.children(".window-content").children(".window-frame");a.dataObj.workflowKey&&m.attr("workflowKey",a.dataObj.workflowKey);a.dataObj.auth&&m.attr("auth",a.dataObj.auth);if(a.showFooter){f=divWinMsgPnl=divWinExtPnl=tmpSpan=null;f=naw("<div class='window-message'></div>");tmpSpan=naw("<span class='message-icon'></span><span class='message-text'></span>");divWinMsgPnl=naw("<div class='message-pnl'></div>").append(tmpSpan);
f.append(divWinMsgPnl);if(a.showExtFooter&&a.arrExtFooter){q="";divWinExtPnl=naw("<div class='message-ext-pnl'></div>");for(c=0;c<a.arrExtFooter.length;c++)q="",tmpSpan=null,q+="<span class='"+(a.arrExtFooter[c].css?a.arrExtFooter[c].css:"")+"' title='"+(a.arrExtFooter[c].title?a.arrExtFooter[c].title:"")+"'  itemIdx='"+c+"'>"+(a.arrExtFooter[c].text?a.arrExtFooter[c].text:"")+"</span>",tmpSpan=naw(q),a.arrExtFooter[c].clickFn&&tmpSpan.bind("click",function(){var b=jQuery(this).attr("itemIdx");a.arrExtFooter[b].clickFn.call(this,
this,m.get(0).contentWindow)}),divWinExtPnl.append(tmpSpan);f.append(divWinExtPnl)}f.appendTo(k);y=k.children("div.window-message");f=divWinMsgPnl=divWinExtPnl=tmpSpan=null;naw(h("> div:first > span:first",y)).dblclick(function(b){a.msgObj.isShow&&a.msgObj.showMsg(w)});null!=a.footerContent&&(da(a.footerContent),y.children("div").children().show())}else f=a.showRoundCorner?"ui-corner-bottom ":"",m.addClass(f);k.mousedown(function(){B(d,w,a,"mousedown")});m.ready(function(){X(!0,!0,"init");k.css("z-index",
a.z+b.windowStorage.length)});m.on("load",function(){for(var c=b.windowStorage.length,f=!0,g=c-1;0<=g;g--){var q=b.windowStorage[g],t=q.isMaximized();q.isMinimized()?q.getContainer().show():t&&(f&&g!=c-1?q.getContainer().hide():q.getContainer().show());f=t;q;t=null}try{var u=m.get(0).contentWindow.document.getElementById("wrap");if(u&&m.get(0).contentWindow.jQuery)J=!0;else return J=!1,a.showLoading&&x.remove(),!1;u=null}catch(n){return J=!1,a.showLoading&&x.remove(),u=null,!1}c=!1;a.useMenuTitle&&
(c=a.useMenuTitle);f=m.get(0).contentWindow.document.getElementById("header");f||(f=m.get(0).contentWindow.document.getElementsByTagName("header"),f=0<f.length?f[0]:null);if(f&&f.children[0]&&(f=f.children[0],u="","title"==f.className&&f.children[0])){g={pre:"[",sur:"]"};a.formatTranId?g=a.formatTranId:a.formatTranId=g;h(f).addClass("bread");u=g=f.children[0].innerHTML;q=m.get(0).contentWindow.naw.screenID;if(a.htmlConf&&a.htmlConf.transform.title)switch(a.htmlConf.transform.title){case "uppercase":q=
q.toUpperCase();break;case "lowsercase":q=q.toLowerCase()}q=a.useTitleTranId?a.formatTranId.pre+q+a.formatTranId.sur:"";if(a.dataObj&&a.dataObj.keyTitle&&""!=a.dataObj.keyTitle){var u=a.dataObj.keyTitle,C=u.lastIndexOf(" &gt; ");-1==C?(C=u.lastIndexOf(" > "),C=-1!=C?C+3:0):C=-1!=C?C+6:0;g=-1!=C?u.substr(0,C)+g:g;t=g=-1!=C?"<span class='breadcrumb'>"+u.substr(0,C)+"</span>"+u.substr(C,u.length):g;g=t=t+q+(a.useViewAuth&&a.dataObj.auth?a.formatTranId.pre+a.dataObj.auth+a.formatTranId.sur:a.useViewAuth?
"[]":"");u=-1!=C?u.substr(C,u.length):g;e(u);f.children[0].innerHTML=t}else g=g+q+(a.useViewAuth&&a.dataObj.auth?a.formatTranId.pre+a.dataObj.auth+a.formatTranId.sur:a.useViewAuth?"[]":""),f.children[0].innerHTML=g,e(g);c||(a.title=u);a.useAutoShowTitle&&a.taskbarBottom&&(f.style.display="block")}f=null;a.showLoading&&x.remove();c=m.get(0).contentWindow.document;c.id=G;c.body.onmousedown=function(b){b=m.get(0).contentWindow.document;b=r.getWindow(b.id);if(!b.isMaximized()&&!b.isMinimized()&&(B(d,
w,a,"mousedown"),h.isFunction(a.onSelect)))a.onSelect()};document.oncontextmenu=function(){};l(c).keydown(function(a){if(a.target)return windowKeyDown(a)});l(c).keyup(function(a){if(a.target)return windowKeyUp(a)});if(h.isFunction(a.onIframeEnd))a.onIframeEnd(w,a.url);if(h.isFunction(a.onShow))a.onShow(w);c=null;J&&m.get(0).contentWindow.jQuery.holdReady(!1);l.behavior.IApplyBlockUI&&l.behavior.IApplyBlockUI(k,!0,{callWidget:"window",type:"content",target:m.get(0).contentWindow})})}else k.append("<div class='window-frame' style='width:100%;'></div>"),
m=k.children(".window-frame"),null!=a.content&&(t(a.content),m.children().show()),m.css({overflow:a.scrollable?"auto":"hidden"});c=null},adjustFrameWH:D,getTargetCssStyle:function(){return z},getWindowId:function(){return G},getCaller:function(){return d},getContainer:function(){return k},getHeader:function(){return p},setHeaderMsgIcon:function(a){h("> div:first",p).removeClass("error warning alert").addClass(a)},getHeaderFuncPanel:function(){return ia},getFrame:function(){return m},getFooter:function(){return y},
alignCenter:ea,alignHorizontalCenter:fa,alignVerticalCenter:ga,select:function(){W=!0;0==A?(k.addClass("state-current").addClass("state-normal"),a.showFooter||p.next().addClass("no-footer")):k.removeClass("state-normal").addClass("state-current");if(h.isFunction(a.onSelect))a.onSelect(r)},unselect:function(){W=!1;0==A?(k.removeClass("state-current"),a.showFooter||p.next().addClass("no-footer")):k.removeClass("state-normal").removeClass("state-current");if(h.isFunction(a.onUnselect))a.onUnselect()},
resize:function(a,b){if(!A&&!K){var c={};0<a&&(c.width=a);0<b&&(c.height=b);k.css(c)}a},windowSort:function(c){if("allmax"==c||0!=b.windowStorage.length){var f=0,e=0,k=0,g=0,m=null,t=null;switch(c){case "allcascade":e=f=0;k=a.width?a.width:500;g=a.minHeight?a.minHeight:300;c=!1;m=T;t=L;for(n=0;n<b.windowStorage.length;n++){var v=b.windowStorage[n].getContainer();b.windowStorage[n].isMinimized()&&v.show();h.isFunction(r.options.dockMenuCall)&&r.options.dockMenuCall("casecade",null,b.windowStorage[n]);
v.unbind("mouseover");v.unbind("mouseout");m=E;t=F;m={left:e,top:f};t={w:k,h:g};f+=25;e+=20;z={left:m.left,top:m.top,width:t.w,height:t.h};"msie"==!l.agent.browser&&(z.opacity=1);if(a.draggable){var p=b.windowStorage[n],p={handle:p.getHeader(),start:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].showOverlay()},containment:a.renderTo,stop:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].hideOverlay();var a=g_window.getWindow(this.attr("id"));B(d,a,a.options,"mousedown")}};
"msie"==!l.agent.browser&&(p.opacity=.5);l(v).draggable(p);p=null}a.resizable&&(p=b.windowStorage[n],p={minWidth:a.minWidth,minHeight:a.minHeight,maxHeight:d.height()-2,maxWidth:d.width(),target:p,onResize:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].showOverlay();D(this.target)},onStop:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].hideOverlay();D(this.target)}},"msie"==!l.agent.browser&&(p.opacity=.5),l(v).resizable(p),p=null);b.windowStorage[n].isMaximized()?
null==d&&Q():U();b.windowStorage[n].setMaximized(c);v.animate(z,b.setting.animationSpeed,"swing",function(){var b=r.getWindow(h(this).attr("id"));b.getContainer().show();b.getFrame().show();a.showFooter&&b.getFooter().show();"msie"==!l.agent.browser&&b.getContainer().css("opacity",1);b.getHeader().show();b.getContainer().addClass("state-current").addClass("state-normal");b.options.showFooter||b.getHeader().next().addClass("no-footer");b.getContainer().width();var c=b.getContainer().height(),c=x(c,
b);b.getFrame().css("width","100%");b.getFrame().height(c);b.getFrame().prevObject.height(c);b.isSelected()?b.select():b.unselect();h.isFunction(a.afterCascade)&&a.afterCascade(w)})}break;case "alltile":var y=p=m=0,u=k=0,A=0;c=!1;for(var m=T,t=L,m=b.windowStorage.length,n=1;;n++)if(p=m/n,y=m%n,p<=n){k=n;break}u=parseInt(p);A=k;e=f=0;v=b.windowStorage[m-1].getContainer();v.addClass("state-current").addClass("state-normal");b.windowStorage[m-1].options.showFooter||b.windowStorage[m-1].getHeader().next().addClass("no-footer");
var M=d.height();d.prev().outerHeight();d.prev().height();if(d.height()==d.parent().height()||d.height()==d.parent().height()-1||d.height()==d.parent().height()-2)M-=d.prev().outerHeight();k=d.width()/k;g=M/u;for(n=m-1;0<=n;n--)v=b.windowStorage[n].getContainer(),v.unbind("mouseover"),v.unbind("mouseout"),b.windowStorage[n].setMaximized(c),h.isFunction(r.options.dockMenuCall)&&r.options.dockMenuCall("casecade",null,b.windowStorage[n]),0==u&&(e+=k,f=0,A--,0!=y&&y>=A?(g=M/(parseInt(p)+1),u=parseInt(p)+
1):u=parseInt(p)),m=E,t=F,m={left:e,top:f},t={w:k,h:g},z={left:m.left,top:m.top,width:t.w,height:t.h},"msie"==!l.agent.browser&&(z.opacity=1),v.animate(z,b.setting.animationSpeed,"swing",function(){var c=r.getWindow(h(this).attr("id"));c.getContainer().show();c.getFrame().show();a.showFooter&&c.getFooter().show();"msie"==!l.agent.browser&&c.getContainer().css("opacity",1);c.getHeader().show();c.getContainer().addClass("state-current").addClass("state-normal");c.options.showFooter?c.getFooter():c.getHeader().next().addClass("no-footer");
if(c.isMaximized())null==d&&Q();else{U();var f=b.windowStorage[n];if(a.draggable){var e={handle:f.getHeader(),start:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].showOverlay()},containment:a.renderTo,stop:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].hideOverlay();var a=g_window.getWindow(this.attr("id"));B(d,a,a.options,"mousedown")}};"msie"==!l.agent.browser&&(e.opacity=.5);l(v).draggable(e);e=null}var k=f.getContainer().width();a.resizable&&(e={minWidth:a.minWidth,
minHeight:a.minHeight,maxHeight:d.height()-2,maxWidth:d.width(),target:f,onResize:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].showOverlay();D(this.target)},onStop:function(){for(n=0;n<b.windowStorage.length;n++)b.windowStorage[n].hideOverlay();D(this.target)}},"msie"==!l.agent.browser&&(e.opacity=.5),l(v).resizable(e),e=null);c.getContainer().width(k)}c.getContainer().width();f=c.getContainer().height();f=x(f,c);c.getFrame().css("width","100%");c.getFrame().height(f);c.getFrame().prevObject.height(f);
c.isSelected()?c.select():c.unselect();h.isFunction(a.afterCascade)&&a.afterCascade(w)}),f+=g,u--;v=null;break;case "allmax":r.maximizeAll()}c=null}},maximize:X,minimize:function(){K=!0;k.hide()},allways:function(a){var c=g_window.getWindow(a),d=c.isAllways();c.setAllways(!d);for(d=b.windowStorage.length-1;0<=d;d--){var e=b.windowStorage[d];e.getWindowId()==a&&c.isAllways()?e.getContainer().css("z-index",e.options.z+100):e.getContainer().css("z-index",e.options.z+d)}},restore:ha,close:function(c){if(this.isLocked()||
this.isExitDivWrap()&&this.options.onbeforeunload&&this.getFrame().get(0).contentWindow.naw&&this.getFrame().get(0).contentWindow.naw.adapter.outbound.close&&!this.getFrame().get(0).contentWindow.naw.adapter.outbound.close())return!1;if(!c&&h.isFunction(a.onClose))a.onClose(w);A&&U();var f=w.getWindowId().lastIndexOf("_")+1,f=w.getWindowId().substring(f);b.m_scWinArray[f-1]=0;P(w,"_destroy");h("#icon_"+w.getWindowId()).remove();var f=m.parent(),e=m.get(0).contentWindow;try{for(var g=e.jQuery("iframe.window-frame"),
l=0;l<g.length;l++)g.eq(l).get(0).contentWindow.naw._closeWindow()}catch(Y){}g=!J;f.unbind();m.unbind();k.unbind();g||(h(e).unbind(),h(e.document).unbind(),e.jQuery&&e.jQuery("*").unbind());m.empty();m.get(0).setAttribute("src","");m.get(0).style.display="none";m.remove();f.remove();k.remove();y=m=p=k=J=ca=I=ba=ia=z=F=E=L=T=W=A=K=V=G=w=null;0<b.windowStorage.length?(g=b.windowStorage[b.windowStorage.length-1],2==arguments.length?B(d,g,g.options,"mousedown","all"):B(d,g,g.options,"mousedown")):b.lastSelectedWindow=
null;if(!c&&h.isFunction(a.onCloseAfter))a.onCloseAfter(w);for(var t in this)this[t]=null;c=null;return!0},setTitle:e,setUrl:function(b){a.url=b;m.attr("src",b)},setContent:t,setFooterContent:da,getTitle:function(b){var c=p.find(".title-text").text();a.useKeyTitle&&!b&&(c=a.title);return c},getUrl:function(){return a.url},getContent:function(){return m.html()},getFooterContent:function(){return y.children(".message-pnl").children("span.message-text").html()},showOverlay:function(){var b=k.children("div#window-overlay");
b.get(0)||(k.append("<div id='window-overlay' style='width:100%;height:100%;position:absolute;left:0px;top:0px'></div>"),b=k.children("div#window-overlay"),b.css("z-index",a.z+1));if(k.attr("id")==r.getSelectedWindow().getContainer().attr("id")){var d="none"==this.getHeader().css("display")?0:this.getHeader().outerHeight();b.css("top",d+"px")}b.show()},hideOverlay:function(){k.find("div#window-overlay").css("top","0px");k.find("div#window-overlay").hide()},showTitle:function(b){if(!J&&this.getFrame().get(0).contentWindow.document){var c=
this.getFrame().get(0).contentWindow.document.getElementById("header");c||(c=this.getFrame().get(0).contentWindow.document.getElementsByTagName("header"),c=0<c.length?c[0]:null);c&&c.children[0]&&(c=c.children[0],"title"==c.className&&c.children[0]&&a.useAutoShowTitle&&(c.style.display=b?"block":"none"));b}},setPos:function(a){return T=a},setOrgPos:function(a){return E=a},getPS:function(){return T},getOrgPS:function(){return E},setWH:function(a){return L=a},setOrgWH:function(a){return F=a},getWH:function(){return L},
getOrgWH:function(){return F},isMaximized:function(){return A},isMinimized:function(){return K},isAllways:function(){return aa},isSelected:function(){return W},isLocked:function(){return I},isExitMemo:function(){return ca},isExitDivWrap:function(){return J},isBooked:function(){return ba},setMaximized:function(a){return A=a},setMinimized:function(a){return K=a},setAllways:function(a){(aa=a)?this.getHeader().find(".icon-allways").addClass("icon-allways-click"):this.getHeader().find(".icon-allways").removeClass("icon-allways-click");
return aa},setLocked:function(a){(I=a)?this.getHeader().find(".icon-lock").addClass("icon-lock-click"):this.getHeader().find(".icon-lock").removeClass("icon-lock-click");return I},setMemo:function(a){(ca=a)?this.getHeader().find(".icon-memo").addClass("icon-memo-click"):this.getHeader().find(".icon-memo").removeClass("icon-memo-click");return I},setBooked:function(a){return ba=a},getOptions:function(){return a}}}this.getInstance=function(d,a){var e=ja(d,a);if(null==e)return null;this.windowResize=
function(){var a=d.height()-2*parseInt(d.find(".window-pnl").css("borderTopWidth"),10),e=d.width()-2*parseInt(d.find(".window-pnl").css("borderLeftWidth"),10);R();for(var g=0,h=b.windowStorage.length;g<h;g++){var l=b.windowStorage[g];l.isMaximized()||l.isMinimized()?(fwk.config.useMdiFix&&(e>fwk.config.useMdiFixWidth&&(e=fwk.config.useMdiFixWidth),a>fwk.config.useMdiFixHeight&&(a=fwk.config.useMdiFixHeight)),l.getContainer().width(e),l.getContainer().height(a),l.getFrame().css("width","100%"),l.getFrame().height(a-
l.getContainer().find(".window-message").height()),l.getFrame().prevObject.height(l.getFrame().height())):d.width()<parseInt(l.getContainer().get(0).style.left,10)+l.getContainer().width()&&(l.getContainer().get(0).style.left=d.width()-l.getContainer().width()+"px")}};e.initialize(e);B(d,e,"constructor");N(e,e.getOptions(),"_create");h.isFunction(r.options.dockMenuCallInit)&&r.options.dockMenuCallInit("init",e);b.initialized||(b.initialized=!0);e=null;d;a=null};this.selectWindow=B;this.getWindow=
function(d){for(var a=0,e=b.windowStorage.length;a<e;a++){var g=b.windowStorage[a];if(g.getWindowId()==d)return g}};this.getInstance(e,this.options);e};this._getOptions=function(b){var e={title:"",dataObj:"",msgObj:"",resultMsgDialog:null,url:"",content:"",footerContent:"",containerClass:"",headerClass:"",frameClass:"",footerClass:"",selectedHeaderClass:"",x:-1,y:-1,z:2E3,width:500,height:300,minWidth:300,minHeight:200,maxWidth:800,maxHeight:600,showFooter:!0,showRoundCorner:!0,closable:!0,minimizable:!1,
maximizable:!0,externalLink:!1,bookmarkable:!1,useKeyTitle:!0,lockable:!0,memoable:!0,exitMemo:!1,onDuplication:!1,onbeforeunload:!0,onActivate:!0,recyclable:!1,draggable:!0,resizable:!0,scrollable:!0,objBoundary:null,relativeBoundary:!1,custBtns:null,showLoading:!1,onOpen:null,onShow:null,onMessage:null,onClose:null,onCloseAfter:null,onSelect:null,onSelectAfter:null,onUnselect:null,onDrag:null,afterDrag:null,onResize:null,afterResize:null,onMinimize:null,afterMinimize:null,onMaximize:null,afterMaximize:null,
onCascade:null,afterCascade:null,onIframeStart:null,onIframeEnd:null,iframeRedirectCheckMsg:null,createRandomOffset:{x:0,y:0}};return e=h.extend({},e,b)};this.closeAll=function(e){for(var g=!0,h=b.windowStorage.length-1;0<=h;h--){var l=b.windowStorage[h].close(e,"all");l||(g=l)}g&&(b.windowStorage=[])};this.hideAll=function(){for(var e=0,g=b.windowStorage.length;e<g;e++)b.windowStorage[e].getContainer().hide()};this.showAll=function(){for(var e=0,g=b.windowStorage.length;e<g;e++)b.windowStorage[e].getContainer().show()};
this.windowSort=function(e){for(var g=b.windowStorage.length;0<g;){b.windowStorage[0].windowSort(e);if("allcascade"==e||"alltile"==e||"allmax"==e)break;break}};this.minimizeAll=function(){for(var e=0,g=b.windowStorage.length;e<g;e++){var h=b.windowStorage[e];h.isMinimized()||h.minimize()}};this.maximizeAll=function(){for(var e=0,g=b.windowStorage.length;e<g;e++){var l=b.windowStorage[e];l.isMinimized();l.maximize(!0,!0);h.isFunction(r.options.dockMenuCall)&&r.options.dockMenuCall("max",null,l)}};
this.getAll=function(){return b.windowStorage};this.getAllOrder=function(){return b.windowOrder};this.getSelectedWindow=function(){for(var e=null,g=0,h=b.windowStorage.length;g<h;g++){var l=b.windowStorage[g];if(l.isSelected()){var r=null!=e?parseInt(e.getContainer().css("z-index"),10):0,P=parseInt(l.getContainer().css("z-index"),10);r<=P&&(e=l)}}return e};this.reloadFrame=function(b){this.getWindow(b).isExitDivWrap()&&(this.getWindow(b).setFooterContent(""),this.getWindow(b).getFrame().get(0).contentWindow.location.reload(!0))}}})(naw,
jQuery);
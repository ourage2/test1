(function(q,m){var y=naw.agent.mobile,H=y?"touchstart.drag":"mousedown.drag",D=y?"touchmove.drag":"mousemove.drag",E=y?"touchend.drag":"mouseup.drag";naw._addFunction(!0,{draggable:function(z,I){return this.foreach(function(){function F(b){var c=y?b.originalEvent.targetTouches[0]:b;b={};if("xy"===a.axis||"x"===a.axis){var h=c.pageX,l=d.offset().left,f=h-n+l,k=!1,e=g?g.get(0):g;if(g){if(u&&(0<h-n&&w<h||0>h-n&&w>h)?k=!0:(u=k=!1,w=-1),!k){var r=e&&!e.tagName?0:g.offset().left,m=e&&e.document?g.width():
g.outerWidth(),t=d.outerWidth();f<r?(u||(w=n<l?l+1:n,u=!0),f=r):f+t>r+m&&(u||(w=n>l+t?l-1:n,u=!0),f-=f+t-(r+m))}}else if(0>h||h>=window.innerWidth)return!1;k||(b.left=f,n=h)}if("xy"===a.axis||"y"===a.axis){c=c.pageY;h=d.offset().top;f=c-p+h;k=!1;if(g)v&&(0<c-p&&x<c||0>c-p&&x>c)?k=!0:(v=k=!1,x=-1),k||(l=e&&!e.tagName?0:g.offset().top,e=e&&e.document?g.height():g.outerHeight(),r=d.outerHeight(),f<l?(v||(x=p<h?h+1:p,v=!0),f=l):f+r>l+e&&(v||(x=p>h+r?h-2:p,v=!0),f-=f+r-(l+e)));else if(0>c||c>=window.innerHeight)return!1;
k||(b.top=f,p=c)}d.offset(b);a.drag&&(e=d.get(0),b=q.northwestPosition(e),f=q.southeastPosition(e),k=q.northwestOffset(e,!0),e=q.southeastOffset(e,!0),a.drag.call(d,b,f,k,e))}function G(b){b={};a.opacity&&(b.opacity=J);var c=0;a.revert&&(c=500,a.isSortable?(b.top="0px",b.left="0px"):(b.top=A.top,b.left=A.left));d.animate(b,c,function(){m(this).css("z-index",t);if(a.isSortable)for(var b=0;b<a.items.length;b++)naw.behavior.IApplyBlockUI&&naw.behavior.IApplyBlockUI(naw(a.items[b]),!1,{callWidget:"draggable",
type:"content"});if(a.stop){var c=d.get(0),b=q.northwestPosition(c),f=q.southeastPosition(c),g=q.northwestOffset(c,!0),c=q.southeastOffset(c,!0);a.stop.call(d,b,f,g,c)}});m(document).unbind(D,F).unbind(E,G);v=u=!1;x=w=-1}var d=m(this);if("string"===typeof z)return d.data("options")[z]=I,this;if(d.data("options"))return this;var a=m.extend({axis:"xy",disable:!1,revert:!1,zIndex:9999},z),n=0,p=0,B,A,J=d.css("opacity"),t=d.css("z-index"),C=a.handle?d.find(a.handle):d,g=m(a.containment),w=-1,x=-1,u=!1,
v=!1;0==g.length&&(g=void 0);d.data("options",a);C.bind(H,function(b){if(a.disable)return!1;if(a.isSortable)for(var c=0;c<a.items.length;c++)naw.behavior.IApplyBlockUI&&naw.behavior.IApplyBlockUI(naw(a.items[c]),!0,{callWidget:"draggable",type:"content"});b.preventDefault();A=d.offset();t=d.css("z-index");a.start&&a.start.call(d);B=y?b.originalEvent.targetTouches[0]:b;n=B.pageX;p=B.pageY;a.opacity&&d.css("opacity",a.opacity);a.zIndex>t?d.css("z-index",a.zIndex):d.css("z-index",parseInt(t,10)+1);m(document).bind(D,
F).bind(E,G);return!1}).data("handle",C);C.css("cursor","pointer")})}})})(naw.ui.coordinates,jQuery);
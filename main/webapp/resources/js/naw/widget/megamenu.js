(function(C,a){ncMegaMenu.megamenu=new function(){var x={classRootDiv:"blue",classParent:"dc-mega",classContainer:"sub-container",classSubParent:"mega-hdr",classSubLink:"mega-hdr",$rootDiv:a("<div id='sub-menu' class='blue' style='position:absolute;top:0;left:0;'></div>"),rowItems:3,useArrow:!1,speed:"fast",effect:"fade",event:"hover",fullWidth:!1,heightGrouping:!1,onLoad:function(){},beforeOpen:function(){},beforeClose:function(){},onClick:function(){}};this.init=function(C,b){this._options=b=a.extend(x,
b);this._create(C,b)};this._create=function(x,b){var h=a(x),p=null,J=h.parent().parent().height();return h.each(function(){function x(e){var l=a(e),n=l.attr("id");void 0!=a("a#"+n).attr("showTitle")&&a("a#"+n).text(a("a#"+n).attr("showTitle"));var g=a("."+k+"[for='"+n+"']");e=a(g);a("> li",l.parent()).each(function(){a(this).removeClass("mega-hover");var b=a(this).attr("id");n!=b&&(jQuery("#"+b+" > a").removeClass("state-current"),a("."+k+"[for='"+b+"']").hide().children(".sub"),p&&p.hide())});jQuery("#"+
n+" > a").addClass("state-current");l.addClass("mega-hover");"fade"==b.effect?e.fadeIn():"slide"==b.effect?e.css("zIndex",2).slideDown(b.speed):e.show();if(0!=g.length){g=l.offset().left;b.fullWidth&&(g=0);l=e.parent();l.css({left:g});var t=a("body").width(),h=l.width()+g,t=t-h;0>t&&(g+=t,g=0>g?0:g,l.css({left:g}),l.get(0).style.left=g);g=l.offset().top;t=a("body").height()-g;h=e.get(0).scrollHeight;t<h&&(l.css({height:t-g/2}),l.get(0).style.height=t-g/2);E(e);b.beforeOpen.call(this);e=g=null}}function E(a,
k){if(p){var e=a.offsetParent().offset(),g=e.top;a.innerWidth();var l=e.left,h=a.outerHeight(!0),e=a.outerWidth();p.css({top:g,left:l,width:e,height:h,zIndex:1}).show();b.$rootDiv.css({width:0,height:0})}}function I(e){var l=a(e).attr("id");void 0!=a("a#"+l).attr("showTitle")&&a("a#"+l).text(a("a#"+l).attr("menuTitle"));l=a("."+k+"[for='"+l+"']");a(".sub",l);b.beforeClose.call(e)}function F(e,l){y(jQuery("."+k));var n=a(l);if(0!=n.length){a(e).addClass("mega-hover");"fade"==b.effect&&n.fadeIn();"slide"==
b.effect?n.css("zIndex",2).slideDown(b.speed):n.show();var g=a(e).offset().left;b.fullWidth&&(g=0);n.css({left:g});var h=a("body").width(),p=n.width()+g,h=h-p;0>h&&(g+=h,g=0>g?0:g,n.css({left:g}),n.get(0).style.left=g);g=n.offset().top;h=a("body").height()-g;p=n.children("ul").get(0).scrollHeight;h<p&&(n.css({height:h-g/2}),n.get(0).style.height=h-g/2);E(n.children("ul"));b.beforeOpen.call(this)}}function v(e,h){var k=a(h);a(e).removeClass("mega-hover");"fade"==b.effect?k.fadeOut():"slide"==b.effect?
k.css("zIndex",1).slideUp(b.speed):k.hide();p&&p.hide();b.useThirdExpand&&("click"==b.useThirdExpandEvent?(jQuery("#"+jQuery("#expand-menu").attr("for")).removeClass("state-current").removeClass("ba-l").removeClass("ba-r"),jQuery("#expand-menu").remove()):jQuery(".expand-menu").removeClass("expand-menu").prev().removeClass("state-current"));b.beforeClose.call(this)}function y(e){e="undefined"==typeof e?b.$rootDiv:e;a("li",h).removeClass("mega-hover");"fade"==b.effect?a(e).fadeOut():"slide"==b.effect?
a(e).css("zIndex",1).slideUp(b.speed):a(e).hide();p&&p.hide();b.useThirdExpand&&"click"==b.useThirdExpandEvent&&(jQuery("#"+jQuery("#expand-menu").attr("for")).removeClass("state-current").removeClass("ba-l").removeClass("ba-r"),jQuery("#expand-menu").remove())}function G(e){var l=z+"-li",n=h.outerWidth(),g=0,t=0;a("> li",h).each(function(c){"undefined"!=typeof e&&0==e&&0==jQuery("div[for='"+this.id+"']").length&&0!=c&&("hover"==b.event?a(this).hover(function(){a(this).unbind("");G(c);x(this)},function(){}):
"click"==b.event&&a(">a",this).click(function(){a(this).unbind("");G(c);a("> li > a",h).removeClass("state-current");jQuery(this).addClass("state-current");var b=a(this).parent(),d=b.attr("id");v(b,a("."+k+""));d=a("."+k+"[for='"+d+"']");F(b,d)}));t=c;a(this).attr("idx",g);g++;var d=a("> ul",this);"undefined"!=typeof e&&0!=e&&(d=a("> div > ul",this),1==b.fullWidth&&(d.width("100%"),a(">ul",d).width("100%")));var f=a("> a",this);if(0!=d.length)if(b.useArrow?f.addClass(z).append("<span class='dc-mega-icon'></span>"):
f.addClass(z),("undefined"==typeof e||"undefined"!=typeof e&&0==e)&&d.addClass("sub").wrap("<div class='"+k+"' />").parent().attr("for",f.attr("id")),d.parent().addClass("menu-"+a("> li > ul",d).length).addClass(b.classRootDiv),0!=a("> li > ul",d).length)if(a(this).addClass(l),a("> ."+k,this).addClass("mega"),f=!1,"undefined"!=typeof e&&t==e&&(f=!0),f&&a("> li",d).each(function(){var c=a(this),d=c.children("ul");d.length?(c.addClass("mega-unit").addClass(A).children("a").addClass(A+"-a"),d.children("li").each(function(){var c=
a(this),d=c.children("ul");d.length?(c.addClass("mega-unit-third"),b.useThirdExpand&&("hover"==b.useThirdExpandEvent?c.hover(function(){jQuery(".expand-menu").removeClass("expand-menu").prev().removeClass("state-current").removeClass("ba-l").removeClass("ba-r");var b=a(">ul",this),c="msie"==C.agent.browser?"":"initial";b.css({overflow:c,height:c,top:c,width:c});b.addClass("expand-menu").prev().addClass("state-current");c=jQuery(this).parent().parent().parent();c.hasClass("sub")||(c=c.parent());var d=
c.offset().top,e=jQuery(this),f=e.children("a").outerWidth();0>c.width()-(f+e.offset().left+b.width())&&(f=-e.children("ul").outerWidth(),b.css({left:f}),f=-e.children("ul").outerWidth(),b.css({left:f}));0<f?b.prev().addClass("ba-r"):b.prev().addClass("ba-l");d=e.offset().top-d;0>c.outerHeight()-(b.outerHeight()+10)?(d=-(d-5),b.css({overflow:"auto",height:c.outerHeight()-20,top:d})):d=c.outerHeight()<d+b.outerHeight()+10?c.outerHeight()-(d+b.outerHeight()+5):0;b.css({left:f,top:d})},function(){jQuery(".expand-menu").removeClass("expand-menu").prev().removeClass("state-current").removeClass("ba-l").removeClass("ba-r");
var b=a(">ul",this),c="msie"==C.agent.browser?"":"initial";b.css({overflow:c,height:c,top:c,width:c})}):"click"==b.useThirdExpandEvent&&c.click(function(){jQuery("#"+jQuery("#expand-menu").attr("for")).removeClass("state-current").removeClass("ba-l").removeClass("ba-r");jQuery("#expand-menu").remove();var c=a(this),d=a(">ul",c);d.clone(!0).appendTo(jQuery("<div id='expand-menu' for='"+d.prev().attr("id")+"' class='sub mega-unit "+b.classRootDiv+"'></div>").appendTo("body"));var e=jQuery("#expand-menu > ul"),
f="msie"==C.agent.browser?"":"initial";e.css({overflow:f,height:f,top:f});e.addClass("expand-menu");f="msie"==C.agent.browser?"":"initial";e.css({overflow:f,height:f,top:f,width:f});e.addClass("expand-menu");d.prev().addClass("state-current");f=c.parent().parent().parent();f.hasClass("sub")||(f=f.parent());var h=c.offset().top,g=e.outerWidth();left=c.offset().left;var k=(c.width()-c.children("a").width())/2;f.offset().left+f.width()>left+c.width()+g?(d.prev().addClass("ba-r"),left=left+c.width()-
k):(d.prev().addClass("ba-l"),left=left-g-k);e.css({left:left,top:h})})),b.useThirdExpand?(c.children("a").addClass(A+"-a"),c=d.children("li").children("a")):(c.children("a").addClass(A+"-a").css("margin-left","10%").css("width","80%"),c=d.children("li").children("a"),c.css("margin-left","10%").css("width","80%")),a(c).click(function(c){if("function"==typeof b.onClick){var d={},f=a(this),e=f.get(0).attributes;a.each(e,function(a,b){var c=b.nodeValue;"id"==b.nodeName?d.menuId=c:"title"==b.nodeName?
d.menuTitle=c:"keytitle"==b.nodeName&&(d.keyTitle=c);d[b.nodeName]=c});d.getValue=function(a){return this[a]};d.getExtra=function(){return this[this.strExtra]?this[this.strExtra]:null};d.getExtraValue=function(a){return this[d.strExtra]?this[d.strExtra][a]:null};b.onClick(d,f,c);v("",a("."+k+""))}})):c.children("a").click(function(c){if("function"==typeof b.onClick){var d={},f=a(this),e=f.get(0).attributes;a.each(e,function(a,b){var c=b.nodeValue;"id"==b.nodeName?d.menuId=c:"title"==b.nodeName?d.menuTitle=
c:"keytitle"==b.nodeName&&(d.keyTitle=c);d[b.nodeName]=c});d.getValue=function(a){return this[a]};d.getExtra=function(){return this[this.strExtra]?this[this.strExtra]:null};d.getExtraValue=function(a){return this[d.strExtra]?this[d.strExtra][a]:null};b.onClick(d,f,c);v("",a("."+k+""))}})})):a(this).addClass("mega-unit-li").children("a").click(function(c){if("function"==typeof b.onClick){var d={},f=a(this),e=f.get(0).attributes;a.each(e,function(a,b){var c=b.nodeValue;"id"==b.nodeName?d.menuId=c:"title"==
b.nodeName?d.menuTitle=c:"keytitle"==b.nodeName&&(d.keyTitle=c);d[b.nodeName]=c});d.getValue=function(a){return this[a]};d.getExtra=function(){return this[this.strExtra]?this[this.strExtra]:null};d.getExtraValue=function(a){return this[d.strExtra]?this[d.strExtra][a]:null};b.onClick(d,f,c);v("",a("."+k+""))}})}),a(".mega-unit",d).get(0)){d.parent().show();p&&E(d);a(".mega-unit-li",this).wrapAll("<div class='mega-unit' style='overflow:auto;' />").css("float","left");f=a(".mega-unit",this);rowSize=
parseInt(b.rowItems);if(1==b.fullWidth)if(b.heightGrouping&&"undefined"!=typeof e&&t==e){for(var u=0,r=0,q=0,m=0;m<f.length;m++)r=a(f[m]).height(),0!=m&&u<r&&(u=r);for(var w=q=r=0,D=!1,m=0;m<f.length;m++)r=a(f[m]).height(),q+=r,0!=m&&u>q?D||(D=!0,m==f.length-1&&f.slice(w,m+1).wrapAll("<div class='wrapAll' />")):(q=r,D&&m!=w?(f.slice(w,m).wrapAll("<div class='wrapAll' />"),D=!1,w=m):(w=m,D=!1));a("."+k+">ul",this).children().css("min-height",u)}else f.slice(m,m+rowSize).wrapAll("<div class='row' />");
else for(m=0;m<f.length;m+=rowSize)f.slice(m,m+rowSize).wrapAll("<div class='row' />");if(1!=b.fullWidth){pl=a(this).offset().left;var m=a(this).width(),f=n-(pl+m),u=d.outerWidth(),u=d.parent("."+k).outerWidth()-u,r=a(".mega-unit",d).outerWidth(!0),q=a(".mega-unit",d).offset().left,w=a(".row:eq(0) .mega-unit",d).length,y=r*w+q*(w-1),u=y+u;a(".row",this).each(function(){a(".mega-unit:last",this).addClass("last");var b=void 0;a(".mega-unit > a",this).each(function(){var c=parseInt(a(this).height());
if(void 0===b||b<c)b=c});a(this).css("width",y)});var B,r={left:pl};0>pl-(f<B?B+B-f:(u-m)/2)&&(r.left=0)}else r={left:0};a("."+k,this).css(r);d.parent().hide();p&&p.hide()}else d.parent().hide();else d=a("> ."+k,this),d.hide(),d.addClass("non-mega"),d=a("> ul",d),B=a("body").height()-J,B<d.height()&&(d.parent().height(B),d.parent().get(0).style.height=B),a("> li > a",d).click(function(c){if("function"==typeof b.onClick){var d={},f=a(this),e=f.get(0).attributes;a.each(e,function(a,b){var c=b.nodeValue;
"id"==b.nodeName?d.menuId=c:"title"==b.nodeName?d.menuTitle=c:"keytitle"==b.nodeName&&(d.keyTitle=c);d[b.nodeName]=c});d.getValue=function(a){return this[a]};d.getExtra=function(){return this[this.strExtra]?this[this.strExtra]:null};d.getExtraValue=function(a){return this[d.strExtra]?this[d.strExtra][a]:null};b.onClick(d,f,c);v("",a("."+k+""))}})});if("undefined"!=typeof e){var q=a(">li",h).eq(e).find("."+k),K=q.attr("for");q.show();var H=a("> li > a",h).eq(e).outerHeight(!0);q.css({top:H}).css("z-index",
"1000");1==b.fullWidth&&q.width("100%");q.each(function(){var c=a(this);c.offset();var d=b.northHeight?b.northHeight:c.offset().top;c.css("top",d)});a("."+k+"[for='"+K+"']").each(function(){var c=a(this);b.useCloseButton&&0==c.find("button.megamenu-close").length&&c.append("<button type='button' class='megamenu-close'></button>");c.offset();var d=b.northHeight?b.northHeight:c.offset().top,f=a("body").height()-d,e=c.children("ul").height();f<e&&c.css({height:f-d/2});c.hide()});b.showIFrame&&"msie"==
naw.agent.browser&&(p=a("<iframe id='menuLayer' style='display: block;position: relative;' frameborder='0'></iframe>").appendTo(b.$rootDiv).hide());"hover"==b.event?(jQuery("."+k+"").hover(function(){},function(){a(this).hide()}),a(">li",h).eq(e).unbind(""),a(">li",h).eq(e).hover(function(){x(this);if(b.extHoverHideen){var c=a(b.extHoverHideen);0!=c.length&&c.hide()}},function(){I(this)})):"click"==b.event&&(0==e&&a("body").mouseup(function(c){b.bodyClick?b.bodyClick(c):a(c.target).hasClass("sub")||
a(c.target).hasClass("mega-hover")||a(c.target).hasClass(z)||a(c.target).hasClass(A+"-a")||a(c.target).hasClass("expand-menu")||a(c.target).parents(".expand-menu").length||y(jQuery("."+k))}),a("> li",h).eq(e).children("a").click(function(b){a("> li > a",h).removeClass("state-current");jQuery(this).addClass("state-current");var c=a(this).parent(),f=a(c).attr("id"),e=a("."+k+"[for='"+f+"']");"none"!=a(e).css("display")?(void 0!=a("a#"+f).attr("showTitle")&&a("a#"+f).text(a("a#"+f).attr("menuTitle")),
v(c,e)):(v(c,a("."+k+"")),void 0!=a("a#"+f).attr("showTitle")&&a("a#"+f).text(a("a#"+f).attr("showTitle")),F(c,e));b.preventDefault()}));q.hide()}else H=a("> li > a",h).outerHeight(!0),a("."+k,h).css({top:H}).css("z-index","1000"),1==b.fullWidth&&a("."+k,h).width("100%"),a("."+k,h).each(function(){var c=a(this);b.useCloseButton&&0==c.find("button.megamenu-close").length&&c.append("<button type='button' class='megamenu-close'></button>");c.offset();var d=b.northHeight?b.northHeight:c.offset().top;
c.css("top",d);var f=a("body").height()-d,e=c.height();f<e&&c.css({height:f-d/2})}),b.showIFrame&&"msie"==naw.agent.browser&&(p=a("<iframe id='menuLayer' style='display: block;position: relative;' frameborder='0'></iframe>").appendTo(b.$rootDiv).hide()),"hover"==b.event?(jQuery("."+k+"").hover(function(){},function(){a(this).hide()}),a("li",h).hover(function(){jQuery("> a",this).addClass("state-current");x(this);if(b.extHoverHideen){var c=a(b.extHoverHideen);0!=c.length&&c.hide()}},function(){jQuery("> a",
this).removeClass("state-current");I(this)}),a(b.extHover).hover(function(){a("> li",h).removeClass("mega-hover");a("."+k+"").hide();p&&p.hide()},function(){}),a("body").mouseup(function(c){b.bodyClick?b.bodyClick(c):a(c.target).hasClass("sub")||a(c.target).hasClass("mega-hover")||a(c.target).hasClass(z)||a(c.target).hasClass(A+"-a")||a(c.target).parents(".mega-hover").length||a(c.target).hasClass("expand-menu")||a(c.target).parents(".expand-menu").length||y(jQuery("."+k))})):"click"==b.event&&(a("body").mouseup(function(c){b.bodyClick?
b.bodyClick(c):a(c.target).hasClass("sub")||a(c.target).hasClass("mega-hover")||a(c.target).hasClass(z)||a(c.target).hasClass(A+"-a")||a(c.target).parents(".mega-hover").length||a(c.target).hasClass("expand-menu")||a(c.target).parents(".expand-menu").length||y(jQuery("."+k))}),a("> li > a."+z,h).click(function(c){if(b.extHoverHideen){var d=a(b.extHoverHideen);0!=d.length&&d.hide()}var d=a(this).parent(),e=a(d).attr("id"),g=a("."+k+"[for='"+e+"']");a(".sub",g);d.hasClass("mega-hover")?(void 0!=a("a#"+
e).attr("showTitle")&&a("a#"+e).text(a("a#"+e).attr("menuTitle")),v(d,g)):(void 0!=a("a#"+e).attr("showTitle")&&a("a#"+e).text(a("a#"+e).attr("showTitle")),F(d,g));c.preventDefault()})),b.onLoad.call(this)}var A=b.classSubParent,z=b.classParent,k=b.classContainer;G(0)})}}})(naw,jQuery);
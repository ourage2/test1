(function($){$.namespace("widget.datagrid");if(!MSG_DataGrid)var MSG_DataGrid={};MSG_DataGrid.namespace="naw.UI.DataGrid.";MSG_DataGrid.create=$.getMessage("W0402");MSG_DataGrid.initialize=$.getMessage("W0403");function getId(argId){return document.getElementById(argId)}function _setDumpDataCell_(ag,rowIndex,colName,setData){var DumpData=ag.DumpData[rowIndex];if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj=DumpData.dt;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=
tmpObj[leafNameList[k]];else{tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}tmpObj[leafNameList[k]]=setData}else DumpData.dt[colName]=setData}$.widget.datagrid=$.widget.Base.extend({init:function(){this.setName("datagrid");this._super();this.rowList=[];this.ajaxGridOptions={};this.cols=[];this.g_ID="";this.DumpData=[];this.DumpDataLen=0;this.autoCalc=new Object;this.deleteData=[];this.scroll=false;this.TotalWidth=0;this.TotalEmWidth=0;this.maxBodyRowSpan=0;this.maxTitleRowSpan=
0;this.maxBottomRowSpan=0;this.maxBodyRowIdx=1;this.maxTitleRowIdx=1;this.maxBottomRowIdx=1;this.rowColCnt=0;this.titleRowColCnt=0;this.bottomRowColCnt=0;this.colBody=[];this.colBodyLen=0;this.colTitle=[];this.colTitleLen=0;this.colTotal=[];this.colTotalLen=0;this.filterTmpCellData=[];this.filterTmpCellAttr=[];this.tmpCellData=[];this.sTime;this.eTime;this.innerBodyWidth=0;this.resizing;this.startPos=0;this.endPos=false;this.scrollTopPos=0;this.scrollLeftPos=0;this.clickTREle=null;this.largeData=
[];this.pageInfo=[1,1,0];this.TRArr=new Array;this.TRArrLen=0;this.LTRArrLen=0;this.CTRArrLen=0;this.RTRArrLen=0;this.LTRArr=new Array;this.CTRArr=new Array;this.RTRArr=new Array;this.columnWidth=[];this.copyType="view";this.viewScroll=true;this.chkScroll=true;this.isSubSum=false;this.isGrouping=false;this.selectedCalValue="";this.beforeSelected=null;this.beforeSelectedVal="";this.loadComplete=false;this.checkWidth=30;this.checkTitleText=null;this.checkBottomText=null;this.numberingWidth=30;this.numberingTitleText=
null;this.numberingBottomText=null;this.numberingConnected=false;this.subSumCnt=0;this.bTitleMerge=false;this.bBodyMerge=false;this.bBodyRowMerge=false;this.bGroupMerge=false;this.bBottomMerge=false;this.excelColwidth="";this.excelLayout=null;this.strExcelData=[];this.excelSheetName="";this.excelContainsPI=false;this.isDRM=false;this.excelTitle="";this.importExcelData={};this.importExcelFileName="";this.firstResize=false;this.fixCol=false;this.resizeWidth=null;this.checkReDraw=false;this.columnStruct=
[];this.calBlur=false;this.visible=true;this.comboboxSpan=null;this.comboboxClickFlag=false;this.comboboxFocusFlag=false;this.comboboxScrollFlag=false;this.comboboxIEMouseup=false;this.comboboxChromeFlag=false;this.filter="like";this.clickTR=-1;this.lastClickTR=-1;this.clickTD=null;this.selectionEle=null;this.selection=false;this.selectionTD={};this.colHideArr=[];this.findDataLen=-1;this.findData=[];this.textEle=null;this.cDragdrop={flag:false,downX:-1,upX:-1,downEle:null,mouseLeft:-1,moveLeft:-1,
thLeft:-1};this.dragdrop={flag:false,downY:-1,upY:-1,downEle:null,mouseTop:-1,moveTop:-1,trEop:-1};this.doAction={_gridAddRow:function(){var obj=arguments[0];var objData=arguments[1];var objData1="";if(arguments.length==3){objData1=arguments[2];eval(obj).addRow(objData,objData1)}else eval(obj).addRow(objData)},_gridInsertRow:function(){var obj=arguments[0];var objData=arguments[1];var objData1=arguments[2];var objData2="";if(arguments.length==4){objData2=arguments[3];eval(obj).insertRow(objData,objData1,
objData2)}else eval(obj).insertRow(objData,objData1)},_gridGetRow:function(){var obj=arguments[0];var objData=arguments[1];var objData1="";if(arguments.length==3){objData1=arguments[2];eval(obj).getRow(objData,objData1)}else eval(obj).getRow(objData)}};this.page=1;this.bodyHeight="0px";this.bodyWidth="";this.colFix=null;this.colModel=[];this.colModelLen=0;this.colHeader=[];this.colHeaderLen=0;this.colBottom=[];this.colBottomLen=0;this.selectedValue="";this.selectedIndex={"x":-1,"y":-1,"colName":""};
this.changedValue="";this.viewTitle=true;this.onHeaderMouseMove=false;this.pasteAddRow=false;this.disabledElementEvent=true;this.endScroll=false;this.setPaging=10;this.ref=[];this.multiCheck=false;this.singleCheck=false;this.sCheckToggle=false;this.numbering=false;var gridStruct=null;this.type="";this.selectedRow=-1;this.selectedCol=-1;this.selectedValue="";this.selectedColName="";this.selectedEndRow=-1;this.selectedEndCol=-1;this.selectedEndValue=-1;this.selectedEndColName=-1;this.dynamicGrid=false;
this.checkAuto=false;this.contextMenu=[];this.isAutoFit=false;this.rowDrag=false;this.columnDraw=false;this.selectionType="row";this.appendAutoBind=false;this.userAttr={};this.vPos={start:-1,end:-1};this.rPos={start:-1,end:-1};this.tdHeight=23;this.rowNum=0;this.colBodyColumn={};this.largeView=false;this.DumpAttr=[];this.DataLen=0;this.simpleType={"select":"se","input":"in","link":"li","button":"bu","image":"im","checkbox":"ch","radio":"ra","textarea":"te","editSelect":"ed","file":"fi"};this.SaveTmpData=
[];this.autoBind=true;this.autoHeight=false;this.HWSubClone=false;this.HWSubDataSet=null;this.HWDataSetOption={};this.leftTdPlus=0;this.leftTdWidth=0;this.numberingIdx=0;this.checkIdx=0;this.leftTdReverse=false;this.tooltipEle=null;gridStruct=this._getTemplate(arguments[0]);if($.isNull(gridStruct)){alert($.getMessage("W0401"));return false}if(typeof gridStruct!="object"){this.initTemplate=(new Function("return "+gridStruct))();var jsonGridsStruct=(new Function("return "+gridStruct))();this.makeParam(jsonGridsStruct);
this.create(arguments[1].id)}else{this.initTemplate=this._getTemplate(arguments[0]);this.makeParam(gridStruct);this.create(arguments[1].id)}},makeParam:function(gridStruct){if(!$.isNull(gridStruct.rowNum))this.rowNum=gridStruct.rowNum;if(!$.isNull(gridStruct.rowList))this.rowList=gridStruct.rowList;if(!$.isNull(gridStruct.gridBody))this.colModel=gridStruct.gridBody;if(!$.isNull(gridStruct.ref))this.ref=gridStruct.ref;if(!$.isNull(gridStruct.gridHeader))this.colHeader=gridStruct.gridHeader;if(!$.isNull(gridStruct.viewTitle))this.viewTitle=
gridStruct.viewTitle;if(!$.isNull(gridStruct.mCheck))this.multiCheck=gridStruct.mCheck;if(!$.isNull(gridStruct.sCheck))this.singleCheck=gridStruct.sCheck;if(!$.isNull(gridStruct.sCheckWidth))this.checkWidth=gridStruct.sCheckWidth;if(!$.isNull(gridStruct.mCheckWidth))this.checkWidth=gridStruct.mCheckWidth;if(!$.isNull(gridStruct.sCheckTitleText))this.checkTitleText=gridStruct.sCheckTitleText;if(!$.isNull(gridStruct.mCheckTitleText))this.checkTitleText=gridStruct.mCheckTitleText;if(!$.isNull(gridStruct.sCheckBottomText))this.checkBottomText=
gridStruct.sCheckBottomText;if(!$.isNull(gridStruct.mCheckBottomText))this.checkBottomText=gridStruct.mCheckBottomText;if(!$.isNull(gridStruct.numbering))this.numbering=gridStruct.numbering;if(!$.isNull(gridStruct.numberingWidth))this.numberingWidth=gridStruct.numberingWidth;if(!$.isNull(gridStruct.numberingTitleText))this.numberingTitleText=gridStruct.numberingTitleText;if(!$.isNull(gridStruct.numberingBottomText))this.numberingBottomText=gridStruct.numberingBottomText;if(!$.isNull(gridStruct.numberingConnected))this.numberingConnected=
gridStruct.numberingConnected;if(!$.isNull(gridStruct.gridBottom))this.colBottom=gridStruct.gridBottom;if(!$.isNull(gridStruct.bodyWidth))this.bodyWidth=gridStruct.bodyWidth;if(!$.isNull(gridStruct.appendAutoBind))this.appendAutoBind=gridStruct.appendAutoBind;if(!$.isNull(gridStruct.userAttr))this.userAttr=gridStruct.userAttr;if(!$.isNull(gridStruct.viewScroll)){this.viewScroll=gridStruct.viewScroll;this.chkScroll=gridStruct.viewScroll}if(!$.isNull(gridStruct.largeView))this.largeView=gridStruct.largeView;
if(!$.isNull(gridStruct.autoBind))this.autoBind=gridStruct.autoBind;if(this.multiCheck&&this.singleCheck){alert($.getMessage("W0404"));this.singleCheck=false}if(this.type!="page")this.numberingConnected=false;if(this.singleCheck)if(this.checkTitleText==null)this.checkTitleText="선택"},create:function(argID){this.loadComplete=false;this.g_ID=argID;this.leftTdPlus=0;this.leftTdWidth=0;this.numberingIdx=0;this.checkIdx=0;if(this.numbering){this.leftTdPlus++;this.leftTdWidth+=this.numberingWidth}if(this.singleCheck||
this.multiCheck){this.leftTdPlus++;this.leftTdWidth+=this.checkWidth}this.makeGrid(argID);if(this.leftTdPlus>0)if($.config.siteName=="hwgi"){this.leftTdReverse=true;if(this.leftTdPlus==2){this.checkIdx=0;this.numberingIdx=1}}else if(this.leftTdPlus==2){this.numberingIdx=0;this.checkIdx=1}this.colHeaderLen=this.colHeader.length;this.colTitleLen=this.colTitle.length;this.colBottomLen=this.colBottom.length;this.colTotalLen=this.colTotal.length;this.colBodyLen=this.colBody.length;this.colModelLen=this.colModel.length;
this.gridEvt(this);this.loadComplete=true;if($.config.drmOptions&&$.config.drmOptions.excel)this.isDRM=true},makeGrid:function(argID){if(this.colFix&&this.colFix.numbering){this.numbering=true;if(this.multiCheck)this.colFix.mCheck=true;if(this.singleCheck)this.colFix.sCheck=true}if(this.colFix&&this.colFix.mCheck){this.multiCheck=true;if(this.numbering)this.colFix.numbering=true}if(this.colFix&&this.colFix.sCheck){this.singleCheck=true;if(this.numbering)this.colFix.numbering=true}if(this.colFix&&
this.colFix.left&&this.numbering)this.colFix.numbering=true;if(this.colFix&&this.colFix.left&&this.multiCheck)this.colFix.mCheck=true;if(this.colFix&&this.colFix.left&&this.singleCheck)this.colFix.sCheck=true;var leftTdWidth=0,leftTdPlus=0;if(this.multiCheck||this.singleCheck){leftTdWidth+=this.checkWidth;leftTdPlus+=1}if(this.numbering){leftTdWidth+=this.numberingWidth;leftTdPlus+=1}var colModelLen=this.colModel.length;for(var i=0,j=0;i<colModelLen;i++){if(this.maxBodyRowSpan<this.colModel[i].rowSpan)this.maxBodyRowSpan=
parseInt(this.colModel[i].rowSpan)+parseInt(this.colModel[i].rowIndex)-1;if(this.colModel[i].colName){if(this.colModel[i].type=="editSelect")this.createComboboxSpan();if($.isNull(this.colModel[i].align))this.colModel[i].align="center";if($.isNull(this.colModel[i].type))this.colModel[i].type="input";if($.isNull(this.colModel[i].dataNX)&&this.colModel[i].type!="editSelect")this.colModel[i].dataNX={type:"text"};if(this.colModel[i].dataNX&&typeof this.colModel[i].dataNX["type"]=="undefined")this.colModel[i].dataNX["type"]=
"text";if(this.colModel[i].type=="input")if(!$.isNull(this.colModel[i].dataNX))if(this.colModel[i].dataNX.type=="date"&&this.colModel[i].dataNX.calendar)this.colModel[i].dataNX["grid"]=true;this.colBody[j]=jQuery.extend(true,{},this.colModel[i]);this.colBodyColumn[this.colBody[j].colName]=j;j++}if(this.colModel[i].rowIndex&&this.maxBodyRowIdx<this.colModel[i].rowIndex)this.maxBodyRowIdx=this.colModel[i].rowIndex}},addDumpData:function(){if(!this.appendAutoBind&&this.DumpData.length!=0&&this.type!=
"next"){delete this.DumpData;this.DumpData=[];this.emptyRows();this.DumpDataLen=0;this.DumpAttr=[]}var tmpData=[];if(typeof arguments[0]=="object")tmpData=arguments[0];else tmpData=(new Function("return "+arguments[0]))();if(this.type=="large"){this.largeData=this.largeData.concat(tmpData);this.addDummyData(0)}else{var beforeLen=this.DumpDataLen,colBodyLen=this.colBodyLen;var copyAttr={};for(var i=0;i<colBodyLen;i++){copyAttr[this.colBody[i].colName]={};var attrColname=copyAttr[this.colBody[i].colName];
attrColname["type"]=this.colBody[i].type;attrColname["optCh"]=false;if(this.colBody[i].caption)attrColname["title"]=this.colBody[i].caption;if(this.colBody[i].editable)attrColname["edit"]=true;else attrColname["edit"]=false;if(this.colBody[i]["class"])attrColname["class"]=this.colBody[i]["class"];if(this.colBody[i].align)attrColname["align"]=this.colBody[i].align;else attrColname["align"]="center";if(this.colBody[i].dataNX)attrColname["dataNX"]=this.colBody[i].dataNX;if(this.colBody[i].maxlength)attrColname["maxlength"]=
this.colBody[i].maxlength;if(this.colBody[i].colSpan)attrColname["colSpan"]=this.colBody[i].colSpan;if(this.colBody[i].rowSpan)attrColname["rowSpan"]=this.colBody[i].rowSpan;if(!$.isNull(this.colBody[i].secureMask)&&!this.colBody[i].secureMask)attrColname["secureMask"]=false}var tempDataLen=tmpData.length;for(var i=0;i<tempDataLen;i++){this.DumpData[beforeLen+i]={};this.DumpData[beforeLen+i].dt=tmpData[i];this.DumpAttr[beforeLen+i]=JSON.parse(JSON.stringify(copyAttr));for(var j=0;j<colBodyLen;j++)if(this.colBody[j].colName.indexOf("/")!=
-1){var leafNameList=this.colBody[j].colName.split("/");var tmpObj=this.DumpData[beforeLen+i].dt;for(var k=0;k<leafNameList.length;k++)if(k+1==leafNameList.length){if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)tmpObj[leafNameList[k]]=""}else{if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}}else if(typeof this.DumpData[beforeLen+i].dt[this.colBody[j].colName]=="undefined"||
this.DumpData[beforeLen+i].dt[this.colBody[j].colName]==null)this.DumpData[beforeLen+i].dt[this.colBody[j].colName]="";this.DumpData[beforeLen+i].type="data";this.DumpData[beforeLen+i].flag="S";this.DumpData[beforeLen+i].idx=beforeLen+i}this.DumpDataLen+=tempDataLen;this.DataLen+=tempDataLen;if(this.isSubSum||this.isGrouping)for(var i=0,idx=0,len=this.DumpDataLen;i<len;i++)if(this.DumpData[i].type=="data")this.DumpData[i].idx=idx++}tmpData=[];delete tmpData},toGrid:function(argListDS,argFunc){if(this.isSubSum||
this.isGrouping)return false;if(this.autoBind){this.removeAll();$.logger.warn("["+this.g_ID+"][toGrid] 해당 함수는 grid template에 autoBind:false 속성을 주어야 사용 가능합니다.");alert("["+this.g_ID+"][toGrid] 해당 함수는 grid template에 autoBind:false 속성을 주어야 사용 가능합니다.");return false}var data=null,fn=null;if(arguments.length==1){if(this.ref.length==0){$.logger.warn("["+this.g_ID+"][toGrid] grid template에 ref 정보가 없습니다.");alert("["+this.g_ID+"][toGrid]  grid template에 ref 정보가 없습니다.");return false}data=this.SaveTmpData;fn=
argListDS}else{data=argListDS.__getRawListData__();fn=argFunc}var copyAttr={},rowIndex=this.getRowNum();for(var i=0;i<this.colBodyLen;i++){copyAttr[this.colBody[i].colName]={};var attrColname=copyAttr[this.colBody[i].colName];attrColname["type"]=this.colBody[i].type;attrColname["optCh"]=false;if(this.colBody[i].caption)attrColname["title"]=this.colBody[i].caption;if(this.colBody[i].editable)attrColname["edit"]=true;else attrColname["edit"]=false;if(this.colBody[i]["class"])attrColname["class"]=this.colBody[i]["class"];
if(this.colBody[i].align)attrColname["align"]=this.colBody[i].align;else attrColname["align"]="center";if(this.colBody[i].dataNX)attrColname["dataNX"]=this.colBody[i].dataNX;if(this.colBody[i].maxlength)attrColname["maxlength"]=this.colBody[i].maxlength;if(this.colBody[i].colSpan)attrColname["colSpan"]=this.colBody[i].colSpan;if(this.colBody[i].rowSpan)attrColname["rowSpan"]=this.colBody[i].rowSpan;if(!$.isNull(this.colBody[i].secureMask)&&!this.colBody[i].secureMask)attrColname["secureMask"]=false}var that=
this,i=0,_addEmptyRow=function(rowData){that.DumpData[rowIndex]={flag:"S",type:"data",idx:rowIndex,dt:{}};for(var j=0;j<that.colBodyLen;j++)if(rowData[that.colBody[j].colName])that.DumpData[rowIndex].dt[that.colBody[j].colName]=rowData[that.colBody[j].colName];else that.DumpData[rowIndex].dt[that.colBody[j].colName]="";return that.DumpData[rowIndex].dt},_setDumpData=function(rowData){for(var j=0;j<that.colBodyLen;j++){var colName=that.colBody[j].colName;if(colName.indexOf("/")!=-1){var leafNameList=
colName.split("/"),tmpObj=rowData;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}if(typeof tmpObj[leafNameList[k]]=="undefined")tmpObj[leafNameList[k]]=_undefinedData(colName)}else if(typeof rowData[colName]=="undefined")rowData[colName]=_undefinedData(colName)}that.DumpData[rowIndex].dt=rowData},_undefinedData=function(colName){var setData="";return setData},_get=function(colName){var resData=
data[i][colName];if(typeof resData=="undefined")resData="";return resData};var dataLen=data.length;for(i=0;i<dataLen;i++){this.DumpAttr[rowIndex]=JSON.parse(JSON.stringify(copyAttr));var newData=_addEmptyRow(data[i]);this.DumpDataLen++;this.DataLen++;data[i]["get"]=_get;var res=fn(newData,data[i],rowIndex,i);if(res==true){this.DumpDataLen--;this.DataLen--;this.DumpData.splice(rowIndex,1)[0];this.DumpAttr.splice(rowIndex,1)[0];continue}else if(res==false){this.DumpDataLen--;this.DataLen--;this.DumpData.splice(rowIndex,
1)[0];this.DumpAttr.splice(rowIndex,1)[0];break}_setDumpData(newData);rowIndex++}delete data},toDataSetOption:function(argDataSet){this.HWDataSetOption={};if(argDataSet)this.HWDataSetOption=argDataSet},toDataSet:function(argDataSet,argFunc){var resArr=[],flag=[],flagLen=0,column=[],columnLen=0,noColumn=false,checkFlag=false;checked=false,DumpData=this.DumpData;var fn=null;fn=argFunc;if(typeof this.HWDataSetOption["flag"]=="object"&&this.HWDataSetOption["flag"].length>0){flag=this.HWDataSetOption["flag"];
flagLen=this.HWDataSetOption["flag"].length}if(typeof this.HWDataSetOption["colName"]=="object"){if(this.HWDataSetOption["colName"].length==0)noColumn=true;column=this.HWDataSetOption["colName"];columnLen=this.HWDataSetOption["colName"].length}if(typeof this.HWDataSetOption["checked"]=="boolean"){checkFlag=true;checked=this.HWDataSetOption["checked"]}var gRowData={};var getData=function(rowIndex,colName){var retVal="";if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj=DumpData[rowIndex].dt,
isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)retVal=tmpObj;else retVal=""}else if(!$.isNull(DumpData[rowIndex].dt[colName]))retVal=DumpData[rowIndex].dt[colName];else retVal="";return retVal},_get=function(colName){var resValue=gRowData[colName];if(typeof resValue=="undefined")resValue="";return resValue};for(var i=0;i<this.DumpDataLen;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;
if(flagLen>0){var existFlag=false;for(var j=0;j<flagLen;j++)if(this.DumpData[i].flag==flag[j]){existFlag=true;break}if(!existFlag)continue}if(checkFlag){var existFlag=false;if(checked==true&&this.DumpData[i].ck)existFlag=true;else if(checked==false&&!this.DumpData[i].ck)existFlag=true;if(!existFlag)continue}var obj={};if(noColumn==false&&columnLen==0)for(var j=0;j<this.colBodyLen;j++){var colName=this.colBody[j].colName,retVal=getData(i,colName);if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/");
var tmpObj=obj;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}tmpObj[leafNameList[k]]=retVal}else obj[colName]=retVal}else for(var j=0;j<columnLen;j++){var colName=column[j],retVal=getData(i,colName);if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/");var tmpObj=obj;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{tmpObj[leafNameList[k]]=
new Object;tmpObj=tmpObj[leafNameList[k]]}tmpObj[leafNameList[k]]=retVal}else obj[colName]=retVal}gRowData=JSON.parse(JSON.stringify(this.DumpData[i].dt));gRowData["get"]=_get;var resFlag=fn(obj,gRowData,i);if(resFlag==true)continue;else if(resFlag==false)return;for(var key in obj)if(obj[key]==undefined)obj[key]="";resArr.push(obj)}argDataSet.__setRawListData__(resArr);this.HWDataSetOption={}},gridEvt:function(that){if(this.ref)for(var i=0;i<this.ref.length;i++){var refSplit=this.ref[i].split("@");
this.setRef(this.ref[i]);$.subscribe("binder."+refSplit[0]+"."+refSplit[1],function(data){if(that.autoBind){if(typeof data=="undefined")return false;that.addDumpData(data)}else{that.SaveTmpData=data;if(that.HWSubDataSet&&that.HWSubDataSet.sync)that.HWSubClone=true}})}},addRow:function(argData,argProcessFlag){var rowData="",len=this.DumpDataLen,pFlag="S",colBodyLen=this.colBodyLen;if(this.isGrouping||this.isSubSum)return false;if(arguments.length==2)pFlag=argProcessFlag;if($.isNull(argData)||argData==
"")return false;if(typeof argData.getJson=="function")rowData=argData.getJson();else rowData=JSON.parse(JSON.stringify(argData));if(typeof rowData!="object")rowData=(new Function("return "+rowData))();var copyAttr={};for(var i=0;i<colBodyLen;i++){copyAttr[this.colBody[i].colName]={};var attrColname=copyAttr[this.colBody[i].colName];attrColname["type"]=this.colBody[i].type;attrColname["optCh"]=false;if(this.colBody[i].caption)attrColname["title"]=this.colBody[i].caption;if(this.colBody[i].editable)attrColname["edit"]=
true;else attrColname["edit"]=false;if(this.colBody[i]["class"])attrColname["class"]=this.colBody[i]["class"];if(this.colBody[i].align)attrColname["align"]=this.colBody[i].align;else attrColname["align"]="center";if(this.colBody[i].dataNX)attrColname["dataNX"]=this.colBody[i].dataNX;if(this.colBody[i].maxlength)attrColname["maxlength"]=this.colBody[i].maxlength;if(this.colBody[i].colSpan)attrColname["colSpan"]=this.colBody[i].colSpan;if(this.colBody[i].rowSpan)attrColname["rowSpan"]=this.colBody[i].rowSpan;
if(!$.isNull(this.colBody[i].secureMask)&&!this.colBody[i].secureMask)attrColname["secureMask"]=false}if(typeof rowData[0]=="object"){var rowDataLen=rowData.length;this.DumpDataLen+=rowDataLen;this.DataLen+=rowDataLen;for(var j=0;j<rowDataLen;j++){this.DumpData[len+j]=new Object;this.DumpData[len+j].flag=pFlag;this.DumpData[len+j].type="data";this.DumpAttr[len+j]=JSON.parse(JSON.stringify(copyAttr));this.DumpData[len+j].idx=len+j;if(rowData[j].ck){this.DumpData[len+j].ck=true;delete rowData[j].ck}for(var i=
0;i<colBodyLen;i++)if(this.colBody[i].colName.indexOf("/")!=-1){var leafNameList=this.colBody[i].colName.split("/");var tmpObj=rowData[j];for(var k=0;k<leafNameList.length;k++)if(k+1==leafNameList.length){if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)if(this.colBody[i].type&&this.colBody[i].type=="select"&&this.colBody[i].options&&this.colBody[i].options){rowData[j][leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<
optionLength;l++){if(this.colBody[i].options[l].selected){tmpObj[leafNameList[k]]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.selected)tmpObj[leafNameList[k]]=this.colBody[i].options.value}else if(this.colBody[i].type&&this.colBody[i].type=="checkbox"&&this.colBody[i].options&&this.colBody[i].options){rowData[j][leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){tmpObj[leafNameList[k]]=
this.colBody[i].options[l].checkValue;break}}else if(this.colBody[i].options.checked)tmpObj[leafNameList[k]]=this.colBody[i].options.checkValue}else if(this.colBody[i].type&&this.colBody[i].type=="radio"&&this.colBody[i].options&&this.colBody[i].options){rowData[j][leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){tmpObj[leafNameList[k]]=this.colBody[i].options[l].value;
break}}else if(this.colBody[i].options.checked)tmpObj[leafNameList[k]]=this.colBody[i].options.value}else tmpObj[leafNameList[k]]=""}else{if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}}else if(typeof rowData[j][this.colBody[i].colName]=="undefined"||rowData[j][this.colBody[i].colName]==null)if(this.colBody[i].type&&this.colBody[i].type=="select"&&this.colBody[i].options){rowData[j][this.colBody[i].colName]=
"";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].selected){rowData[j][this.colBody[i].colName]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.selected)rowData[j][this.colBody[i].colName]=this.colBody[i].options.value}else if(this.colBody[i].type&&this.colBody[i].type=="checkbox"&&this.colBody[i].options){rowData[j][this.colBody[i].colName]="";if(jQuery.isArray(this.colBody[i].options))for(var l=
0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){rowData[j][this.colBody[i].colName]=this.colBody[i].options[l].checkValue;break}}else if(this.colBody[i].options.checked)rowData[j][this.colBody[i].colName]=this.colBody[i].options.checkValue}else if(this.colBody[i].type&&this.colBody[i].type=="radio"&&this.colBody[i].options){rowData[j][this.colBody[i].colName]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<
optionLength;l++){if(this.colBody[i].options[l].checked){rowData[j][this.colBody[i].colName]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.checked)rowData[j][this.colBody[i].colName]=this.colBody[i].options.value}else rowData[j][this.colBody[i].colName]="";this.DumpData[len+j].dt=rowData[j]}if(this.HWSubClone){var ref=this.ref[0].split("@")[1],dataset=this.HWSubDataset.getListDataSet(ref);for(var i=0;i<rowDataLen;i++)dataset.add()}}else{this.DumpData[len]=new Object;this.DumpData[len].flag=
pFlag;this.DumpData[len].type="data";this.DumpAttr[len]=JSON.parse(JSON.stringify(copyAttr));this.DumpData[len].idx=len;this.DumpDataLen++;this.DataLen++;if(rowData.ck){this.DumpData[len].ck=true;delete rowData.ck}for(var i=0;i<colBodyLen;i++)if(this.colBody[i].colName.indexOf("/")!=-1){var leafNameList=this.colBody[i].colName.split("/");var tmpObj=rowData;for(var k=0;k<leafNameList.length;k++)if(k+1==leafNameList.length){if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)if(this.colBody[i].type&&
this.colBody[i].type=="select"&&this.colBody[i].options&&this.colBody[i].options){rowData[leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].selected){tmpObj[leafNameList[k]]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.selected)tmpObj[leafNameList[k]]=this.colBody[i].options.value}else if(this.colBody[i].type&&this.colBody[i].type=="checkbox"&&this.colBody[i].options&&
this.colBody[i].options){rowData[leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){tmpObj[leafNameList[k]]=this.colBody[i].options[l].checkValue;break}}else if(this.colBody[i].options.checked)tmpObj[leafNameList[k]]=this.colBody[i].options.checkValue}else if(this.colBody[i].type&&this.colBody[i].type=="radio"&&this.colBody[i].options&&this.colBody[i].options){rowData[leafNameList[k]]=
"";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){tmpObj[leafNameList[k]]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.checked)tmpObj[leafNameList[k]]=this.colBody[i].options.value}else tmpObj[leafNameList[k]]=""}else{if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}}else if(typeof rowData[this.colBody[i].colName]==
"undefined"||rowData[this.colBody[i].colName]==null)if(this.colBody[i].type&&this.colBody[i].type=="select"&&this.colBody[i].options){rowData[this.colBody[i].colName]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].selected){rowData[this.colBody[i].colName]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.selected)rowData[this.colBody[i].colName]=this.colBody[i].options.value}else if(this.colBody[i].type&&
this.colBody[i].type=="checkbox"&&this.colBody[i].options){rowData[this.colBody[i].colName]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){rowData[this.colBody[i].colName]=this.colBody[i].options[l].checkValue;break}}else if(this.colBody[i].options.checked)rowData[this.colBody[i].colName]=this.colBody[i].options.checkValue}else if(this.colBody[i].type&&this.colBody[i].type=="radio"&&this.colBody[i].options){rowData[this.colBody[i].colName]=
"";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLength=this.colBody[i].options.length;l<optionLength;l++){if(this.colBody[i].options[l].checked){rowData[this.colBody[i].colName]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.checked)rowData[this.colBody[i].colName]=this.colBody[i].options.value}else rowData[this.colBody[i].colName]="";this.DumpData[len].dt=rowData;if(this.HWSubClone){var ref=this.ref[0].split("@")[1],dataset=this.HWSubDataset.getListDataSet(ref);
dataset.add()}}},addEmptyRow:function(argIndex,argProcessFlag){if(arguments.length<1)return false;if(this.isGrouping||this.isSubSum)return false;var cnt=argIndex,len=this.DumpDataLen,pFlag="I",colBodyLen=this.colBodyLen;if(arguments.length==2)pFlag=argProcessFlag;if(isNaN(cnt))return false;cnt=parseInt(cnt);if(cnt<1)return false;var copyAttr={};for(var i=0;i<colBodyLen;i++){copyAttr[this.colBody[i].colName]={};var attrColname=copyAttr[this.colBody[i].colName];attrColname["type"]=this.colBody[i].type;
attrColname["optCh"]=false;if(this.colBody[i].caption)attrColname["title"]=this.colBody[i].caption;if(this.colBody[i].editable)attrColname["edit"]=true;else attrColname["edit"]=false;if(this.colBody[i]["class"])attrColname["class"]=this.colBody[i]["class"];if(this.colBody[i].align)attrColname["align"]=this.colBody[i].align;else attrColname["align"]="center";if(this.colBody[i].dataNX)attrColname["dataNX"]=this.colBody[i].dataNX;if(this.colBody[i].maxlength)attrColname["maxlength"]=this.colBody[i].maxlength;
if(this.colBody[i].colSpan)attrColname["colSpan"]=this.colBody[i].colSpan;if(this.colBody[i].rowSpan)attrColname["rowSpan"]=this.colBody[i].rowSpan;if(!$.isNull(this.colBody[i].secureMask)&&!this.colBody[i].secureMask)attrColname["secureMask"]=false}this.DumpDataLen+=cnt;this.DataLen+=cnt;for(var j=0;j<cnt;j++){var tmpData=new Object;for(var i=0;i<colBodyLen;i++)if(this.colBody[i].colName.indexOf("/")!=-1){var leafNameList=this.colBody[i].colName.split("/");var tmpObj=tmpData;for(var k=0;k<leafNameList.length;k++)if(k+
1==leafNameList.length)if(this.colBody[i].type&&this.colBody[i].type=="select"&&this.colBody[i].options){tmpData[leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLen=this.colBody[i].options.length;l<optionLen;l++){if(this.colBody[i].options[l].selected){tmpObj[leafNameList[k]]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.selected)tmpObj[leafNameList[k]]=this.colBody[i].options.value}else if(this.colBody[i].type&&this.colBody[i].type=="checkbox"&&
this.colBody[i].options){tmpData[leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLen=this.colBody[i].options.length;l<optionLen;l++){if(this.colBody[i].options[l].checked){tmpObj[leafNameList[k]]=this.colBody[i].options[l].checkValue;break}}else if(this.colBody[i].options.checked)tmpObj[leafNameList[k]]=this.colBody[i].options.checkValue}else if(this.colBody[i].type&&this.colBody[i].type=="radio"&&this.colBody[i].options){tmpData[leafNameList[k]]="";if(jQuery.isArray(this.colBody[i].options))for(var l=
0,optionLen=this.colBody[i].options.length;l<optionLen;l++){if(this.colBody[i].options[l].checked){tmpObj[leafNameList[k]]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.checked)tmpObj[leafNameList[k]]=this.colBody[i].options.value}else tmpObj[leafNameList[k]]="";else{if(typeof tmpObj[leafNameList[k]]=="undefined"||tmpObj[leafNameList[k]]==null)tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}}else if(this.colBody[i].type&&this.colBody[i].type=="select"&&
this.colBody[i].options){tmpData[this.colBody[i].colName]="";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLen=this.colBody[i].options.length;l<optionLen;l++){if(this.colBody[i].options[l].selected){tmpData[this.colBody[i].colName]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.selected)tmpData[this.colBody[i].colName]=this.colBody[i].options.value}else if(this.colBody[i].type&&this.colBody[i].type=="checkbox"&&this.colBody[i].options){tmpData[this.colBody[i].colName]=
"";if(jQuery.isArray(this.colBody[i].options))for(var l=0,optionLen=this.colBody[i].options.length;l<optionLen;l++){if(this.colBody[i].options[l].checked){tmpData[this.colBody[i].colName]=this.colBody[i].options[l].checkValue;break}}else if(this.colBody[i].options.checked)tmpData[this.colBody[i].colName]=this.colBody[i].options.checkValue}else if(this.colBody[i].type&&this.colBody[i].type=="radio"&&this.colBody[i].options){tmpData[this.colBody[i].colName]="";if(jQuery.isArray(this.colBody[i].options))for(var l=
0,optionLen=this.colBody[i].options.length;l<optionLen;l++){if(this.colBody[i].options[l].checked){tmpData[this.colBody[i].colName]=this.colBody[i].options[l].value;break}}else if(this.colBody[i].options.checked)tmpData[this.colBody[i].colName]=this.colBody[i].options.value}else tmpData[this.colBody[i].colName]="";this.DumpData[len+j]=new Object;this.DumpData[len+j].dt=tmpData;this.DumpAttr[len+j]=JSON.parse(JSON.stringify(copyAttr));this.DumpData[len+j].flag=pFlag;this.DumpData[len+j].type="data";
this.DumpData[len+j].idx=len+j}if(this.HWSubClone){var ref=this.ref[0].split("@")[1],dataset=this.HWSubDataset.getListDataSet(ref);for(var i=0;i<cnt;i++)dataset.add()}},setRow:function(argRowIdx,argData,argExtend,argProcessFlag){var tmpRowData="",rowData="";pFlag="U",bExtend=true,rowLen=this.getRowNum();if(this.isGrouping||$.isNull(argData)||argData==""||rowLen==0||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=rowLen)return false;argRowIdx=parseInt(argRowIdx);if(!$.isNull(argExtend))bExtend=argExtend;
if(!$.isNull(argProcessFlag))pFlag=argProcessFlag;if(typeof argData.getJson=="function")tmpRowData=argData.getJson();else tmpRowData=argData;if(typeof tmpRowData!="object")rowData=(new Function("return "+tmpRowData))();else rowData=tmpRowData;if(this.DumpData[argRowIdx].flag=="I")pFlag="I";if(bExtend)for(var key in rowData)this.setCell(argRowIdx,key,rowData[key]);else{var colBodyLen=this.colBodyLen;for(var i=0;i<colBodyLen;i++){var data=rowData[this.colBody[i].colName];if($.isNull(data))data="";this.setCell(argRowIdx,
this.colBody[i].colName,data)}}this.DumpData[argRowIdx].flag=pFlag},deleteRow:function(argIndex){if(this.isGrouping||this.isSubSum)return false;var rowLen=this.getRowNum();if(rowLen<0)return false;if(!isNaN(argIndex)&&(argIndex>=rowLen||argIndex<0))return false;var argIdx=argIndex,colBottomLen=this.colBottomLen;var that=this;deleteFunc=function(index){if(that.DumpData[index].flag&&that.DumpData[index].flag!="I"){var delObj={};that.deleteData.push(delObj);delObj.dt=that.DumpData.splice(index,1)[0].dt;
delObj.flag="D"}else that.DumpData.splice(index,1)[0];that.DumpAttr.splice(index,1)[0];if(that.HWSubClone){var ref=that.ref[0].split("@")[1],dataset=that.HWSubDataset.getListDataSet(ref);dataset.remove(index)}rowLen--;that.DumpDataLen--;that.DataLen--};if($.isNull(argIdx)&&(this.multiCheck||this.singleCheck))for(var i=0,len=this.DumpDataLen;i<len;i++){if(this.DumpData[i].ck){deleteFunc(i);i--;len--}}else if(typeof argIdx=="number"&&argIdx<rowLen)deleteFunc(argIdx);else if(jQuery.isArray(argIdx)){argIdx.sort(function(a,
b){return b-a});for(var i=0,arrLen=argIdx.length;i<arrLen;i++)deleteFunc(argIdx[i])}for(var i=0,idx=0,len=this.DumpDataLen;i<len;i++)if(this.DumpData[i].type=="data")this.DumpData[i].idx=idx++},removeAll:function(){this.vPos.start=-1;this.vPos.end=-1;delete this.DumpData;this.DumpData=[];this.DumpAttr=[];this.DumpDataLen=0;this.DataLen=0;this.deleteData=[];delete this.filterTmpCellData;this.filterTmpCellData=[];this.vPos={start:-1,end:-1};this.rPos={start:-1,end:-1};this.clickTR=-1;this.lastClickTR=
-1;this.clickTD=null;this.selectionEle=null;this.selection=false;this.selectionTD={};this.bBodyMerge=false;this.bBodyRowMerge=false;this.bGroupMerge=false;this.isGrouping=false;this.isSubSum=false;this.selectedRow=-1;this.selectedCol=-1;this.selectedValue="";this.selectedColName="";this.selectedEndRow=-1;this.selectedEndCol=-1;this.selectedEndValue="";this.selectedEndColName="";if(this.HWSubClone){var ref=this.ref[0].split("@")[1],dataset=this.HWSubDataset.getListDataSet(ref);dataset.removeAll()}},
getRow:function(argRowIdx,argOption){if(arguments.length<1||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=this.DataLen)return null;argRowIdx=parseInt(argRowIdx);var DumpData=this.getDumpData(argRowIdx);if($.isNull(DumpData))return null;var selfRowAttr=this.getDumpAttr(argRowIdx);if(typeof argOption=="object")return this._getRowOption(DumpData,selfRowAttr,argOption);var retObj=(new Function("return "+JSON.stringify(DumpData.dt)))();if(argOption)for(var i=0,colBodyLen=this.colBodyLen;i<colBodyLen;i++){if(this.colBody[i].type==
"textImage")continue;var key=this.colBody[i].colName,value="";if(key.indexOf("/")!=-1){var leafNameList=key.split("/"),tmpObj=retObj;for(var k=0;k<leafNameList.length;k++){tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length){var data=tmpObj[leafNameList[k]];if(data!="")value=this.dataFormatTempVal(key,data,selfRowAttr[key],true);else if(selfRowAttr[key].type=="graph")value="0px";tmpObj[leafNameList[k]]=value}}}else{var data=retObj[key];if(data!="")value=this.dataFormatTempVal(key,data,selfRowAttr[key],
true);else if(this.colBody[i].type=="graph")value="0px";retObj[key]=value}}else for(var i=0,colBodyLen=this.colBodyLen;i<colBodyLen;i++){if(this.colBody[i].type!="textImage")continue;var colIdx=this.colBody[i].colName,v="";if(colIdx.indexOf("/")!=-1){var leafNameList=colIdx.split("/"),tmpObj=DumpData.dt,isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)v=tmpObj;else v="";value=this.dataFormatTempVal(colIdx,
v,selfRowAttr[colIdx],true);var leafNameList=colIdx.split("/");var tmpObj=retObj;for(var k=0;k<leafNameList.length;k++){tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length)tmpObj[leafNameList[k]]=value}}else{if(!$.isNull(DumpData.dt[colIdx]))v=DumpData.dt[colIdx];else v="";value=this.dataFormatTempVal(colIdx,v,selfRowAttr[colIdx],true);retObj[colIdx]=value}}return retObj},_getRowOption:function(DumpData,selfRowAttr,argOption){var dataFormat=false,column="all",dataType="json",pFlag=false,checked=
false;if(typeof argOption!="undefined"){if(typeof argOption["format"]=="boolean"&&argOption["format"]==true)dataFormat=true;if(typeof argOption["type"]=="string"&&argOption["type"]=="array")dataType="array";if(typeof argOption["column"]!="undefined"){column=argOption["column"];if(column=="hidden")dataFormat=false}if(typeof argOption["pFlag"]=="boolean"&&argOption["pFlag"]==true)pFlag=true}var retObj=null;if(column=="hidden"){var tmpObj=(new Function("return "+JSON.stringify(DumpData.dt)))();for(var i=
0;i<this.colBodyLen;i++)delete tmpObj[this.colBody[i].colName];dataType="json";retObj=tmpObj}else if(column=="visible"){var tmpObj={};for(var i=0;i<this.colBodyLen;i++)tmpObj[this.colBody[i].colName]=DumpData.dt[this.colBody[i].colName];retObj=tmpObj}else if(column=="all")retObj=(new Function("return "+JSON.stringify(DumpData.dt)))();else if(typeof column=="object"){var tmpObj={};for(var i=0,columnLen=column.length;i<columnLen;i++){tmpObj[column[i]]=DumpData.dt[column[i]];if(typeof selfRowAttr[column[i]]==
"undefined")dataType="json"}retObj=tmpObj}if(dataFormat)for(var key in retObj){var colName=key,selfAttr=selfRowAttr[colName],value="";if(typeof selfAttr=="undefined"){dataType="json";continue}if(selfAttr.type=="textImage")continue;if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj=retObj;for(var k=0;k<leafNameList.length;k++){tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length){var data=tmpObj[leafNameList[k]];if(data!="")value=this.dataFormatTempVal(colName,data,selfAttr,
true);else if(selfAttr.type=="graph")value="0px";tmpObj[leafNameList[k]]=value}}}else{var data=retObj[colName];if(data!="")value=this.dataFormatTempVal(colName,data,selfRowAttr[colName],true);else if(selfAttr.type=="graph")value="0px";retObj[colName]=value}}else for(var key in retObj){var colName=key,selfAttr=selfRowAttr[colName],value="";if(typeof selfAttr=="undefined"){dataType="json";continue}if(selfAttr.type!="textImage")continue;if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),
tmpObj=retObj;for(var k=0;k<leafNameList.length;k++){tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length){var data=tmpObj[leafNameList[k]];if(data!="")value=this.dataFormatTempVal(colName,data,selfAttr,true);else if(selfAttr.type=="graph")value="0px";tmpObj[leafNameList[k]]=value}}}else{var data=retObj[colName];if(data!="")value=this.dataFormatTempVal(colName,data,selfAttr,true);else if(selfAttr.type=="graph")value="0px";retObj[colName]=value}}if(dataType=="array"){var tmpArr=[];for(var key in retObj)tmpArr.push(retObj[key]);
if(typeof argOption["checked"]=="string"){var ckArr=argOption["checked"].split("|"),ckTrue=ckArr[0],ckFalse=ckArr[1];if(ckTrue=="true"){ckTrue=Boolean(ckTrue);ckFalse=Boolean(ckFalse)}if(DumpData.ck)tmpArr.unshift(ckTrue);else tmpArr.unshift(ckFalse)}if(pFlag)tmpArr.push(DumpData.flag);retObj=tmpArr}else{if(typeof argOption["checked"]=="string"){var ckArr=argOption["checked"].split("|"),ckTrue=ckArr[0],ckFalse=ckArr[1];if(ckTrue=="true"){ckTrue=Boolean(ckTrue);ckFalse=Boolean(ckFalse)}if(DumpData.ck)retObj["checked"]=
ckTrue;else retObj["checked"]=ckFalse}if(pFlag)retObj["pFlag"]=DumpData.flag}return retObj},getAllRow:function(options){if(this.DumpDataLen==0&&this.deleteData.length==0)return null;var argFlag="",argCols=[],argChecked="",argExtend=new Object,argFormat=false;inData=options;if(typeof inData=="object")for(var key in inData)if(key=="flag")argFlag=inData[key];else if(key=="checked")argChecked=inData[key];else if(key=="cols")argCols=inData[key];else if(key=="depth")argDepth=inData[key];else if(key=="addColumn")argExtend=
inData[key];else if(key=="format")argFormat=inData[key];if(!this.multiCheck&&!this.singleCheck)argChecked="";var retVal=new Array,l=0,len=this.DumpDataLen,colBodyLen=this.colBodyLen,DumpData=null,DumpAttr=null;for(var i=0;i<len;i++){DumpData=this.DumpData[i];DumpAttr=this.DumpAttr[i];if(DumpData.type=="g"||DumpData.type=="s")continue;if(argFlag.length>0)if(typeof argFlag=="string"){if(DumpData.flag!=argFlag)continue}else{var bSame=false;for(var j=0;j<argFlag.length;j++)if(DumpData.flag==argFlag[j]){bSame=
true;break}if(!bSame)continue}if(typeof argChecked=="boolean")if(argChecked){if($.isNull(DumpData.ck)||!DumpData.ck)continue}else if(!$.isNull(DumpData.ck)&&DumpData.ck)continue;retVal[l]={};if(argCols.length)if(argFormat){var retObj={},formatBool=true,colIdx=-1;for(var j=0,colLength=argCols.length;j<colLength;j++){if(!$.isNull(this.colBodyColumn[argCols[j]])&&this.colBody[this.colBodyColumn[argCols[j]]].type!="textImage"){formatBool=true;colIdx=this.colBodyColumn[argCols[j]]}else formatBool=false;
var key=argCols[j],value="";if(key.indexOf("/")!=-1){var leafNameList=key.split("/"),tmpObj=DumpData.dt;for(var k=0;k<leafNameList.length;k++){tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length){var data=tmpObj[leafNameList[k]];if(typeof data=="undefined")continue;if(formatBool)if(data!="")value=this.dataFormatTempVal(key,data,DumpAttr[key],true);else{if(this.colBody[colIdx].type=="graph")value="0px"}else value=data;tmpObj[leafNameList[k]]=value}}}else{var data=DumpData.dt[key];if(typeof data==
"undefined")continue;if(formatBool)if(data!="")value=this.dataFormatTempVal(key,data,DumpAttr[key],true);else{if(this.colBody[colIdx].type=="graph")value="0px"}else value=data;retObj[key]=value}}retVal[l]=retObj}else for(var j=0,colLength=argCols.length;j<colLength;j++){var textImageBool=false;if(!$.isNull(this.colBodyColumn[argCols[j]])&&!$.isNull(this.colBody[this.colBodyColumn[argCols[j]]].type)&&this.colBody[this.colBodyColumn[argCols[j]]].type=="textImage"){var colIdx=this.colBody[this.colBodyColumn[argCols[j]]].colName,
str="",v="";if(colIdx.indexOf("/")!=-1){var leafNameList=colIdx.split("/"),tmpObj=DumpData.dt,isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)v=tmpObj;else v=""}else if(!$.isNull(DumpData.dt[colIdx]))v=DumpData.dt[colIdx];else v="";var data=v.toString().split("|");for(var m=0,seqLength=this.colBody[this.colBodyColumn[argCols[j]]].seq.length,dataLength=data.length;m<seqLength,m<dataLength;m++)if(this.colBody[this.colBodyColumn[argCols[j]]].seq[m]==
"t"||dataLength==1&&seqLength>1)str+=data[m];else if(this.colBody[this.colBodyColumn[argCols[j]]].seq[m]=="i"){str+="<img src='";str+=data[m];str+="'>"}var resultVal=str,flag=false;str="";for(var p=0;p<resultVal.length;p++)if(flag){var end=resultVal.charAt(p);if(end==">")flag=false}else{var start=resultVal.charAt(p);if(start=="<")flag=true;else str+=start}retVal[l][argCols[j]]=str}if(!textImageBool)if(argCols[j].indexOf("/")!=-1){var leafNameList=argCols[j].split("/"),tmpObj=DumpData.dt,tmpObj2=retVal[l];
for(var k=0;k<leafNameList.length;k++){if(typeof tmpObj=="undefined"||$.isNull(tmpObj))break;tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length)tmpObj2[leafNameList[k]]=tmpObj;else{if(typeof tmpObj2[leafNameList[k]]=="undefined"||$.isNull(tmpObj2[leafNameList[k]]))tmpObj2[leafNameList[k]]=new Object;tmpObj2=tmpObj2[leafNameList[k]]}}}else if($.isNull(DumpData.dt[argCols[j]]))retVal[l][argCols[j]]="";else retVal[l][argCols[j]]=DumpData.dt[argCols[j]]}else if(argFormat){var retObj=(new Function("return "+
JSON.stringify(DumpData.dt)))();for(var j=0;j<colBodyLen;j++){if(this.colBody[j].type=="textImage")continue;var key=this.colBody[j].colName,value="";if(key.indexOf("/")!=-1){var leafNameList=key.split("/"),tmpObj=retObj;for(var k=0;k<leafNameList.length;k++){tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length){var data=tmpObj[leafNameList[k]];if(data!="")value=this.dataFormatTempVal(key,data,DumpAttr[key],true);else if(this.colBody[j].type=="graph")value="0px";tmpObj[leafNameList[k]]=value}}}else{var data=
retObj[key];if(data!="")value=this.dataFormatTempVal(key,data,DumpAttr[key],true);else if(this.colBody[j].type=="graph")value="0px";retObj[key]=value}}retVal[l]=retObj}else{var textImageFlag=[];for(var n=0,colBodyLength=this.colBodyLen;n<colBodyLength;n++)if(this.colBody[n].type=="textImage")textImageFlag.push(this.colBody[n].colName);if(textImageFlag.length==0)retVal[l]=DumpData.dt;else{var data=DumpData.dt;for(var n=0;n<textImageFlag.length;n++){var colIdx=textImageFlag[n],str="",v="";if(colIdx.indexOf("/")!=
-1){var leafNameList=colIdx.split("/");var tmpObj=data;var isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)v=tmpObj;else v=""}else if(!$.isNull(data[colIdx]))v=data[colIdx];else v="";var value=v.toString().split("|");for(var m=0,seqLength=this.colBody[this.colBodyColumn[colIdx]].seq.length,dataLength=value.length;m<seqLength,m<dataLength;m++)if(this.colBody[this.colBodyColumn[colIdx]].seq[m]=="t"||dataLength==
1&&seqLength>1)str+=value[m];else if(this.colBody[this.colBodyColumn[colIdx]].seq[m]=="i"){str+="<img src='";str+=value[m];str+="'>"}var resultVal=str,flag=false;str="";for(var p=0;p<resultVal.length;p++)if(flag){var end=resultVal.charAt(p);if(end==">")flag=false}else{var start=resultVal.charAt(p);if(start=="<")flag=true;else str+=start}if(colIdx.indexOf("/")!=-1){var leafNameList=colIdx.split("/");var tmpObj=data;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];
else{tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}tmpObj[leafNameList[k]]=str}else data[colIdx]=str}retVal[l]=data}}for(var key in argExtend)if(argExtend[key]=="=flag")if(DumpData.flag)retVal[l][key]=DumpData.flag;else retVal[l][key]="";else if(argExtend[key]=="=checked")if(typeof DumpData.ck=="boolean")retVal[l][key]=DumpData.ck;else retVal[l][key]=false;else retVal[l][key]=argExtend[key];l++}var bDelete=false;if(typeof argFlag=="string")if(argFlag=="D")bDelete=true;else return(new Function("return "+
JSON.stringify(retVal)))();else{for(var j=0;j<argFlag.length;j++)if(argFlag[j]=="D"){bDelete=true;break}if(!bDelete)return(new Function("return "+JSON.stringify(retVal)))()}if(typeof argChecked=="boolean"&&argChecked)return(new Function("return "+JSON.stringify(retVal)))();for(var m=0,delLength=this.deleteData.length;m<delLength;m++){retVal[l]=new Object;if(argCols.length)for(var j=0,colLength=argCols.length;j<colLength;j++)if(argCols[j].indexOf("/")!=-1){var leafNameList=argCols[j].split("/"),tmpObj=
this.deleteData[m].dt,tmpObj2=retVal[l];for(var k=0;k<leafNameList.length;k++){if(typeof tmpObj=="undefined"||$.isNull(tmpObj))break;tmpObj=tmpObj[leafNameList[k]];if(k+1==leafNameList.length)tmpObj2[leafNameList[k]]=tmpObj;else{if(typeof tmpObj2[leafNameList[k]]=="undefined"||$.isNull(tmpObj2[leafNameList[k]]))tmpObj2[leafNameList[k]]=new Object;tmpObj2=tmpObj2[leafNameList[k]]}}}else{if($.isNull(this.deleteData[m].dt[argCols[j]]))continue;retVal[l][argCols[i]]=this.deleteData[m].dt[argCols[j]]}else retVal[l]=
this.deleteData[m].dt;for(var key in argExtend)if(argExtend[key]=="=flag")if(this.deleteData[m].flag)retVal[l][key]=this.deleteData[m].flag;else retVal[l][key]="";else if(argExtend[key]=="=checked")if(typeof this.deleteData[m].ck=="boolean")retVal[l][key]=this.deleteData[m].ck;else retVal[l][key]=false;else retVal[l][key]=argExtend[key];l++}return(new Function("return "+JSON.stringify(retVal)))()},getColumnSum:function(argColIdx,argStartIdx){if(this.bodyTable.rows.length==0||arguments.length<1||!isNaN(argColIdx)&&
argColIdx<0)return 0;if(!isNaN(argColIdx)&&argColIdx>=this.colBodyLen||isNaN(argColIdx)&&argColIdx==" ")return 0;var startIdx=0;if(argStartIdx&&!isNaN(argStartIdx))startIdx=parseInt(argStartIdx);var argCol=argColIdx,sumData=0,len=this.DumpDataLen,colBodyLen=this.colBodyLen;if(!isNaN(argCol)){if(argCol<0)return 0;argCol=this.colBody[argCol].colName}var rowIdx=0;for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;if(rowIdx<startIdx){rowIdx++;continue}if(argCol.indexOf("/")!=
-1){var leafNameList=argCol.split("/");var tmpObj=this.DumpData[i].dt;var isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode){var getData=naw.toFloat(tmpObj);sumData+=isNaN(getData)?0:getData}else sumData+=0}else{var getData=naw.toFloat(this.DumpData[i].dt[argCol]);sumData+=isNaN(getData)?0:getData}rowIdx++}var T=Number("1e"+2);sumData=Math.round(sumData*T)/T;return sumData},getColumnAvg:function(argColIdx){var sumData=
this.getColumnSum(argColIdx);if(sumData==0)return 0;sumData=sumData/this.getRowNum();return sumData},getMinVal:function(argColIdx){var discord=0;if(arguments[1]&&arguments[1]=="index")discord=-1;var len=this.DumpDataLen;if(len==0)return discord;var retVal=0,rowIndex=-1,resRowIndex=-1;if(!isNaN(argColIdx)){if(!this.colBody[argColIdx])return discord;argColIdx=this.colBody[argColIdx].colName}for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;rowIndex++;if(argColIdx.indexOf("/")!=
-1){var leafNameList=argColIdx.split("/"),tmpObj=this.DumpData[i].dt,isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)continue;else if(discord==0)if(i==0)retVal=parseFloat(tmpObj);else{if(retVal>parseFloat(tmpObj))retVal=parseFloat(tmpObj)}else if(typeof tmpObj!="undefined")if(resRowIndex==-1){retVal=parseFloat(tmpObj);resRowIndex=rowIndex}else if(retVal>parseFloat(tmpObj)){retVal=parseFloat(tmpObj);resRowIndex=
rowIndex}}else if(discord==0)if(i==0)retVal=parseFloat(this.DumpData[i].dt[argColIdx]);else{if(retVal>parseFloat(this.DumpData[i].dt[argColIdx]))retVal=parseFloat(this.DumpData[i].dt[argColIdx])}else if(typeof this.DumpData[i].dt[argColIdx]!="undefined")if(resRowIndex==-1){retVal=parseFloat(this.DumpData[i].dt[argColIdx]);resRowIndex=rowIndex}else if(retVal>parseFloat(this.DumpData[i].dt[argColIdx])){retVal=parseFloat(this.DumpData[i].dt[argColIdx]);resRowIndex=rowIndex}}if(discord==-1)retVal=resRowIndex;
return retVal},getMaxVal:function(argColIdx){var discord=0;if(arguments[1]&&arguments[1]=="index")discord=-1;var len=this.DumpDataLen;if(len==0)return discord;var retVal=0,rowIndex=-1,resRowIndex=-1;if(!isNaN(argColIdx)){if(!this.colBody[argColIdx])return discord;argColIdx=this.colBody[argColIdx].colName}for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;rowIndex++;if(argColIdx.indexOf("/")!=-1){var leafNameList=argColIdx.split("/");var tmpObj=this.DumpData[i].dt;
var isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)continue;else if(discord==0)if(i==0)retVal=parseFloat(tmpObj);else{if(retVal<parseFloat(tmpObj))retVal=parseFloat(tmpObj)}else if(typeof tmpObj!="undefined")if(resRowIndex==-1){retVal=parseFloat(tmpObj);resRowIndex=rowIndex}else if(retVal<parseFloat(tmpObj)){retVal=parseFloat(tmpObj);resRowIndex=rowIndex}}else if(discord==0)if(i==0)retVal=parseFloat(this.DumpData[i].dt[argColIdx]);
else{if(retVal<parseFloat(this.DumpData[i].dt[argColIdx]))retVal=parseFloat(this.DumpData[i].dt[argColIdx])}else if(typeof this.DumpData[i].dt[argColIdx]!="undefined")if(resRowIndex==-1){retVal=parseFloat(this.DumpData[i].dt[argColIdx]);resRowIndex=rowIndex}else if(retVal<parseFloat(this.DumpData[i].dt[argColIdx])){retVal=parseFloat(this.DumpData[i].dt[argColIdx]);resRowIndex=rowIndex}}if(discord==-1)retVal=resRowIndex;return retVal},getMinIndex:function(argColIdx){return this.getMinVal(argColIdx,
"index")},getMaxIndex:function(argColIdx){return this.getMaxVal(argColIdx,"index")},getRowNumByColValue:function(argColIdx,argValue){var len=this.DumpDataLen;if(len==0||typeof argValue=="undefined")return 0;if(!isNaN(argColIdx)){if(!this.colBody[argColIdx])return cnt;argColIdx=this.colBody[argColIdx].colName}return this._getRowByColValue(len,argColIdx,argValue,"num")},getRowIndexByColValue:function(argColIdx,argValue){var len=this.DumpDataLen;if(len==0||typeof argValue=="undefined")return[];if(!isNaN(argColIdx)){if(!this.colBody[argColIdx])return cnt;
argColIdx=this.colBody[argColIdx].colName}return this._getRowByColValue(len,argColIdx,argValue,"index")},_getRowByColValue:function(len,argColIdx,getVal,type){var rowIndex=-1,cnt=0,resIndex=[],compareVal="";for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;compareVal="";rowIndex++;if(argColIdx.indexOf("/")!=-1){var leafNameList=argColIdx.split("/");var tmpObj=this.DumpData[i].dt;var isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=
tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)continue;else{compareVal=tmpObj;if(typeof compareVal=="undefined")continue;if(compareVal==getVal){cnt++;resIndex.push(rowIndex)}}}else{compareVal=this.DumpData[i].dt[argColIdx];if(typeof compareVal=="undefined")continue;if(compareVal==getVal){cnt++;resIndex.push(rowIndex)}}}if(type=="num")return cnt;else if(type=="index")return resIndex},getRowNum:function(){return this.DataLen},getColNum:function(){return this.colBodyLen},setTplCell:function(argColIdx,
options){var colName=argColIdx,inData=options;if(this.DumpDataLen>0){alert($.getMessage("W0412"));return false}var colModelLen=this.colModelLen,colBodyLen=this.colBodyLen;if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=0;i<colModelLen;i++)if(colName==this.colModel[i].colName){for(var key in inData)this.colModel[i][key]=inData[key];break}for(var j=0;j<colBodyLen;j++)if(colName==this.colBody[j].colName){for(var key in inData)this.colBody[j][key]=
inData[key];break}},getTplCell:function(argColIdx,options){if(arguments.length<1)return false;if(!isNaN(argColIdx)&&argColIdx<0)return false;var colName=argColIdx,inData=options,retVal="",pos=-1,colModelLen=this.colModelLen,colBodyLen=this.colBodyLen;if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=0;i<colModelLen;i++)if(colName==this.colModel[i].colName){pos=i;break}if(pos==-1){alert($.getMessage("W0407",colName));return retVal}if($.isNull(inData)||
inData==""){retVal=new Object;for(var key in this.colModel[pos])retVal[key]=this.colModel[pos][key]}else if(jQuery.isArray(inData)){retVal=new Object;for(var i=0,dataLen=inData.length;i<dataLen;i++)if(!$.isNull(this.colModel[pos][inData[i]]))retVal[inData[i]]=this.colModel[pos][inData[i]]}else if(!$.isNull(this.colModel[pos][inData]))retVal=this.colModel[pos][inData];return retVal},setTplCellFormat:function(argColIdx,argType,argOption){var colName=argColIdx;var colModelLen=this.colModelLen,colBodyLen=
this.colBodyLen,colModel=null,colBody=null,type=argType,option=argOption,inTemplate={};if(!type)type="input";if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=0;i<colModelLen;i++)if(colName==this.colModel[i].colName){colModel=this.colModel[i];break}for(var j=0;j<colBodyLen;j++)if(colName==this.colBody[j].colName){colBody=this.colBody[j];break}if(colModel==null||colBody==null)return false;for(var i=0;i<this.getRowNum();i++){this.DumpAttr[i][colName]["optCh"]=
true;if(colBody.options)this.DumpAttr[i][colName]["opt"]=JSON.parse(JSON.stringify(colBody.options))}if(type=="input"){delete colModel.options;delete colBody.options;if(!option)inTemplate["dataNX"]={type:"text"};else{if(option.maxlength){inTemplate["maxlength"]=option.maxlength;delete option.maxlength}inTemplate["dataNX"]=option}}else{delete colModel.dataNX;delete colBody.dataNX;delete colModel.maxlength;delete colBody.maxlength;if(!option){delete colModel.options;delete colBody.options}else{inTemplate["options"]=
option;if(type=="editSelect"&&option.dataNX)inTemplate["dataNX"]=option.dataNX}}inTemplate["type"]=type;for(var key in inTemplate){colModel[key]=inTemplate[key];colBody[key]=inTemplate[key]}},setTplSelectOptions:function(argColIdx,argLabel,argValue){var colName=argColIdx,colModelLen=this.colModelLen,colBodyLen=this.colBodyLen,colModel=null,colBody=null;if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=0;i<colModelLen;i++)if(colName==
this.colModel[i].colName){colModel=this.colModel[i];break}for(var j=0;j<colBodyLen;j++)if(colName==this.colBody[j].colName){colBody=this.colBody[j];break}if(colModel==null||colBody==null)return false;for(var i=0;i<this.getRowNum();i++)if(!this.DumpAttr[i][colName]["optCh"]){this.DumpAttr[i][colName]["optCh"]=true;if(colBody.options)this.DumpAttr[i][colName]["opt"]=JSON.parse(JSON.stringify(colBody.options));if(colBody.dataNX)this.DumpAttr[i][colName]["dataNX"]=JSON.parse(JSON.stringify(colBody.dataNX))}colBody["type"]=
"select";colModel["type"]="select";var options=[];if(arguments.length==3){if(typeof argLabel=="string"){argLabel=argLabel.split(String.fromCharCode(parseInt("08",16)));argValue=argValue.split(String.fromCharCode(parseInt("08",16)))}var labelLen=argLabel.length,valueLen=argValue.length;if(labelLen!=valueLen)return false;for(var i=0;i<labelLen;i++){var option={};option.label=argLabel[i];option.value=argValue[i];options.push(option)}if(options.length==1)options=options[0]}else{if(!argLabel)return false;
options=argLabel}colModel["options"]=options;colBody["options"]=options},setTplCellEditable:function(argColIdx,argEdit){var colName=argColIdx;var colModelLen=this.colModelLen,colBodyLen=this.colBodyLen,colModel=null,colBody=null;if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=0;i<colModelLen;i++)if(colName==this.colModel[i].colName){colModel=this.colModel[i];break}for(var j=0;j<colBodyLen;j++)if(colName==this.colBody[j].colName){colBody=
this.colBody[j];break}if(colModel==null||colBody==null)return false;var bEdit=false;if(argEdit)bEdit=true;colModel["editable"]=bEdit;colBody["editable"]=bEdit},setTplCellAlign:function(argColIdx,argAlign){var colName=argColIdx;var colModelLen=this.colModelLen,colBodyLen=this.colBodyLen,colModel=null,colBody=null;if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=0;i<colModelLen;i++)if(colName==this.colModel[i].colName){colModel=this.colModel[i];
break}for(var j=0;j<colBodyLen;j++)if(colName==this.colBody[j].colName){colBody=this.colBody[j];break}if(colModel==null||colBody==null)return false;if(argAlign=="left"||argAlign=="center"||argAlign=="right"){colModel["align"]=argAlign;colBody["align"]=argAlign}},setTplCellSecureMask:function(argColIdx,argBool){var colName=argColIdx;var colModelLen=this.colModelLen,colBodyLen=this.colBodyLen,colModel=null,colBody=null;if(!isNaN(colName)){if(colName>=colBodyLen||colName<0)return false;colName=this.colBody[colName].colName}for(var i=
0;i<colModelLen;i++)if(colName==this.colModel[i].colName){colModel=this.colModel[i];break}for(var j=0;j<colBodyLen;j++)if(colName==this.colBody[j].colName){colBody=this.colBody[j];break}if(colModel==null||colBody==null)return false;if(argBool){delete colModel["secureMask"];delete colBody["secureMask"]}else{colModel["secureMask"]=argBool;colBody["secureMask"]=argBool}},setCell:function(argRowIdx,argColIdx,argData){var leftTdPlus=0,colBodyLen=this.colBodyLen,len=this.getRowNum();if(this.multiCheck||
this.singleCheck)leftTdPlus+=1;if(this.numbering)leftTdPlus+=1;if(arguments.length<2||argRowIdx<-1||isNaN(argRowIdx)||len==0||argRowIdx>=len||argRowIdx<-1)return false;var setTemp=function(that,rowIdx,argArguments){var argColName="",argColData="",DumpData=that.getDumpData(rowIdx);selfAttr=null;if(typeof argColIdx=="object")argColName=argArguments[1];else argColName=argColIdx;argColData=argArguments[2];if($.isNull(argColData))argColData="";if(!$.isNull(DumpData)){selfAttr=that.getDumpAttr(rowIdx,argColName);
if(DumpData.flag!="I")DumpData.flag="U";if(argColName.indexOf("/")!=-1){var leafNameList=argColName.split("/"),tmpObj=DumpData.dt;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{tmpObj[leafNameList[k]]=new Object;tmpObj=tmpObj[leafNameList[k]]}if(DumpData.flag!="I"&&tmpObj[leafNameList[k]]!=argColData)DumpData.flag="U";tmpObj[leafNameList[k]]=argColData}else{if(DumpData.flag!="I"&&DumpData.dt[argColName]!=argColData)DumpData.flag="U";DumpData.dt[argColName]=
argColData}}else return false;var pos=-1,cellType="",cellDataNX=null,cellMaxlength=null;for(var i=0;i<colBodyLen;i++)if(argColName==that.colBody[i].colName){if(selfAttr.type)cellType=selfAttr.type;if(selfAttr.dataNX)cellDataNX=selfAttr.dataNX;if(selfAttr.editable)cellEditable=selfAttr.edit;if(selfAttr.options)cellOptions=selfAttr.opts;if(selfAttr.maxlength)cellMaxlength=selfAttr.maxlength;pos=i;break}if(pos!=-1)if((cellType=="input"||cellType=="")&&cellDataNX&&cellDataNX.type&&cellDataNX.type=="digit"&&
cellMaxlength){var tmpVal=argColData;if(cellDataNX.padLeft)tmpVal=$.padLeft(argColData,cellMaxlength,cellDataNX.padLeft);else if(cellDataNX.padRight)tmpVal=$.padRight(argColData,cellMaxlength,cellDataNX.padRight);if(!$.isNull(that.DumpData[rowIdx]))if(argColName.indexOf("/")!=-1){var leafNameList=argColName.split("/");var tmpObj=that.DumpData[rowIdx].dt;for(var k=0;k<leafNameList.length-1;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{tmpObj[leafNameList[k]]=new Object;tmpObj=
tmpObj[leafNameList[k]]}tmpObj[leafNameList[k]]=tmpVal}else that.DumpData[rowIdx].dt[argColName]=tmpVal;argColData=tmpVal}};if(argRowIdx==-1){if(!isNaN(argColIdx)&&argColIdx<0)return false;if(!isNaN(argColIdx))if(colBodyLen>argColIdx)argColIdx=this.colBody[argColIdx].colName;else return;for(var j=0;j<len;j++){argRowIdx=j;setTemp(this,argRowIdx,arguments)}}else if(typeof argColIdx=="object")for(var key in argColIdx){var tempColIdx=key;if(!isNaN(tempColIdx)&&tempColIdx<0)continue;if(!isNaN(tempColIdx))tempColIdx=
this.getColName(argRowIdx,tempColIdx);setTemp(this,argRowIdx,[argRowIdx,tempColIdx,argColIdx[key]])}else{if(!isNaN(argColIdx)&&argColIdx<0)return false;argColIdx=this.getColName(argRowIdx,argColIdx);setTemp(this,argRowIdx,arguments)}},getCell:function(argRowIdx,argColIdx,argbText){var retVal="",colIdx=argColIdx,DumpData=this.getDumpData(argRowIdx),selfAttr=null;if(!$.isNull(DumpData)){colIdx=this.getColName(argRowIdx,argColIdx);selfAttr=this.getDumpAttr(argRowIdx,colIdx);if(colIdx.indexOf("/")!=-1){var leafNameList=
colIdx.split("/"),tmpObj=DumpData.dt,isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)retVal=tmpObj;else retVal=""}else if(!$.isNull(DumpData.dt[colIdx]))retVal=DumpData.dt[colIdx];else retVal="";if(argbText)return this.dataFormatTempVal(colIdx,retVal,selfAttr,true)}if(typeof retVal=="object")return(new Function("return "+JSON.stringify(retVal)))();else return retVal},getSecureData:function(argRowIdx,argColIdx){var retVal=
"",colName=argColIdx,DumpData=this.getDumpData(argRowIdx),selfAttr=null;if(!$.isNull(DumpData)){colName=this.getColName(argRowIdx,argColIdx);selfAttr=this.getDumpAttr(argRowIdx,colName);if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj=DumpData.dt,isNode=true;for(var k=0;k<leafNameList.length;k++)if(tmpObj[leafNameList[k]])tmpObj=tmpObj[leafNameList[k]];else{isNode=false;break}if(isNode)retVal=tmpObj;else retVal=""}else if(!$.isNull(DumpData.dt[colName]))retVal=DumpData.dt[colName];
else retVal="";if(!selfAttr)return retVal;var options=selfAttr.opt;if(!selfAttr.optCh)options=this.colBody[this.colBodyColumn[colName]].options;if(selfAttr.type=="input"){var argDataNX=selfAttr.dataNX,argMaxlength=selfAttr.maxlength;retVal=this.dataNXFormatVal(retVal.toString(),argDataNX,argMaxlength,false)}return retVal}if(typeof retVal=="object")return(new Function("return "+JSON.stringify(retVal)))();else return retVal},setCellEditable:function(argRowIdx,argColIdx,argEdit){if(arguments.length<
2)return false;var row=arguments[0],colName=arguments[1],bEdit=arguments[2],len=this.DumpDataLen;if(isNaN(row)||len==0||parseInt(row)<-1||this.DataLen<=parseInt(row))return false;if(row==-1){var rowIdx=-1;if(colName==-1)for(var i=0;i<len;i++){if(this.DumpData[i].type!="data")continue;rowIdx++;var selfRowAttr=this.DumpAttr[i];for(var key in selfRowAttr){if($.isNull(selfRowAttr[key]))continue;colName=key;this.DumpAttr[i][colName].edit=bEdit}}else{if(typeof colName=="number")colName=this.colBody[colName].colName;
for(var i=0;i<len;i++){if(this.DumpData[i].type!="data")continue;if($.isNull(this.DumpAttr[i][colName]))continue;rowIdx++;this.DumpAttr[i][colName].edit=bEdit}}}else if(colName==-1){var selfAttr=this.getDumpAttr(row);for(var key in selfAttr){if($.isNull(selfAttr))continue;colName=key;selfAttr[colName].edit=bEdit}}else{colName=this.getColName(row,colName);var selfAttr=this.getDumpAttr(row,colName);if($.isNull(selfAttr))return false;selfAttr.edit=bEdit}},getCellEditable:function(argRowIdx,argColIdx){var row=
argRowIdx,colName=argColIdx;if(arguments.length<2||isNaN(row)||row>=this.DumpDataLen||row<0)return false;colName=this.getColName(argRowIdx,argColIdx);var selfAttr=this.DumpAttr[argRowIdx][colName];if(selfAttr.edit)return true;else return false},setCellFormat:function(argRowIdx,argColIdx,argType,argOption){var len=this.getRowNum();if(isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len||$.isNull(argType))return false;argRowIdx=parseInt(argRowIdx);if(!isNaN(argColIdx))argColIdx=parseInt(argColIdx);argColIdx=
this.getColName(argRowIdx,argColIdx);var selfRowAttr=this.getDumpAttr(argRowIdx),selfAttr=selfRowAttr[argColIdx],type=argType,option=argOption;var attrColname={};if(type!="")attrColname["type"]=type;else attrColname["type"]="input";attrColname["optCh"]=true;if(attrColname["type"]=="input"){attrColname["dataNX"]={};if(!option)attrColname.dataNX["type"]="text";else{attrColname["dataNX"]["type"]=option.type;if(option.mask)attrColname["dataNX"]["mask"]=option.mask}if(option&&option.maxlength)attrColname["maxlength"]=
option.maxlength;else if(selfAttr.maxlength)attrColname["maxlength"]=selfAttr.maxlength}else if(option)attrColname["opt"]=option;if(selfAttr.edit)attrColname["edit"]=selfAttr.edit;if(selfAttr.style)attrColname["style"]=selfAttr.style;if(selfAttr.colSpan)attrColname["colSpan"]=selfAttr.colSpan;if(selfAttr.rowSpan)attrColname["rowSpan"]=selfAttr.rowSpan;if(attrColname["style"]&&attrColname["style"]["text-align"])attrColname["align"]=attrColname["style"]["text-align"];else if(selfAttr["align"])attrColname["align"]=
selfAttr["align"];else attrColname["align"]="center";selfRowAttr[argColIdx]=attrColname},setSelectOptions:function(argRowIdx,argColIdx,argLabel,argValue){var len=this.getRowNum();if(len==0||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len)return false;if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var options=[],getData=this.getCell(argRowIdx,argColIdx),dataEqualsExist=false,setText=-1,realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];if(selfAttr.type!=
"select")return false;selfAttr["optCh"]=true;if(arguments[3]){if(typeof argLabel=="string"){argLabel=argLabel.split(String.fromCharCode(parseInt("08",16)));argValue=argValue.split(String.fromCharCode(parseInt("08",16)))}var labelLen=argLabel.length,valueLen=argValue.length;if(labelLen!=valueLen)return false;for(var i=0;i<labelLen;i++){var option={};option.label=argLabel[i];option.value=argValue[i];options.push(option);if(argValue[i]==getData){dataEqualsExist=true;setText=argLabel[i]}}if(options.length==
1)selfAttr.opt=options[0];else selfAttr.opt=options}else{if(!argLabel)return false;if(jQuery.isArray(argLabel)){for(var i=0,labelLen=argLabel.length;i<labelLen;i++)if(argLabel[i].value==getData){dataEqualsExist=true;setText=argLabel[i].label}selfAttr.opt=argLabel}else{if(argLabel.value==getData){dataEqualsExist=true;setText=argLabel.label}selfAttr.opt=argLabel}}},setSelectOptionValue:function(argRowIdx,argColIdx,argIndex,argValue){var len=this.getRowNum();if(len==0||isNaN(argRowIdx)||argRowIdx<0||
argRowIdx>=len||arguments.length<4||argIndex<0)return false;if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];if(selfAttr.type!="select")return false;if(!selfAttr.optCh){selfAttr.optCh=true;selfAttr.opt=JSON.parse(JSON.stringify(this.colBody[this.colBodyColumn[argColIdx]].options))}var opt=selfAttr.opt;if(!opt||!jQuery.isArray(opt)&&argIndex>0||opt.length<=argIndex)return false;var prevLabel="",prevValue=
"";if(jQuery.isArray(opt)){prevLabel=opt[argIndex].label;prevValue=opt[argIndex].value;opt[argIndex].value=argValue}else{prevLabel=opt.label;prevValue=opt.value;opt.value=argValue}},getSelectOptionValue:function(argRowIdx,argColIdx,argIndex){var len=this.getRowNum();if(len==0||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len||arguments.length<3||argIndex<0)return"";if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];
if(selfAttr.type!="select")return"";var opt=selfAttr.opt;if(!selfAttr.optCh)opt=this.colBody[this.colBodyColumn[argColIdx]].options;if(!opt||!jQuery.isArray(opt)&&argIndex>0||opt.length<=argIndex)return"";if(jQuery.isArray(opt))return opt[argIndex].value;else return opt.value},setSelectOptionLabel:function(argRowIdx,argColIdx,argIndex,argLabel){var len=this.getRowNum();if(len==0||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len||arguments.length<4||argIndex<0)return false;if(!isNaN(argColIdx))argColIdx=
this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];if(selfAttr.type!="select")return false;if(!selfAttr.optCh){selfAttr.optCh=true;selfAttr.opt=JSON.parse(JSON.stringify(this.colBody[this.colBodyColumn[argColIdx]].options))}var opt=selfAttr.opt;if(!opt||!jQuery.isArray(opt)&&argIndex>0||opt.length<=argIndex)return false;var prevLabel="";if(jQuery.isArray(opt)){prevLabel=opt[argIndex].label;opt[argIndex].label=argLabel}else{prevLabel=
opt.label;opt.label=argLabel}},getSelectOptionLabel:function(argRowIdx,argColIdx,argIndex){var len=this.getRowNum();if(len==0||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len||arguments.length<3||argIndex<0)return"";if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];if(selfAttr.type!="select")return"";var opt=selfAttr.opt;if(!selfAttr.optCh)opt=this.colBody[this.colBodyColumn[argColIdx]].options;if(!opt||
!jQuery.isArray(opt)&&argIndex>0||opt.length<=argIndex)return"";if(jQuery.isArray(opt))return opt[argIndex].label;else return opt.label},getSelectOptionCnt:function(argRowIdx,argColIdx){var len=this.getRowNum();if(len==0||isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len||arguments.length<2)return 0;if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];if(selfAttr.type!="select")return 0;var opt=selfAttr.opt;
if(!selfAttr.optCh)opt=this.colBody[this.colBodyColumn[argColIdx]].options;if(!opt)return 0;if(jQuery.isArray(opt))return opt.length;else return 1},selectOptionIndex:function(argRowIdx,argColIdx,selIdx){if(isNaN(selIdx)||selIdx<0)return false;if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];if(selfAttr.type!="select"&&selfAttr.type!="editSelect")return false;var opt=selfAttr.opt;if(!selfAttr.optCh)opt=
this.colBody[this.colBodyColumn[argColIdx]].options;if(!opt||!jQuery.isArray(opt)&&selIdx>0||opt.length<=selIdx)return false;var setData="";if(jQuery.isArray(opt))setData=opt[selIdx].value;else setData=opt.value;this.setCell(argRowIdx,argColIdx,setData)},selectOptionLabel:function(argRowIdx,argColIdx,argLabel){if(typeof argLabel=="undefined")return false;if(!isNaN(argColIdx))argColIdx=this.getColName(argRowIdx,argColIdx);var realRow=this.getRealRow(argRowIdx),selfAttr=this.DumpAttr[realRow][argColIdx];
if(selfAttr.type!="select"&&selfAttr.type!="editSelect")return false;var opt=selfAttr.opt;if(!selfAttr.optCh)opt=this.colBody[this.colBodyColumn[argColIdx]].options;if(!opt)return false;var setData=null;if(jQuery.isArray(opt))for(var i=0,optionLen=opt.length;i<optionLen;i++){if(opt[i].label==argLabel){setData=opt[i].value;break}}else if(opt.label==argLabel)setData=opt.value;if(setData!=null)this.setCell(argRowIdx,argColIdx,setData)},setSelectValueByLabel:function(argRowIdx,argColIdx,argValue,argLabel){var value=
argValue,label=argLabel;if($.isNull(label)||$.isNull(value)||label==""||value=="")return false;var colName=this.getColName(argRowIdx,argColIdx);selfAttr=this.getDumpAttr(argRowIdx,colName);if(selfAttr.type!="select"&&selfAttr.type!="editSelect")return false;label=naw.replace(label.toString(),"&nbsp;"," ");label=naw.replace(label.toString(),"<br>","\n");label=naw.replace(label.toString(),"<BR>","\n");if(!selfAttr.optCh){selfAttr.optCh=true;selfAttr.opt=JSON.parse(JSON.stringify(this.colBody[this.colBodyColumn[colName]].options))}var options=
selfAttr.opt;if($.isNull(options))return false;if(jQuery.isArray(options))for(var i=0,optionLen=options.length;i<optionLen;i++){if(options[i].value==value){if(options[i].label==label)return false;options[i].label=label;break}}else if(options.value==value){if(options.label==label)return false;options.label=label}},setSelectLabelByValue:function(argRowIdx,argColIdx,argLabel,argValue){var value=argValue,label=argLabel;if($.isNull(label)||$.isNull(value)||label==""||value=="")return false;var colName=
this.getColName(argRowIdx,argColIdx);selfAttr=this.getDumpAttr(argRowIdx,colName);if(selfAttr.type!="select"&&selfAttr.type!="editSelect")return false;label=naw.replace(label.toString(),"&nbsp;"," ");label=naw.replace(label.toString(),"<br>","\n");label=naw.replace(label.toString(),"<BR>","\n");if(!selfAttr.optCh){selfAttr.optCh=true;selfAttr.opt=JSON.parse(JSON.stringify(this.colBody[this.colBodyColumn[colName]].options))}var options=selfAttr.opt;if($.isNull(options))return false;var existFlag=false;
if(jQuery.isArray(options))for(var i=0,optionLen=options.length;i<optionLen;i++){if(options[i].label==label){if(options[i].value==value)return false;var getData="";if(selfAttr.type=="editSelect"){getData=this.getCell(argRowIdx,colName);if(options[i].value==getData)existFlag=true}options[i].value=value;break}}else if(options.value==value){if(options.value==value)return false;var getData="";if(selfAttr.type=="editSelect"){getData=this.getCell(argRowIdx,colName);if(options.value==getData)existFlag=true}options.value=
value}},setCellAlign:function(argRowIdx,argColIdx,argAlign){var len=this.DumpDataLen,colBodyLen=this.colBodyLen;if(arguments.length<3)return false;var rowIdx=argRowIdx,colIdx=argColIdx,align=argAlign,alignName="";tA=true;if(align=="center"||align=="left"||align=="right"){tA=true;alignName="text-align"}else if(align=="middle"||align=="top"||align=="bottom"){tA=false;alignName="vertical-align"}else return false;if(rowIdx==-1)if(colIdx==-1)for(var i=0;i<len;i++)for(var j=0;j<colBodyLen;j++){var selfAttr=
this.getDumpAttr(i,this.colBody[j].colName);if(!selfAttr.style)selfAttr.style={};selfAttr.style[alignName]=align}else for(var i=0;i<len;i++){var selfAttr=this.getDumpAttr(i,colIdx);if(!selfAttr.style)selfAttr.style={};selfAttr.style[alignName]=align}else if(colIdx==-1)for(var i=0;i<colBodyLen;i++){var selfAttr=this.getDumpAttr(rowIdx,this.colBody[i].colName);if(!selfAttr.style)selfAttr.style={};selfAttr.style[alignName]=align}else{var selfAttr=this.getDumpAttr(rowIdx,colIdx);if(!selfAttr.style)selfAttr.style=
{};selfAttr.style[alignName]=align}},isEmptyCell:function(argRowIdx,argColIdx,argMsg){var cellData="",resultBool=false,colName=this.getColName(argRowIdx,argColIdx);if(colName=="")return false;cellData=this.getCell(argRowIdx,colName);if(cellData=="")resultBool=true;return resultBool},getCellType:function(argRowIdx,argColIdx){var returnType="";var len=this.getRowNum();if(isNaN(argRowIdx)||argRowIdx<0||argRowIdx>=len)return returnType;argRowIdx=parseInt(argRowIdx);if(!isNaN(argColIdx))argColIdx=parseInt(argColIdx);
argColIdx=this.getColName(argRowIdx,argColIdx);var selfRowAttr=this.getDumpAttr(argRowIdx),selfAttr=selfRowAttr[argColIdx];if($.isNull(selfAttr))return returnType;if(selfAttr.type!="input")returnType=selfAttr.type;else returnType=selfAttr.dataNX.type;return returnType},sortColumn:function(argColIdx,argSort,argType){if(this.isGrouping)return false;var len=this.DumpDataLen,colBodyLen=this.colBodyLen;if(len==0||len==1||colBodyLen==0||!isNaN(argColIdx)&&(argColIdx<0||argColIdx>=colBodyLen)||arguments.length<
2)return false;var colName=argColIdx,sortName=argSort,colDataType="string",cBody=null;if(arguments.length==3)colDataType=argType;else{colName=this.getColName(0,argColIdx);for(var i=0;i<colBodyLen;i++)if(colName==this.colBody[i].colName){cBody=this.colBody[i];break}if(cBody==null)return false}var headerTrLength=this.headerTable.rows.length,headerTdLength=0;var dirTextRemove=function(table){for(var i=0;i<headerTrLength;i++){headerTdLength=table.rows[i].cells.length;for(var j=0;j<headerTdLength;j++){var headerClass=
table.rows[i].cells[j].getAttribute("class"),tdEle=jQuery(table.rows[i].cells[j]).find("> .grid-title")[0];if(tdEle){var prevText=tdEle.innerHTML;if(headerClass=="grid-sort-column"&&(prevText.indexOf("▲")!=-1||prevText.indexOf("▼")!=-1)){prevText=prevText.substring(0,prevText.length-2);tdEle.innerHTML=prevText}}}}};dirTextRemove(this.headerTable);if(this.lbodyTable)dirTextRemove(this.lheaderTable);if(this.rbodyTable)dirTextRemove(this.rheaderTable);if(cBody&&!$.isNull(cBody.dataNX)&&!$.isNull(cBody.dataNX.type))colDataType=
cBody.dataNX.type;if(colDataType=="number"||colDataType=="digit")colDataType="num";var TempDump=[];for(var i=0;i<len;i++)TempDump.push({D1:this.DumpData[i],D2:this.DumpAttr[i]});TempDump.sort(function(obj1,obj2){var data1="",data2="";if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj1=obj1.D1.dt,tmpObj2=obj2.D1.dt;for(var k=0;k<leafNameList.length;k++){tmpObj1=tmpObj1[leafNameList[k]];tmpObj2=tmpObj2[leafNameList[k]]}data1=tmpObj1;data2=tmpObj2}else{data1=obj1.D1.dt[colName];
data2=obj2.D1.dt[colName]}if(sortName=="asc")if(colDataType=="num")return parseFloat(data1)-parseFloat(data2);else if(data1<data2)return-1;else if(data1>data2)return 1;else return 0;if(sortName=="desc")if(colDataType=="num")return parseFloat(data2)-parseFloat(data1);else if(data2<data1)return-1;else if(data2>data1)return 1;else return 0});for(var i=0;i<len;i++){this.DumpData[i]=TempDump[i].D1;this.DumpData[i].idx=i;this.DumpAttr[i]=TempDump[i].D2}delete TempDump},multiSort:function(argObj,argType){if(this.isGrouping||
this.isSubSum)return false;var len=this.DumpDataLen;if(len==0||len==1)return false;if(this.type=="large"){this.emptyRows();this.scrollTopPos=0;this.startPos=0}var sortKey=[],sortType=[],dataType=null;if(argType)dataType=argType;for(var key in argObj){sortKey.push(key);sortType.push(argObj[key])}var idx=0,cBody=null,colDataType="";for(var i=0,colModelLen=this.colModelLen;i<colModelLen;i++)if(this.colModel[i].colName==sortKey[0]){cBody=this.colModel[i];if(!$.isNull(cBody.dataNX)&&!$.isNull(cBody.dataNX.type))colDataType=
cBody.dataNX.type;break}if(dataType&&dataType[0]!=""&&(dataType[0]=="num"||dataType[0]=="number"||dataType[0]=="string"))colDataType=dataType[0];if(colDataType=="number"||colDataType=="digit")colDataType="num";var TempDump=[];for(var i=0;i<len;i++)TempDump.push({D1:this.DumpData[i],D2:this.DumpAttr[i]});TempDump.sort(function(obj1,obj2){var data1="",data2="";if(sortKey[idx].indexOf("/")!=-1){var leafNameList=sortKey[idx].split("/"),tmpObj1=obj1.D1.dt,tmpObj2=obj2.D1.dt;for(var k=0;k<leafNameList.length;k++){tmpObj1=
tmpObj1[leafNameList[k]];tmpObj2=tmpObj2[leafNameList[k]]}data1=tmpObj1;data2=tmpObj2}else{data1=obj1.D1.dt[sortKey[idx]];data2=obj2.D1.dt[sortKey[idx]]}if(sortType[idx]=="asc")if(colDataType=="num")return parseFloat(data1)-parseFloat(data2);else if(data1<data2)return-1;else if(data1>data2)return 1;else return 0;else if(sortType[idx]=="desc")if(colDataType=="num")return parseFloat(data2)-parseFloat(data1);else if(data2<data1)return-1;else if(data2>data1)return 1;else return 0});if(idx<sortKey.length-
1)TempDump=this.multiSortReturn(TempDump,idx,sortKey,sortType,dataType);for(var i=0;i<len;i++){this.DumpData[i]=TempDump[i].D1;this.DumpData[i].idx=i;this.DumpAttr[i]=TempDump[i].D2}delete TempDump},multiSortReturn:function(tmpDumpData,dumpIdx,sortKey,sortType,dataType){dumpIdx=dumpIdx+1;var cnt=0,temp=-1,newDumpData=[],cBody,colDataType="";for(var i=0,modelLength=this.colModelLen;i<modelLength;i++)if(this.colModel[i].colName==sortKey[dumpIdx]){cBody=this.colModel[i];if(!$.isNull(cBody.dataNX)&&!$.isNull(cBody.dataNX.type))colDataType=
cBody.dataNX.type;break}if(dataType&&dataType[dumpIdx]!=""&&(dataType[dumpIdx]=="digit"||dataType[dumpIdx]=="num"||dataType[dumpIdx]=="number"||dataType[dumpIdx]=="string"))colDataType=dataType[dumpIdx];var sortName=sortType[dumpIdx],colName=sortKey[dumpIdx];for(var i=0,DumpDataLen=tmpDumpData.length;i<DumpDataLen;i++){if(i==0){temp=tmpDumpData[i].D1.dt[sortKey[dumpIdx-1]];i++}if(temp==tmpDumpData[i].D1.dt[sortKey[dumpIdx-1]])cnt++;else{if(cnt!=0){var tempDumpData=null;tempDumpData=tmpDumpData.slice(i-
1-cnt,i);if(colDataType=="number"||colDataType=="digit")colDataType=="num";tempDumpData.sort(function(obj1,obj2){var data1="",data2="";if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj1=obj1.D1.dt,tmpObj2=obj2.D1.dt;for(var k=0;k<leafNameList.length;k++){tmpObj1=tmpObj1[leafNameList[k]];tmpObj2=tmpObj2[leafNameList[k]]}data1=tmpObj1;data2=tmpObj2}else{data1=obj1.D1.dt[colName];data2=obj2.D1.dt[colName]}if(sortName=="asc")if(colDataType=="num")return parseFloat(data1)-parseFloat(data2);
else if(data1<data2)return-1;else if(data1>data2)return 1;else return 0;if(sortName=="desc")if(colDataType=="num")return parseFloat(data2)-parseFloat(data1);else if(data2<data1)return-1;else if(data2>data1)return 1;else return 0});if(dumpIdx<sortKey.length-1){var sortResult=this.multiSortReturn(tempDumpData,dumpIdx,sortKey,sortType,dataType);if(sortResult.length!=0)tempDumpData=sortResult}newDumpData=newDumpData.concat(tempDumpData);cnt=0}else newDumpData=newDumpData.concat(tmpDumpData[i-1]);temp=
tmpDumpData[i].D1.dt[sortKey[dumpIdx-1]]}if(i==tmpDumpData.length-1){if(cnt!=0){var tempDumpData=null;tempDumpData=tmpDumpData.slice(i-cnt,i+1);if(colDataType=="number"||colDataType=="digit")colDataType=="num";tempDumpData.sort(function(obj1,obj2){var data1="",data2="";if(colName.indexOf("/")!=-1){var leafNameList=colName.split("/"),tmpObj1=obj1.D1.dt,tmpObj2=obj2.D1.dt;for(var k=0;k<leafNameList.length;k++){tmpObj1=tmpObj1[leafNameList[k]];tmpObj2=tmpObj2[leafNameList[k]]}data1=tmpObj1;data2=tmpObj2}else{data1=
obj1.D1.dt[colName];data2=obj2.D1.dt[colName]}if(sortName=="asc")if(colDataType=="num")return parseFloat(data1)-parseFloat(data2);else if(data1<data2)return-1;else if(data1>data2)return 1;else return 0;if(sortName=="desc")if(colDataType=="num")return parseFloat(data2)-parseFloat(data1);else if(data2<data1)return-1;else if(data2>data1)return 1;else return 0});if(dumpIdx<sortKey.length-1){var sortResult=this.multiSortReturn(tempDumpData,dumpIdx,sortKey,sortType,dataType);if(sortResult.length!=0)tempDumpData=
sortResult}newDumpData=newDumpData.concat(tempDumpData);cnt=0}else newDumpData=newDumpData.concat(tmpDumpData[i]);temp=tmpDumpData[i].D1.dt[sortKey[dumpIdx-1]]}}return newDumpData},gridHide:function(){},gridShow:function(){},setCheckIndex:function(argIndex,argCheck){if(!this.multiCheck&&!this.singleCheck)return false;if(this.DumpData.length==0)return false;var checked=true,cellIdx=this.checkIdx,len=this.DumpDataLen,disabledFlag=false;if(arguments.length>=2)checked=argCheck;if(jQuery.isArray(argIndex)){if(this.singleCheck)return false;
argIndex.sort(function(a,b){return a-b});for(var i=0,rowIdx=-1,j=0,arrLen=argIndex.length;i<len&&j<arrLen;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;disabledFlag=false;if(rowIdx==argIndex[j]){if(arguments.length==3&&arguments[2]=="shift")if(!$.isNull(this.DumpData[i].ckEdit)&&!this.DumpData[i].ckEdit)disabledFlag=true;if(disabledFlag)continue;this.DumpData[i].ck=checked;j++}}}else if(argIndex<0){if(this.singleCheck)return false;var headerCheck=null,mCheckEle=
null;for(var i=0;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;if(!$.isNull(this.DumpData[i].ckEdit)&&!this.DumpData[i].ckEdit)continue;this.DumpData[i].ck=checked}}else if(argIndex<len){if(this.singleCheck)for(var i=0;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;this.DumpData[i].ck=false}for(var i=0,rowIdx=-1;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;if(rowIdx==argIndex){if(arguments.length==
3&&arguments[2]=="shift")if(!$.isNull(this.DumpData[i].ckEdit)&&!this.DumpData[i].ckEdit)return false;this.DumpData[i].ck=checked;break}}}else return false},getCheckIndex:function(argState){var retVal=[],len=this.DumpDataLen;if(!this.multiCheck&&!this.singleCheck)return retVal;if(len==0)return retVal;var bState=true;if(typeof argState=="boolean")bState=argState;for(var i=0,rowIdx=-1;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;if(bState){if(!$.isNull(this.DumpData[i].ck)&&
this.DumpData[i].ck)retVal.push(rowIdx)}else if($.isNull(this.DumpData[i].ck)||!this.DumpData[i].ck)retVal.push(rowIdx)}return retVal},getCheckedRow:function(argRowIdx){var retVal=false,len=this.DumpDataLen;if(!this.multiCheck&&!this.singleCheck||len==0)return retVal;for(var i=0,rowIdx=-1;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;if(rowIdx==argRowIdx)if(typeof this.DumpData[i].ck=="undefined")retVal=false;else retVal=this.DumpData[i].ck}return retVal},
setCheckEditable:function(argRowIdx,argbEdit){if(!this.multiCheck&&!this.singleCheck)return false;var cellIdx=0,len=this.DumpDataLen;if(this.numbering)cellIdx++;var className="",dir="";if(this.multiCheck)className="grid-multi-check";if(this.singleCheck)className="grid-single-check";if(this.colFix&&(this.colFix.sCheck||this.colFix.mCheck))dir="-l";if(argRowIdx==-1)for(var i=0;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;this.DumpData[i].ckEdit=argbEdit}else if(jQuery.isArray(argRowIdx)){var tempInput=
null;argRowIdx.sort(function(a,b){return a-b});for(var i=0,rowIdx=-1,j=0,arrLen=argRowIdx.length;i<len&&j<arrLen;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;if(rowIdx==argRowIdx[j]){this.DumpData[i].ckEdit=argbEdit;j++}}}else for(var i=0,rowIdx=-1;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;if(rowIdx==argRowIdx)this.DumpData[argRowIdx].ckEdit=argbEdit}},getCheckEditable:function(argbEdit){var resultArray=[],len=this.DumpDataLen;
if(!this.multiCheck&&!this.singleCheck)return resultArray;if(typeof argbEdit=="number"){var DumpData=this.getDumpData(argbEdit),checkEdit=false;if(DumpData!=null)if(DumpData.ckEdit==false)checkEdit=false;else checkEdit=true;return checkEdit}else for(var i=0,rowIdx=-1;i<len;i++){if(this.DumpData[i].type=="s"||this.DumpData[i].type=="g")continue;rowIdx++;if(argbEdit){if($.isNull(this.DumpData[i].ckEdit)||this.DumpData[i].ckEdit)resultArray.push(rowIdx)}else if(!$.isNull(this.DumpData[i].ckEdit)&&!this.DumpData[i].ckEdit)resultArray.push(rowIdx)}return resultArray},
dataFormatTempVal:function(colName,retVal,selfAttr,argNotSecure){var val="",getData=retVal;if(!selfAttr)return val=getData;var options=selfAttr.opt;if(!selfAttr.optCh)options=this.colBody[this.colBodyColumn[colName]].options;if(selfAttr.type=="input"){var argDataNX=selfAttr.dataNX,argMaxlength=selfAttr.maxlength,argData=getData;val=this.dataNXFormatVal(argData.toString(),argDataNX,argMaxlength,argNotSecure)}else if(selfAttr.type=="select"||selfAttr.type=="editSelect")if(jQuery.isArray(options))for(var i=
0,len=options.length;i<len;i++){if(options[i].value==getData){val=options[i].label;break}}else if($.isNull(options))val="";else{if(options.value==getData)val=options.label}else if(selfAttr.type=="checkbox")if(jQuery.isArray(options))for(var i=0,len=options.length;i<len;i++){if(options[i].checkValue==getData||options[i].unCheckValue==getData)if(options[i].label)val=options[i].label;else val=getData}else{if(options.checkValue==getData||options.unCheckValue==getData)if(options.label)val=options.label;
else val=getData}else if(selfAttr.type=="radio")if(jQuery.isArray(options))for(var i=0,optionLen=options.length;i<optionLen;i++){if(options[i].value==getData)if(options[i].label)val=options[i].label;else val=getData}else{if(options.value==getData)if(options.label)val=options.label;else val=getData}else if(selfAttr.type=="link")if($.isNull(options)||$.isNull(options.linkType)||!(options.linkType=="tel"||options.linkType=="sms"))val=getData;else{if(options.linkType=="tel"||options.linkType=="sms"){getData=
naw.replace(getData.toString(),"-","");var telValue="";if(getData.substr(0,2)=="02")if(getData.length<10)telValue=getData.substr(0,2)+"-"+getData.substr(2,3)+"-"+getData.substr(5,4);else telValue=getData.substr(0,2)+"-"+getData.substr(2,4)+"-"+getData.substr(6,4);else if(getData.length>0)if(getData.length<11)telValue=getData.substr(0,3)+"-"+getData.substr(3,3)+"-"+getData.substr(6,4);else telValue=getData.substr(0,3)+"-"+getData.substr(3,4)+"-"+getData.substr(7,4);if(getData.length>0)val=telValue;
else val=getData}}else if(selfAttr.type=="button")val=getData;else if(selfAttr.type=="textarea")val=getData;else if(selfAttr.type=="image"||selfAttr.type=="button")val="";else if(selfAttr.type=="graph"){val=getData;if(val=="")val="0px"}else if(selfAttr.type=="textImage"){var data=getData.toString().split("|");for(var j=0,seqLength=selfAttr.seq.length,dataLength=data.length;j<seqLength,j<dataLength;j++)if(selfAttr.seq[j]=="t"||dataLength==1&&seqLength>1)str+=data[j];else if(selfAttr.seq[j]=="i"){str+=
"<img src='";str+=data[j];str+="'>"}var resultValue=str,flag=false;str="";for(var p=0;p<resultValue.length;p++)if(flag){var end=resultValue.charAt(p);if(end==">")flag=false}else{var start=resultValue.charAt(p);if(start=="<")flag=true;else str+=start}val=str}return val},dataNXFormatVal:function(argData,argDataNX,argMaxlength,argNotSecure){if(argData.length==0)return argData;var retVal=argData.toString();if(!argDataNX)return retVal;if(argDataNX.type){var type=argDataNX.type.toUpperCase();if(type!="DLNA"&&
type!="CARD"&&type!="EMAILID"&&type!="PLN"&&type!="AN"&&type!="SEC"&&type!="EMAIL"&&type!="DIGIT"&&type!="TEL"&&type!="PHONE"&&type!="MOBILE"&&type!="SSNALL"&&type!="NM"&&type!="CLN"&&type!="SBNALL"&&type!="MASK"&&!$.validator.event._getBaseMask(type))return retVal;if(argDataNX.type=="num")if(argDataNX.currency)if(argDataNX.mask)retVal=argDataNX.currency+$.valNum(argData,argDataNX.mask);else retVal=argDataNX.currency+$.valNum(argData);else if(argDataNX.mask)retVal=$.valNum(argData,argDataNX.mask);
else retVal=$.valNum(argData);else if(argDataNX.type=="digit"){if(argMaxlength)if(argDataNX.padLeft)retVal=$.padLeft(argData,argMaxlength,argDataNX.padLeft);else if(argDataNX.padRight)retVal=$.padRight(argData,argMaxlength,argDataNX.padRight)}else if(argDataNX.type=="text")retVal=argData;else if(argNotSecure)if(argDataNX.mask)retVal=$.valMask(argData,argDataNX.mask);else if(argDataNX.type)retVal=$.valMask(argData,argDataNX.type);else retVal=argData;else if(argDataNX.mask)retVal=$.secureMask(argData,
argDataNX.mask);else if(argDataNX.type)retVal=$.secureMask(argData,argDataNX.type);else retVal=argData}return retVal},getDumpData:function(argRowIdx){var Dump=null,len=this.DumpDataLen;if(this.isGrouping||this.isSubSum){var rowIdx=-1;for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;rowIdx++;if(rowIdx==argRowIdx){Dump=this.DumpData[i];break}}}else Dump=this.DumpData[argRowIdx];if($.isNull(Dump))return null;return Dump},getColName:function(argRowIdx,argColIdx,
argType){var colName="";if($.isNull(argRowIdx)||isNaN(argRowIdx)||$.isNull(argColIdx))return"";if(isNaN(argColIdx))colName=argColIdx;else if(!this.bBodyMerge)if(this.colBody[argColIdx])colName=this.colBody[argColIdx].colName;else colName="";else{var Dump=null,len=this.DumpDataLen;if(this.isGrouping||this.isSubSum){var rowIdx=-1;if(argType&&argType=="subtotal")for(var i=0;i<len;i++){if(this.DumpData[i].type=="s"){Dump=this.DumpAttr[i];break}}else for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||
this.DumpData[i].type=="s")continue;rowIdx++;if(rowIdx==argRowIdx){Dump=this.DumpAttr[i];break}}}else Dump=this.DumpAttr[argRowIdx];for(var i=0,colBodyLen=this.colBodyLen,idx=-1;i<colBodyLen;i++){if(Dump[this.colBody[i].colName]["del"])continue;idx++;if(argColIdx==idx){colName=this.colBody[i].colName;break}}}return colName},getColIdx:function(argRowIdx,argColIdx){var colIdx=-1;if(typeof argColIdx=="number")colIdx=argColIdx;else if(!this.bBodyMerge)for(var i=0,colBodyLen=this.colBodyLen;i<colBodyLen;i++){if(argColIdx==
this.colBody[i].colName){colIdx=i;break}}else{var Dump=null,len=this.DumpDataLen;if(this.isGrouping||this.isSubSum){var rowIdx=-1;for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;rowIdx++;if(rowIdx==argRowIdx){Dump=this.DumpAttr[i];break}}}else Dump=this.DumpAttr[argRowIdx];for(var i=0,colBodyLen=this.colBodyLen,idx=-1;i<colBodyLen;i++){if(Dump[this.colBody[i].colName]["del"])continue;idx++;if(argColIdx==this.colBody[i].colName){colIdx=idx;break}}}return colIdx},
getDumpAttr:function(argRowIdx,argColIdx){var Dump=null,len=this.DumpDataLen;if(this.isGrouping||this.isSubSum){var rowIdx=-1;for(var i=0;i<len;i++){if(this.DumpData[i].type=="g"||this.DumpData[i].type=="s")continue;rowIdx++;if(rowIdx==argRowIdx){Dump=this.DumpAttr[i];break}}}else Dump=this.DumpAttr[argRowIdx];if($.isNull(Dump))return null;if($.isNull(argColIdx))return Dump;if(isNaN(argColIdx))Dump=Dump[argColIdx];else if(this.bBodyMerge)Dump=Dump[this.getColName(argRowIdx,argColIdx)];else{if(!this.colBody[argColIdx])return null;
Dump=Dump[this.colBody[argColIdx].colName]}return Dump}});$._addWidget("datagrid",$.widget.datagrid)})(naw);
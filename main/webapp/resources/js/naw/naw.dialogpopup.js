(function(p,e){p.namespace("dialogpopup");var v,u,L={width:500,height:500},a={},c={},D=p.isMobileMode,r=[0,0,0,0,0,0,0,0,0,0],G=p.plugin.Base.extend({init:function(){var a=p.storage.get("window.theme")?p.storage.get("window.theme"):naw.themeName?naw.themeName:naw.config.theme.baseName;p.loadCss(naw.config.theme.basePath+"/"+a+"/dialogpopup.css");p.loadWidget({draggable:null,resizable:null});this.setName("dialogpopup");this._super("dialogpopup")}});p._addFunction(!0,{_dialogpopup:function(n){function H(b){for(var e in c)if(b=
c[e].url,c[e].parentId==a.parentId&&b==a.url)return-1;b=0;var d=r.join("^").lastIndexOf("1^"),d=-1!=d?d/2+1:d=0;for(e=0;e<r.length;e++)if((0==d||e==d)&&0==r[e]){r[e]=1;b=e+1;break}r;return b}p._addFunction(!1,{windowReady:function(a,g){if("BEFORE_WIDGET"==a){var d=!1,k="",h=[],l="",f;for(f in c)f==b||c[f].isLoadPopup||-1==c[f].url.indexOf(g.naw.screenID)||(c[f].loadPopup(f),d=!0),k=f,h.push(c[f].isLoadPopup);if(!d){if(-1==h.join("|").indexOf("false")){for(f in c)-1!=c[f].url.indexOf(g.naw.screenID)&&
(k=l=f);""==l&&c[b]||(b=l)}c[b].swap?c[b].loadPopup(b):c[k].loadPopup(k)}d=g.document.id==b?b:g.document.id;c[d]&&c[d].isLoadPopup&&!c[d].resizeWindow&&(k=e("div#"+d).find(".window-frame"),k=k.get(0).contentWindow,k.naw.scriptStack.properties&&!k.naw.isNull(k.naw.scriptStack.properties.resizeWindow)&&(d=k.naw.scriptStack.properties.resizeWindow,k.naw.resizeWindow(d)))}else"AFTER_READY"==a&&(p.isMobileMode?jQuery.isFunction(parent.user.frameAuto)&&parent.user.frameAuto("orientationchange",a):(d=g.document.id==
b?b:g.document.id,c[d]&&c[d].isLoadPopup&&!c[d].resizeWindow&&(k=e("div#"+d).find(".window-frame"),h=jQuery("body").height(),c[d].size&&c[d].size.width&&c[d].size.height?k.get(0).contentWindow.naw.resizeWindow({width:c[d].size.width,height:c[d].size.height}):k.get(0).contentWindow.naw.resizeWindow({width:jQuery("body").width(),height:h}))))}});void 0==n&&(n={});var w=Object({parentId:document.id,arrChild:[],arrBrother:[],useAutoShowTitle:!1,url:"",scrollable:!0,draggable:!0,resizable:!1,size:{height:0,
width:0},pos:{top:null,left:null},cfgDialogPopup:{resizeAuto:!1,useTitleTranId:!1,formatTranId:{pre:"[",sur:"]"},titleIconItems:[{id:"flip",use:!1,title:""},{id:"scnGuide",use:!1,title:""},{id:"memoable",use:!1,title:""},{id:"print",use:!1,title:""},{id:"grade",use:!1,title:""},{id:"close",use:!0,title:""}]},maxHeight:!1,maxWidth:!1,minHeight:!1,minWidth:!1,modal:!1,title:"",message:"",icon:"",autoSize:!0,resizeStart:"",resizeStop:"",dragStart:"",dragStop:"",onOpen:"",onClose:""});naw.config.dialogpopup&&
(w.cfgDialogPopup=naw.merge(w.cfgDialogPopup,naw.config.dialogpopup));n&&n.options&&n.options.titleIconItems&&(w.cfgDialogPopup.titleIconItems=n.options.titleIconItems);a=w=e.extend({},w,n);var b="popup_";if(a.swap)b=a.swapTargetId,a.parentId=c[b].parentId,a.loadPopup=c[b].loadPopup,a.arrBrother=c[b].arrBrother,a.arrChild=c[b].arrChild,a.isLoadPopup=!1;else{var y=H();if(0==y){if(!a.recyclable)return alert("최대 열 수 있 팝업 창 갯수는 "+r.length+"입니다."),null;y=H()}else if(-1==y){for(var l in c){n=c[l].parentId;
var q=c[l].url;if(n==a.parentId&&q==a.url){if(a.message&&""!=a.message&&c[l].isLoadPopup){var q=naw.merge(a.message),g=e("div#"+l).find(".window-frame"),g=g.get(0).contentWindow;g.naw&&g.naw.adapter&&g.naw.adapter.outbound&&g.naw.adapter.outbound.message&&(g.naw.adapter.outbound.message(q),p.storage.remove("message-"+g.naw.screenID))}break}}return}b+=y}c[b]=naw.merge({},a);var F=this,g=null,z=!1,A=-1!=a.parentId.indexOf("container");if(!a.swap&&e("div#"+b).get(0))alert("이미 떠 있는 팝업입니다.");else{if(a.swap)g=
e("#"+b).find(".window-frame"),l=g.get(0).contentWindow,l.naw.setTitle(""),l.naw.setMsg(""),g.attr("src",a.url),a.auth&&(g.attr("auth",a.auth),g.get(0).contentWindow.auth=a.auth);else{var G=function(){var k=b.lastIndexOf("_")+1,k=b.substring(k);r[k-1]=0;var k=g.parent(),h=g.get(0).contentWindow,d=!z;k.unbind();d||(e(h).unbind(),e(h.document).unbind(),h.jQuery&&h.jQuery("*").unbind());g.empty();g.get(0).setAttribute("src","");g.get(0).style.visibility="hidden";g.get(0).style.display="none";g.remove();
k.remove();F.uiDialog.remove();F.uiDialog.remove();F=this;g=null;var h=z=!1,k=null,p;for(p in c){k=c[p];if(h)break;if(p==b){for(var m in c){h=c[m];for(d=0;h.arrBrother.length>d;d++)h.arrBrother[d]==b&&(h.arrBrother[d]=null,h.arrBrother.splice(d--,1));for(d=0;h.arrChild.length>d;d++)h.arrChild[d]==b&&(h.arrChild[d]=null,h.arrChild.splice(d--,1))}delete c[p];h=!0}}(a=k)&&!a.isMain&&a.parentId&&(uiDialogTitlebar=e("#dialogpopupTitlebar"+a.parentId),uiDialogTitlebarTextDiv=e("#dialogpopupTitle"+a.parentId),
uiDialogButtonPane=e("#dialogpopupButtonpane"+a.parentId));a&&a.body&&0!=a.body&&jQuery("body").height(a.body);D&&jQuery.isFunction(parent.user.frameAuto)&&parent.user.frameAuto("popup_orientationchange")},I=function(a){a.find(".window-overlay").hide();a=jQuery("body");a.children(".window-overlay").hide()},J=function(a,b){var e=a.find(".window-overlay");0==e.length&&(e=jQuery("<div/>").addClass("window-overlay").appendTo(c[b].uiDialogContent));e.show();a=jQuery("body");var e=a.children(".window-overlay"),
g=jQuery("div#"+b).css("zIndex");0==e.length&&(e=jQuery("<div/>").addClass("window-overlay").appendTo(a));e.css("zIndex",g).show()},M=function(e){var c=l?a.parentId:b,g=c.lastIndexOf("_")+1;c.substring(g);var k=jQuery(".access-modal");0==k.length?k=jQuery("<div/>").addClass("access-modal").appendTo(document.body):k.removeClass("state-load-data state-load-page");if(0!=a.arrBrother.length){for(var m=y,l=0;l<a.arrBrother.length;l++)c=a.arrBrother[l],g=c.lastIndexOf("_")+1,c=c.substring(g),m=m>c?c:m;
k.css({zIndex:1E4+2*m-1})}else k.css({zIndex:1E4+2*y-1});var m=a.parentId,l=-1!=m.indexOf("container"),m=l?window:window.jQuery("div#"+m).find(".window-frame").get(0).contentWindow;p.behavior.IApplyBlockUI&&p.behavior.IApplyBlockUI(k,!0,{callWidget:"dialogpopup",type:"access",target:m});p.isNull(e)||k.addClass("state-load-"+e)};F.uiDialog=e("<div id='"+b+"'></div>").addClass("dialogpopup-pnl").addClass("state-current").css({zIndex:1E4+2*y}).attr("tabIndex",-1).css("outline",0).attr("role","dialogpopup").appendTo(document.body);
n=a.scrollable?"auto":"no";var B=a.url;-1!=document.location.href.indexOf(B)&&(B+="?"+naw.getClientTime());uiDialogContent=e("<div id=dialogpopupContent"+b+"></div>").addClass("dialogpopup-content").append("<iframe id='"+b+"' style='height:100%;width:100%;' class='window-frame' scrolling='"+n+"' src='"+B+"' frameborder='0'></iframe>").addClass("dialogpopup-content");g=uiDialogContent.children(".window-frame");c[b].uiDialogContent=a.uiDialogContent=uiDialogContent;D&&jQuery("body").addClass("mobile");
a.auth&&g.attr("auth",a.auth);g.attr("topParentId",a.topParentId);g.attr("parentId",a.parentId);n=a.parentId;A||(c[n]&&(c[n].arrChild[c[n].arrChild.length]=b),g.attr("childId",b),window.jQuery("#"+a.parentId).find(".window-frame").attr("childId",b).attr("leafChildId",b));for(l in c)for(q in n=c[l].parentId,B=c[l].arrBrother,c)l!=q&&n==c[q].parentId&&-1==c[l].arrBrother.join("|").indexOf(q)&&(c[l].arrBrother[B.length]=q);g.attr("leafChildId",b);g.attr("popup","popup");g.attr("modal",a.modal);p.isFwkMode&&
(jQuery(window.frameElement).attr("topParentId",A?null:a.topParentId),jQuery(window.frameElement).attr("leafChildId",A?null:b));g.on("load",function(){});uiDialogTitlebar=(F.uiDialogTitlebar=e("<div id=dialogpopupTitlebar"+b+"></div>")).addClass("dialogpopup-title").append("<h2></h2>");e("<span id=dialogpopupTitlebarImg"+b+"></span>").addClass("title-icon").appendTo(uiDialogTitlebar.children("h2"));uiDialogTitlebarTextDiv=e("<span id=dialogpopupTitle"+b+"></span>").addClass("title-text").appendTo(uiDialogTitlebar.children("h2"));
n=a.cfgDialogPopup.titleIconItems;for(l=0;l<n.length;l++)0==l&&uiDialogTitlebar.append("<div class='toolbar-pnl'><ul></ul></div>"),q=n[l].id,B=naw.isNull(n[l].title)?q:n[l].title,n[l].use&&e("<li><span title='"+B+"' id='dialogpopupTitlebar"+q+"Img"+b+"' key='"+q+"' class='icon-"+q+"'></span></li>").children("span").hover(function(){jQuery(this).addClass("state-hover")},function(){jQuery(this).removeClass("state-hover")}).focus(function(){jQuery(this).addClass("state-focus")}).blur(function(){jQuery(this).removeClass("state-focus")}).click(function(a){a=
jQuery(this).attr("key");a="memoable"==a?"memo":a;"close"==a?setTimeout(function(){E()},0):naw.behavior.IClickMdiIcon&&(a={type:"title",clickId:a,window:g.get(0).contentWindow,popups:c},naw.behavior.IClickMdiIcon(a))}).end().appendTo(uiDialogTitlebar.find(".toolbar-pnl ul"));uiDialogButtonPane=e("<div id=dialogpopupButtonpane"+b+"><div class='message-pnl'></div></div>").addClass("dialogpopup-message");e("<span id=dialogpopupIcon"+b+"></span>").addClass("message-icon").appendTo(uiDialogButtonPane.children("div.message-pnl"));
e("<span id=dialogpopupMsg"+b+"></span>").addClass("message-text").appendTo(uiDialogButtonPane.children("div.message-pnl"));if(a.showExtFooter&&a.arrExtFooter){q="";n=tmpSpan=null;n=naw("<div class='message-ext-pnl'></div>");for(l=0;l<a.arrExtFooter.length;l++)q="",tmpSpan=null,q+="<span class='"+(a.arrExtFooter[l].css?a.arrExtFooter[l].css:"")+"' title='"+(w.arrExtFooter[l].title?w.arrExtFooter[l].title:"")+"'  itemIdx='"+l+"'>"+(a.arrExtFooter[l].text?a.arrExtFooter[l].text:"")+"</span>",tmpSpan=
naw(q),a.arrExtFooter[l].clickFn&&tmpSpan.bind("click",function(){var b=jQuery(this).attr("itemIdx");a.arrExtFooter[b].clickFn.call(this,this,g.get(0).contentWindow)}),n.append(tmpSpan);n.appendTo(uiDialogButtonPane)}e("#"+b).html(uiDialogTitlebar).append(uiDialogContent).append(uiDialogButtonPane);a.modal||(l=null,n=a.parentId,l=(A=-1!=n.indexOf("container"))?window:window.jQuery("div#"+n).find(".window-frame").get(0).contentWindow,p.behavior.IApplyBlockUI&&p.behavior.IApplyBlockUI(e("#"+b),!0,{callWidget:"dialogpopup",
type:"content",target:l}));"undefined"==typeof a.messagebar||a.messagebar||uiDialogButtonPane.hide();var E=function(k){if(z&&g.get(0).contentWindow.naw.adapter.outbound.close){var h=g.get(0).contentWindow.naw.adapter.outbound.close();if(h)g.get(0).contentWindow.naw.parentWindow().naw.behavior.ICloseWindow&&g.get(0).contentWindow.naw.parentWindow().naw.behavior.ICloseWindow(k||naw.isEmptyTrim(k)?k:h);else return!1}if("undefined"!=typeof c[b]&&(k=c[b].arrChild,0!=k.length))for(h=0;h<k.length;h++)c[k[h]]&&
c[k[h]].layerClose.call();if(!naw.isNull(g)&&"undefined"!=typeof g)if(g.get(0).contentWindow.naw.behavior.IClickMdiIcon&&(k={type:"title",clickId:"close",window:g.get(0).contentWindow,popups:c},g.get(0).contentWindow.naw.behavior.IClickMdiIcon(k)),G(),e("#"+b).remove(),!c[b]||c[b].modal&&!c[b].notAceess){k=jQuery(".access-modal");var d=0,l=0,h=!1,m;for(m in c)d++,c[m].modal&&l++;if(k.get(0)){if(n||0==d||0==l){if(0==d)for(a=c={},m=0;m<r.length;m++)0!=r[m]&&(r[m]=0);0==l&&(h=!0,k.remove())}else{m=a.parentId;
var n=-1!=m.indexOf("container"),d=m.lastIndexOf("_")+1,l=m.substring(d),f=d=!1,x=c[m];if(x){if(x.arrChild&&0!=x.arrChild.length)for(d=!1,m=0;m<x.arrChild.length;m++){var C=x.arrChild[m],t=c[C];if(t&&C!=b&&t.modal){m=jQuery("div#"+C).css("zIndex")+"";l=m[m.length-1]/2;f=!0;break}}if(0!=x.arrBrother.length)for(m=0;m<x.arrBrother.length;m++){var C=x.arrBrother[m],t=C.lastIndexOf("_")+1,K=C.substring(t);(t=c[C])&&K<l&&(l=K)}}if(0!=a.arrBrother.length){for(m=0;m<a.arrBrother.length;m++)if(t=c[a.arrBrother[m]])for(t.modal&&
(d=!0),n=0;t.arrBrother.length>n;n++)t.arrBrother[n]==b&&(t.arrBrother[n]=null,t.arrBrother.splice(n--,1));d||f||(h=!0,k.css({zIndex:1E4+(2*l-1)}))}else n&&(d=b.lastIndexOf("_")+1,l=b.substring(d)),h=!0,k.css({zIndex:1E4+(2*l-1)})}"undefined"!=typeof a&&"undefined"!=typeof a.parentId&&h&&(m=a.parentId,n=(n=-1!=m.indexOf("container"))?window:window.jQuery("div#"+m).find(".window-frame").get(0).contentWindow,p.behavior.IApplyBlockUI&&p.behavior.IApplyBlockUI(k,!1,{callWidget:"dialogpopup",type:"access",
target:n}))}}else c[b].notAceess=!1};c[b].loadPopup=function(k){k&&(b=k,a=c[b],uiDialogTitlebar=e("#dialogpopupTitlebar"+b),uiDialogTitlebarTextDiv=e("#dialogpopupTitle"+b),uiDialogButtonPane=e("#dialogpopupButtonpane"+b));c[b].isLoadPopup=!0;a.modal&&M();try{var h=g.get(0).contentWindow.naw.screenID;a.screenID=h;a.frame=g;var d=g.get(0).contentWindow.document.getElementById("wrap");if(d&&g.get(0).contentWindow.naw)z=!0;else return z=!1;d=null}catch(f){return z=!1,d=null,!1}k=0;d=g.get(0).contentWindow.document.getElementById("header");
d||(d=g.get(0).contentWindow.document.getElementsByTagName("header"),d=0<d.length?d[0]:null);var l=g.get(0).contentWindow.jQuery("#footer"),l=0==l.length?g.get(0).contentWindow.jQuery("footer"):l,l=0==l.length?null:l;if(d&&d.children[0]&&(d=d.children[0],"title"==d.className&&d.children[0])){var m=d.children[0].innerHTML;naw.isEmptyTrim(a.title)||naw.isNull(a.title)?a.title=m:m=a.title;h=g.get(0).contentWindow.naw.screenID;if(a.cfgDialogPopup.htmlConf&&a.cfgDialogPopup.htmlConf.transform.title)switch(a.cfgDialogPopup.htmlConf.transform.title){case "uppercase":h=
h.toUpperCase();break;case "lowsercase":h=h.toLowerCase()}h=a.cfgDialogPopup.useTitleTranId?a.cfgDialogPopup.formatTranId.pre+h+a.cfgDialogPopup.formatTranId.sur:"";m=m+h+(w.useViewAuth&&a.auth?a.cfgDialogPopup.formatTranId.pre+a.auth+a.cfgDialogPopup.formatTranId.sur:w.useViewAuth?"[]":"");uiDialogTitlebarTextDiv.attr("title",m);uiDialogTitlebarTextDiv.html(m);jQuery(d).height();k=l?l.height():k;k=0==k?50:k;d.style.display=a.useAutoShowTitle?"block":"none"}d=null;h=g.get(0).contentWindow.document;
h.id=b;g.get(0).contentWindow.naw.behavior.applyContainerBehavior(g.get(0).contentWindow.jQuery("div#wrap"));g.get(0).contentWindow.naw.behavior.IClickMdiIcon&&(k={type:"title",clickId:"open",window:g.get(0).contentWindow,popups:c},g.get(0).contentWindow.naw.behavior.IClickMdiIcon(k));z&&g.get(0).contentWindow.naw._addFunction(!1,{childWindow:function(a,b){if(a){var f=null,e;for(e in c){var g=c[e].parentId,d=b?b:document.id;if(-1!=c[e].url.indexOf(a)&&g==d){f=jQuery("iframe#"+e).get(0).contentWindow;
break}}return f}return null},closeWindow:function(a){naw.config.dialogpopup&&naw.config.dialogpopup.returnClose?setTimeout(function(){E(a)},0):a?E(a):setTimeout(function(){E()},0)},_closeWindow:function(){E()},getAuth:function(){return g.get(0).contentWindow.naw.behavior.IGetAuth()},hideWindow:function(){var a=g.get(0).contentWindow.document.id;c[a].modal||(jQuery("div#"+a).hide(),g.get(0).contentWindow.naw.behavior.IClickMdiIcon&&(a={type:"title",clickId:"hide",window:g.get(0).contentWindow,popups:c},
g.get(0).contentWindow.naw.behavior.IClickMdiIcon(a)))},getTopParentID:function(){return window.naw.screenID},getWindow:function(a){return naw.getWindow(a)},leafChildWindow:function(a,b){if(a){var f=null,e;for(e in c)if(-1!=c[e].url.indexOf(a)){f=jQuery("iframe#"+e).get(0).contentWindow;break}return f}return g.attr("leafChildId")==g.attr("id")?null:window.jQuery("#"+g.attr("leafChildId")).find(".window-frame").get(0).contentWindow},parentMsg:function(a){var f=g.attr("parentId");a.content=a.data;a.source=
g.get(0).contentWindow.naw.screenID;A?window.naw.adapter.outbound.message(a):window.jQuery("#"+f).find(".window-frame").get(0).contentWindow.naw.adapter.outbound.message(a)},parentWindow:function(){var a=g.attr("parentId");return-1!=a.indexOf("container")?window:window.jQuery("#"+a).find(".window-frame").get(0).contentWindow},resizeWindow:function(f){if(f.height&&f.width){naw.agent.mobile&&a.cfgDialogPopup&&a.cfgDialogPopup.useMobileFullSizeMode&&(f.width=jQuery(window).width(),f.height=jQuery(window).height());
g.attr("parentId");var d="chrome"==p.agent.browser||"safari"==p.agent.browser?e(document.body):e(document.body).parent(),l=d.get(0).scrollTop,k=d.get(0).scrollHeight,h=jQuery(document.body).width(),d=0==jQuery(".access-modal").length?0!=jQuery("main").length?jQuery("main").height():jQuery(document.body).height():jQuery(".access-modal").height();if(0==h)try{h=f.width,d=0!=jQuery("main").length?jQuery("main").height():jQuery(document.body).height()}catch(N){}f.auto=a.cfgDialogPopup.resizeAuto;p.isFwkMode&&
"undefined"!=typeof p.framework.fwk&&p.framework.fwk.config.isLocal&&p.framework.fwk.config.useMdiFix?f&&f.width&&"undefined"!=typeof p.framework.fwk&&p.framework.fwk.config.useMdiFixWidth&&f.width>=p.framework.fwk.config.useMdiFixWidth-20&&(f.auto?f.width=a.cfgDialogPopup&&a.cfgDialogPopup.useNotMargin?h:h-20:alert("팝업 화면 width("+f.width+")는 메인화면 width("+(p.framework.fwk.config.useMdiFixWidth-20)+") 보다 크게 지정 할 수 없습니다.")):!D&&f&&f.width&&f.width>=h-20&&(f.auto?f.width=a.cfgDialogPopup&&a.cfgDialogPopup.useNotMargin?
h:h-20:alert("팝업 화면 width("+f.width+")는 메인화면 width("+(h-20)+") 보다 크게 지정 할 수 없습니다."));0==f.top&&(f.top=f.top.toString());0==f.left&&(f.left=f.left.toString());f.top&&!a.pos.top&&(a.pos.top=f.top);f.left&&!a.pos.left&&(a.pos.left=f.left);!c[b].resizeWindow&&a.size.width&&0!=a.size.width&&0<a.size.width&&(f.width=a.size.width);!c[b].resizeWindow&&a.size.height&&0!=a.size.height&&0<a.size.height&&(f.height=a.size.height);c[b].resizeWindow=a.resizeWindow=!0;a.size.width=f.width>h?f&&f.auto?h-20:h-100:
f.width;a.cfgDialogPopup&&a.cfgDialogPopup.useNotMargin&&(a.size.width=f.width>h?h:f.width);var m=e(".dialogpopup-title").outerHeight()+e(".dialogpopup-message").outerHeight();"undefined"==typeof a.messagebar||a.messagebar||(m-=e(".dialogpopup-message").outerHeight());var n=d<m+parseInt(f.height,10)?f&&f.auto?d-(m+20):d-100:f.height;a.cfgDialogPopup&&a.cfgDialogPopup.useNotMargin&&(n=d<m+parseInt(f.height,10)?f&&f.auto?d-m:d:f.height);parseInt(f.height,10)>n&&!naw.config.dialogpopup&&!naw.config.dialogpopup.useNotResizable&&
(a.resizable=!0);f.height=a.size.height=n-0;jQuery(".access-modal").height()>n&&k!=jQuery(".access-modal").height()&&(d=jQuery(".access-modal").height());v=a.pos.left?a.pos.left:f.width>h?f&&f.auto?10:50:(h-f.width)/2;u=a.pos.top?a.pos.top:d-(100+m)>n?(d-(parseInt(n,10)+parseInt(m,10)))/2:f&&f.auto?10:50;a.cfgDialogPopup&&a.cfgDialogPopup.useNotMargin&&(v=a.pos.left?a.pos.left:f.width>h?f&&f.auto?0:50:(h-f.width)/2,u=a.pos.top?a.pos.top:d-(100+m)>n?(d-(parseInt(n,10)+parseInt(m,10)))/2:f&&f.auto?
0:50);var q=k-l-n;0<l&&0<=q&&d>=n+m&&(a.pos.top||(u=0==q?l:l+(d-n-m)/2));D&&(u=v=0);"fix"==f.top&&"fix"==f.left&&(n=e("div#"+b),l=n.offset().left,l+a.size.width>=h&&(l=h-a.size.width),h=n.offset().top,h+a.size.height+m>=d&&(h=d-a.size.height-m),v=a.pos.left=f.left=l,u=a.pos.top=f.top=h);D?(k="chrome"==p.agent.browser||"safari"==p.agent.browser?e(r.body):e(r.body).parent(),k.get(0),k=k.height(),e("#dialogpopupContent"+b).height(k),d="chrome"==p.agent.browser||"safari"==p.agent.browser?e("body"):e("body").parent(),
k=d.get(0).scrollHeight,f=jQuery("body").height(),f<k?(a.body=a.isMain?"100%":a.isMain?"100%":f,jQuery("body").height(k)):a.body=f,jQuery.isFunction(parent.user.frameAuto)&&parent.user.frameAuto("popup_orientationchange")):(e("#"+b).width(f.width),e("#dialogpopupContent"+b).height(f.height));e("#dialogpopupContent"+b).height();f=e("#dialogpopupContent"+b).children("iframe").get(0);if(f.contentWindow.jQuery){var r=f.contentWindow.jQuery("body"),d="chrome"==p.agent.browser||"safari"==p.agent.browser?
r:r.parent();f=d.height();r=d.width();e("#dialogpopupContent"+b).children("iframe").attr("height",f).attr("width",r)}e("div#"+b).css({top:u+"px",left:v+"px"});p.agent.mobile||(a.draggable&&(k={handle:uiDialogTitlebar,containment:p.agent.mobile?jQuery(".access-modal"):0==jQuery(".access-modal").length?jQuery("body"):k!=jQuery(".access-modal").height()?jQuery("body"):a.modal?jQuery(".access-modal"):jQuery("body"),start:function(){J(e("#dialogpopupContent"+b),b)},stop:function(){I(e("#dialogpopupContent"+
b),b)}},naw.config.dialogpopup&&naw.config.dialogpopup.draggable&&0==naw.config.dialogpopup.draggable.useContainment&&delete k.containment,p("#"+b).draggable(k)),a.resizable&&p("#"+b).resizable({minWidth:300,minHeight:200,maxWidth:e(document).width(),maxHeight:e(document).height(),onResize:function(){J(e("#dialogpopupContent"+b),b);var a=e("#"+b).outerHeight(),a=a-m;e("#dialogpopupContent"+b).height(a)},onStop:function(){I(e("#dialogpopupContent"+b),b)}}))}},rootParentWindow:function(){return window},
showWindow:function(){var a=g.get(0).contentWindow.document.id;c[a].modal||"true"==g.attr("close")||jQuery("div#"+a).show()},setMsg:function(a,c){a=naw.isNull(a)?"":a;var f="";c=p.isNull(c)?"":c;var f={E:"error",R:"warning",B:"alert"},d=f[c]?f[c]:"infor";2==arguments.length?"string"!=typeof a?f=a.messageText:(f=a,c=""==c||1==c.length?c:c.substr(2,1).toUpperCase()):f=a;if("string"==typeof a||"string"!=typeof a&&"undefined"!=typeof a.appErrCheck&&a.appErrCheck)e("#dialogpopupIcon"+b).parent().removeClass("error warning alert").addClass(d),
e("#dialogpopupMsg"+b).html(f);if(g.get(0).contentWindow.naw.bizList)a.isShow="I"!=c?!0:!1,a.msgCss={imgCss:d},g.get(0).contentWindow.naw.bizList.items[a.idx]=a,"I"!=c&&(e("#dialogpopupIcon"+b).unbind("dbclick"),e("#dialogpopupIcon"+b).bind("dbclick",function(){g.get(0).contentWindow.naw.showStatusPopup(a)}),""!=c&&"string"!=typeof a&&"undefined"!=typeof a.appErrCheck&&a.appErrCheck&&e("#dialogpopupIcon"+b).trigger("dbclick"));else if(c&&"I"!=c&&p.isFwkMode){var h={};h.opener=g.get(0).contentWindow.self;
h.msgObj=a;h.msgObj.isShow="I"!=c?!0:!1;h.msgObj.msgCss={imgCss:d};naw.config.dialogpopup&&!naw.config.dialogpopup.useNotErrorPopup&&(e("#dialogpopupIcon"+b).unbind("dbclick"),e("#dialogpopupIcon"+b).bind("dbclick",function(){g.get(0).contentWindow.naw.behavior.IOpenWindowEx(naw.config.dialogpopup.urlErrorPopup?naw.config.dialogpopup.urlErrorPopu:"nawresmessage",h)}),e("#dialogpopupIcon"+b).trigger("dbclick"))}},getOptions:function(a){return c[a]},setTitle:function(a){var f=a;c[b].title=a;a=g.get(0).contentWindow.naw.screenID;
if(c[b].cfgDialogPopup.htmlConf&&c[b].cfgDialogPopup.htmlConf.transform.title)switch(c[b].cfgDialogPopup.htmlConf.transform.title){case "uppercase":a=a.toUpperCase();break;case "lowsercase":a=a.toLowerCase()}a=c[b].cfgDialogPopup.useTitleTranId?c[b].cfgDialogPopup.formatTranId.pre+a+c[b].cfgDialogPopup.formatTranId.sur:"";f+=a;uiDialogTitlebarTextDiv.attr("title",f);uiDialogTitlebarTextDiv.html(f)},getTitle:function(a){a="";g.get(0).contentWindow.naw.behavior.IGetTitle&&(a=g.get(0).contentWindow.naw.behavior.IGetTitle());
return a},showStatusPopup:function(a){g.get(0).contentWindow.naw.behavior.IShowStatusPopup(a,"popup")},_getActiveWindow:function(){var a=null,b;for(b in c)a=c[b];return a},frameAuto:function(){for(var a in c){var b=jQuery("iframe#"+a).get(0).contentWindow.document,b="chrome"==p.agent.browser||"safari"==p.agent.browser?e(b.body):e(b.body).parent();b.get(0);var d=b.height();e("#dialogpopupContent"+a).height(d);b.get(0);c[a].isMain&&(e("body").height("100%"),jQuery.isFunction(parent.user.frameAuto)&&
parent.user.frameAuto("popup_orientationchange"));"chrome"==p.agent.browser||"safari"==p.agent.browser?e("body"):e("body").parent();b=jQuery("div#"+a).height();d=e("body").height();c[a].body=c[a].isMain?"100%":d;d<b&&jQuery("body").height(b);jQuery.isFunction(parent.user.frameAuto)&&parent.user.frameAuto("popup_orientationchange")}}});g.get(0).contentWindow.naw.setMsg("");uiDialogTitlebar.get(0).onmousedown=uiDialogButtonPane.get(0).onmousedown=g.get(0).contentWindow.document.body.onmousedown=function(f){if(0!=
c[b].arrBrother.length){f=b.lastIndexOf("_")+1;for(var d=f=b.substring(f),g=0;g<c[b].arrBrother.length;g++){var h=c[b].arrBrother[g],k=h.lastIndexOf("_")+1,k=h.substring(k);f=f>k?k:f;d=d<k?k:d;p("#"+h).css({zIndex:1E4+2*f})}p("#"+b).css({zIndex:1E4+2*d})}a=c[b];uiDialogTitlebar=e("#dialogpopupTitlebar"+b);uiDialogTitlebarTextDiv=e("#dialogpopupTitle"+b);uiDialogButtonPane=e("#dialogpopupButtonpane"+b)};h.oncontextmenu=function(){};p(h).keydown(function(a){if(a.target&&p.isFwkMode)return p.framework.windowKeyDown(a)});
if(e.isFunction(a.onIframeEnd))a.onIframeEnd(_this,a.url);if(e.isFunction(a.onShow))a.onShow(_this);a.icon&&e("#dialogpopupTitlebarImg"+b).parent().parent().addClass(a.icon);a.autoSize&&(a.size=L,a.autoSize=!1,a.resizable=!0);if(a.autoSize){d=k=50;e(h.body).width();l=e(document.body).width();m=A?e(document.body).height():jQuery(".access-modal").height();a.size.width=l-2*k;e("#"+b).width(a.size.width);var n=e(".dialogpopup-title").outerHeight()+e(".dialogpopup-message").outerHeight();"undefined"==
typeof a.messagebar||a.messagebar||(n-=e(".dialogpopup-message").outerHeight());h=e(h.body).height();a.size.height=m-2*d<n+h?m-(2*d+n):h+5;v=k;u=m-(2*d+n)>h?(m-(h+n))/2:d}else d=k=50,l=e(document.body).width(),m=A?e(document.body).height():jQuery(".access-modal").height(),a.size.width=a.size.width>l?l-2*k:a.size.width,e("#"+b).width(a.size.width),n=e(".dialogpopup-title").outerHeight()+e(".dialogpopup-message").outerHeight(),"undefined"==typeof a.messagebar||a.messagebar||(n-=e(".dialogpopup-message").outerHeight()),
h=m<n+parseInt(a.size.height,10)?m-2*d:a.size.height,a.size.height=h-0,v=a.pos.left?a.pos.left:a.size.width>l?k:(l-a.size.width)/2,u=a.pos.top?a.pos.top:m-(2*d+n)>h?(m-(parseInt(h,10)+parseInt(n,10)))/2:d;D&&(u=v=0);a.size.top=u;a.size.left=v;e("#dialogpopupContent"+b).height(a.size.height);uiDialogContent.show()};c[b].isLoadPopup=!1;c[b].resizeWindow=!1;c[b].layerClose=E;a.onOpen&&a.onOpen.call()}return!1}}});new G})(naw,jQuery);